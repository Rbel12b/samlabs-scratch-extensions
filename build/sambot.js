/*! For license information please see sambot.js.LICENSE.txt */
(()=>{var t={20:(t,e,r)=>{t.exports=a;var i=r(9431),n=r(8313).Writable,s=r(3193).StringDecoder,o=r(181).Buffer;function a(t,e){var r=this._parser=new i(t,e),o=this._decoder=new s;n.call(this,{decodeStrings:!1}),this.once("finish",(function(){r.end(o.end())}))}r(728)(a,n),a.prototype._write=function(t,e,r){t instanceof o&&(t=this._decoder.write(t)),this._parser.write(t),r()}},77:t=>{"use strict";t.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},181:t=>{"use strict";t.exports=require("buffer")},204:t=>{var e={black:"#000",red:"#c23621",green:"#25bc26",yellow:"#bbbb00",blue:"#492ee1",magenta:"#d338d3",cyan:"#33bbc8",gray:"#808080",purple:"#708"};t.exports=function(t,r){return r?"color: #fff; background: "+e[t]+";":"color: "+e[t]+";"}},231:t=>{class e{static get RGB_BLACK(){return{r:0,g:0,b:0}}static get RGB_WHITE(){return{r:255,g:255,b:255}}static decimalToHex(t){t<0&&(t+=16777216);let e=Number(t).toString(16);return e=`#${"000000".substr(0,6-e.length)}${e}`,e}static decimalToRgb(t){const e=t>>24&255;return{r:t>>16&255,g:t>>8&255,b:255&t,a:e>0?e:255}}static hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((t,e,r,i)=>e+e+r+r+i+i));const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}static rgbToHex(t){return e.decimalToHex(e.rgbToDecimal(t))}static rgbToDecimal(t){return(t.r<<16)+(t.g<<8)+t.b}static hexToDecimal(t){return e.rgbToDecimal(e.hexToRgb(t))}static hsvToRgb(t){let e=t.h%360;e<0&&(e+=360);const r=Math.max(0,Math.min(t.s,1)),i=Math.max(0,Math.min(t.v,1)),n=Math.floor(e/60),s=e/60-n,o=i*(1-r),a=i*(1-r*s),c=i*(1-r*(1-s));let u,l,h;switch(n){default:case 0:u=i,l=c,h=o;break;case 1:u=a,l=i,h=o;break;case 2:u=o,l=i,h=c;break;case 3:u=o,l=a,h=i;break;case 4:u=c,l=o,h=i;break;case 5:u=i,l=o,h=a}return{r:Math.floor(255*u),g:Math.floor(255*l),b:Math.floor(255*h)}}static rgbToHsv(t){const e=t.r/255,r=t.g/255,i=t.b/255,n=Math.min(Math.min(e,r),i),s=Math.max(Math.max(e,r),i);let o=0,a=0;return n!==s&&(o=60*((e===n?3:r===n?5:1)-(e===n?r-i:r===n?i-e:e-r)/(s-n))%360,a=(s-n)/s),{h:o,s:a,v:s}}static mixRgb(t,e,r){if(r<=0)return t;if(r>=1)return e;const i=1-r;return{r:i*t.r+r*e.r,g:i*t.g+r*e.g,b:i*t.b+r*e.b}}}t.exports=e},354:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=e.encode=e.decodeStrict=e.decode=void 0;var i=r(2142),n=r(7538);e.decode=function(t,e){return(!e||e<=0?i.decodeXML:i.decodeHTML)(t)},e.decodeStrict=function(t,e){return(!e||e<=0?i.decodeXML:i.decodeHTMLStrict)(t)},e.encode=function(t,e){return(!e||e<=0?n.encodeXML:n.encodeHTML)(t)};var s=r(7538);Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return s.encodeXML}}),Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return s.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return s.encodeNonAsciiHTML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return s.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return s.escapeUTF8}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return s.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return s.encodeHTML}});var o=r(2142);Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})},432:function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=i(r(2071)),s=String.fromCodePoint||function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+String.fromCharCode(t)};e.default=function(t){return t>=55296&&t<=57343||t>1114111?"�":(t in n.default&&(t=n.default[t]),s(t))}},455:(t,e,r)=>{"use strict";var i=r(7909),n=r(8467),s=r(500),o=r(9127),a=r(802);function c(t,e){return Object.keys(e).forEach((function(r){t[r]=e[r]})),t}t.exports=function t(){var e=c({},a),r="en",u={},l=function(t){return t},h=null,d="warning",p={};function f(t,e,s){var o="string"==typeof t?t:t.default,a=_(o,"object"==typeof t&&t.id||l(o),s||r);return(a.format||(a.format=n(i(a.message),s||r,p)))(e)}f.rich=function(t,e,s){var o="string"==typeof t?t:t.default,a=_(o,"object"==typeof t&&t.id||l(o),s||r);return(a.toParts||(a.toParts=n.toParts(i(a.message,{tagsType:m}),s||r,p)))(e)};var m="<>";function g(t,e){var r=t[2];return function(t,e){var i="object"==typeof r?function(t,e){return Object.keys(t).reduce((function(r,i){return r[i]=t[i](e),r}),{})}(r,e):r;return"function"==typeof t?t(i):t}}function _(t,e,r){var i=o(r,u)||"en",n=u[i]||(u[i]={}),s=n[e];if("string"==typeof s&&(s=n[e]={message:s}),!s){var a='Translation for "'+e+'" in "'+i+'" is missing';if("warning"===d)"undefined"!=typeof console&&console.warn(a);else if("ignore"!==d)throw new Error(a);var c="function"==typeof h?h(t,e,i)||t:h||t;s=n[e]={message:c}}return s}function b(t,e,i,n,a){"object"==typeof i&&"object"!=typeof n&&(a=n,n=i,i=0);var c=o(a||r,s),u=c&&s[c][t]||y;return n["="+ +e]||n[u(e-i)]||n.other}function y(){return"other"}return p[m]=g,f.setup=function(t){return(t=t||{}).locale&&(r=t.locale),"translations"in t&&(u=t.translations||{}),t.generateId&&(l=t.generateId),"missingReplacement"in t&&(h=t.missingReplacement),t.missingTranslation&&(d=t.missingTranslation),t.formats&&(t.formats.number&&c(e.number,t.formats.number),t.formats.date&&c(e.date,t.formats.date),t.formats.time&&c(e.time,t.formats.time)),t.types&&((p=t.types)[m]=g),{locale:r,translations:u,generateId:l,missingReplacement:h,missingTranslation:d,formats:e,types:p}},f.number=function(t,i,n){var s=i&&e.number[i]||e.parseNumberPattern(i)||e.number.default;return new Intl.NumberFormat(n||r,s).format(t)},f.date=function(t,i,n){var s=i&&e.date[i]||e.parseDatePattern(i)||e.date.default;return new Intl.DateTimeFormat(n||r,s).format(t)},f.time=function(t,i,n){var s=i&&e.time[i]||e.parseDatePattern(i)||e.time.default;return new Intl.DateTimeFormat(n||r,s).format(t)},f.select=function(t,e){return e[t]||e.other},f.custom=function(t,e,r,i){return t[1]in p?p[t[1]](t,e)(r,i):r},f.plural=b.bind(null,"cardinal"),f.selectordinal=b.bind(null,"ordinal"),f.namespace=t,f}()},500:t=>{"use strict";var e="zero",r="one",i="two",n="few",s="many",o="other",a=[function(t){return 1==+t?r:o},function(t){var e=+t;return 0<=e&&e<=1?r:o},function(t){return 0===Math.floor(Math.abs(+t))||1==+t?r:o},function(t){var a=+t;return 0===a?e:1===a?r:2===a?i:3<=a%100&&a%100<=10?n:11<=a%100&&a%100<=99?s:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length;return 1===e&&0===i?r:o},function(t){var e=+t;return e%10==1&&e%100!=11?r:2<=e%10&&e%10<=4&&(e%100<12||14<e%100)?n:e%10==0||5<=e%10&&e%10<=9||11<=e%100&&e%100<=14?s:o},function(t){var e=+t;return e%10==1&&e%100!=11&&e%100!=71&&e%100!=91?r:e%10==2&&e%100!=12&&e%100!=72&&e%100!=92?i:(3<=e%10&&e%10<=4||e%10==9)&&(e%100<10||19<e%100)&&(e%100<70||79<e%100)&&(e%100<90||99<e%100)?n:0!==e&&e%1e6==0?s:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length,s=+(t+".").split(".")[1];return 0===i&&e%10==1&&e%100!=11||s%10==1&&s%100!=11?r:0===i&&2<=e%10&&e%10<=4&&(e%100<12||14<e%100)||2<=s%10&&s%10<=4&&(s%100<12||14<s%100)?n:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length;return 1===e&&0===i?r:2<=e&&e<=4&&0===i?n:0!==i?s:o},function(t){var a=+t;return 0===a?e:1===a?r:2===a?i:3===a?n:6===a?s:o},function(t){var e=Math.floor(Math.abs(+t)),i=+(""+t).replace(/^[^.]*.?|0+$/g,"");return 1==+t||0!==i&&(0===e||1===e)?r:o},function(t){var e=Math.floor(Math.abs(+t)),s=(t+".").split(".")[1].length,a=+(t+".").split(".")[1];return 0===s&&e%100==1||a%100==1?r:0===s&&e%100==2||a%100==2?i:0===s&&3<=e%100&&e%100<=4||3<=a%100&&a%100<=4?n:o},function(t){var e=Math.floor(Math.abs(+t));return 0===e||1===e?r:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length,n=+(t+".").split(".")[1];return 0===i&&(1===e||2===e||3===e)||0===i&&e%10!=4&&e%10!=6&&e%10!=9||0!==i&&n%10!=4&&n%10!=6&&n%10!=9?r:o},function(t){var e=+t;return 1===e?r:2===e?i:3<=e&&e<=6?n:7<=e&&e<=10?s:o},function(t){var e=+t;return 1===e||11===e?r:2===e||12===e?i:3<=e&&e<=10||13<=e&&e<=19?n:o},function(t){var e=Math.floor(Math.abs(+t)),a=(t+".").split(".")[1].length;return 0===a&&e%10==1?r:0===a&&e%10==2?i:0!==a||e%100!=0&&e%100!=20&&e%100!=40&&e%100!=60&&e%100!=80?0!==a?s:o:n},function(t){var e=Math.floor(Math.abs(+t)),n=(t+".").split(".")[1].length,a=+t;return 1===e&&0===n?r:2===e&&0===n?i:0===n&&(a<0||10<a)&&a%10==0?s:o},function(t){var e=Math.floor(Math.abs(+t)),i=+(""+t).replace(/^[^.]*.?|0+$/g,"");return 0===i&&e%10==1&&e%100!=11||0!==i?r:o},function(t){var e=+t;return 1===e?r:2===e?i:o},function(t){var i=+t;return 0===i?e:1===i?r:o},function(t){var i=Math.floor(Math.abs(+t)),n=+t;return 0===n?e:0!==i&&1!==i||0===n?o:r},function(t){var e=+(t+".").split(".")[1],i=+t;return i%10==1&&(i%100<11||19<i%100)?r:2<=i%10&&i%10<=9&&(i%100<11||19<i%100)?n:0!==e?s:o},function(t){var i=(t+".").split(".")[1].length,n=+(t+".").split(".")[1],s=+t;return s%10==0||11<=s%100&&s%100<=19||2===i&&11<=n%100&&n%100<=19?e:s%10==1&&s%100!=11||2===i&&n%10==1&&n%100!=11||2!==i&&n%10==1?r:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length,n=+(t+".").split(".")[1];return 0===i&&e%10==1&&e%100!=11||n%10==1&&n%100!=11?r:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length,s=+t;return 1===e&&0===i?r:0!==i||0===s||1!==s&&1<=s%100&&s%100<=19?n:o},function(t){var e=+t;return 1===e?r:0===e||2<=e%100&&e%100<=10?n:11<=e%100&&e%100<=19?s:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length;return 1===e&&0===i?r:0===i&&2<=e%10&&e%10<=4&&(e%100<12||14<e%100)?n:0===i&&1!==e&&0<=e%10&&e%10<=1||0===i&&5<=e%10&&e%10<=9||0===i&&12<=e%100&&e%100<=14?s:o},function(t){var e=Math.floor(Math.abs(+t));return 0<=e&&e<=1?r:o},function(t){var e=Math.floor(Math.abs(+t)),i=(t+".").split(".")[1].length;return 0===i&&e%10==1&&e%100!=11?r:0===i&&2<=e%10&&e%10<=4&&(e%100<12||14<e%100)?n:0===i&&e%10==0||0===i&&5<=e%10&&e%10<=9||0===i&&11<=e%100&&e%100<=14?s:o},function(t){var e=+t;return 0===Math.floor(Math.abs(+t))||1===e?r:2<=e&&e<=10?n:o},function(t){var e=Math.floor(Math.abs(+t)),i=+(t+".").split(".")[1],n=+t;return 0===n||1===n||0===e&&1===i?r:o},function(t){var e=Math.floor(Math.abs(+t)),s=(t+".").split(".")[1].length;return 0===s&&e%100==1?r:0===s&&e%100==2?i:0===s&&3<=e%100&&e%100<=4||0!==s?n:o},function(t){var e=+t;return 0<=e&&e<=1||11<=e&&e<=99?r:o},function(t){var e=+t;return 1===e||5===e||7===e||8===e||9===e||10===e?r:2===e||3===e?i:4===e?n:6===e?s:o},function(t){var e=Math.floor(Math.abs(+t));return e%10==1||e%10==2||e%10==5||e%10==7||e%10==8||e%100==20||e%100==50||e%100==70||e%100==80?r:e%10==3||e%10==4||e%1e3==100||e%1e3==200||e%1e3==300||e%1e3==400||e%1e3==500||e%1e3==600||e%1e3==700||e%1e3==800||e%1e3==900?n:0===e||e%10==6||e%100==40||e%100==60||e%100==90?s:o},function(t){var e=+t;return e%10!=2&&e%10!=3||e%100==12||e%100==13?o:n},function(t){var e=+t;return 1===e||3===e?r:2===e?i:4===e?n:o},function(t){var a=+t;return 0===a||7===a||8===a||9===a?e:1===a?r:2===a?i:3===a||4===a?n:5===a||6===a?s:o},function(t){var e=+t;return e%10==1&&e%100!=11?r:e%10==2&&e%100!=12?i:e%10==3&&e%100!=13?n:o},function(t){var e=+t;return 1===e||11===e?r:2===e||12===e?i:3===e||13===e?n:o},function(t){var e=+t;return 1===e?r:2===e||3===e?i:4===e?n:6===e?s:o},function(t){var e=+t;return 1===e||5===e?r:o},function(t){var e=+t;return 11===e||8===e||80===e||800===e?s:o},function(t){var e=Math.floor(Math.abs(+t));return 1===e?r:0===e||2<=e%100&&e%100<=20||e%100==40||e%100==60||e%100==80?s:o},function(t){var e=+t;return e%10==6||e%10==9||e%10==0&&0!==e?s:o},function(t){var e=Math.floor(Math.abs(+t));return e%10==1&&e%100!=11?r:e%10==2&&e%100!=12?i:e%10!=7&&e%10!=8||e%100==17||e%100==18?o:s},function(t){var e=+t;return 1===e?r:2===e||3===e?i:4===e?n:o},function(t){var e=+t;return 1<=e&&e<=4?r:o},function(t){var e=+t;return 1===e||5===e||7<=e&&e<=9?r:2===e||3===e?i:4===e?n:6===e?s:o},function(t){var e=+t;return 1===e?r:e%10==4&&e%100!=14?s:o},function(t){var e=+t;return e%10!=1&&e%10!=2||e%100==11||e%100==12?o:r},function(t){var e=+t;return e%10==6||e%10==9||10===e?n:o},function(t){var e=+t;return e%10==3&&e%100!=13?n:o}];t.exports={af:{cardinal:a[0]},ak:{cardinal:a[1]},am:{cardinal:a[2]},ar:{cardinal:a[3]},ars:{cardinal:a[3]},as:{cardinal:a[2],ordinal:a[34]},asa:{cardinal:a[0]},ast:{cardinal:a[4]},az:{cardinal:a[0],ordinal:a[35]},be:{cardinal:a[5],ordinal:a[36]},bem:{cardinal:a[0]},bez:{cardinal:a[0]},bg:{cardinal:a[0]},bh:{cardinal:a[1]},bn:{cardinal:a[2],ordinal:a[34]},br:{cardinal:a[6]},brx:{cardinal:a[0]},bs:{cardinal:a[7]},ca:{cardinal:a[4],ordinal:a[37]},ce:{cardinal:a[0]},cgg:{cardinal:a[0]},chr:{cardinal:a[0]},ckb:{cardinal:a[0]},cs:{cardinal:a[8]},cy:{cardinal:a[9],ordinal:a[38]},da:{cardinal:a[10]},de:{cardinal:a[4]},dsb:{cardinal:a[11]},dv:{cardinal:a[0]},ee:{cardinal:a[0]},el:{cardinal:a[0]},en:{cardinal:a[4],ordinal:a[39]},eo:{cardinal:a[0]},es:{cardinal:a[0]},et:{cardinal:a[4]},eu:{cardinal:a[0]},fa:{cardinal:a[2]},ff:{cardinal:a[12]},fi:{cardinal:a[4]},fil:{cardinal:a[13],ordinal:a[0]},fo:{cardinal:a[0]},fr:{cardinal:a[12],ordinal:a[0]},fur:{cardinal:a[0]},fy:{cardinal:a[4]},ga:{cardinal:a[14],ordinal:a[0]},gd:{cardinal:a[15],ordinal:a[40]},gl:{cardinal:a[4]},gsw:{cardinal:a[0]},gu:{cardinal:a[2],ordinal:a[41]},guw:{cardinal:a[1]},gv:{cardinal:a[16]},ha:{cardinal:a[0]},haw:{cardinal:a[0]},he:{cardinal:a[17]},hi:{cardinal:a[2],ordinal:a[41]},hr:{cardinal:a[7]},hsb:{cardinal:a[11]},hu:{cardinal:a[0],ordinal:a[42]},hy:{cardinal:a[12],ordinal:a[0]},ia:{cardinal:a[4]},io:{cardinal:a[4]},is:{cardinal:a[18]},it:{cardinal:a[4],ordinal:a[43]},iu:{cardinal:a[19]},iw:{cardinal:a[17]},jgo:{cardinal:a[0]},ji:{cardinal:a[4]},jmc:{cardinal:a[0]},ka:{cardinal:a[0],ordinal:a[44]},kab:{cardinal:a[12]},kaj:{cardinal:a[0]},kcg:{cardinal:a[0]},kk:{cardinal:a[0],ordinal:a[45]},kkj:{cardinal:a[0]},kl:{cardinal:a[0]},kn:{cardinal:a[2]},ks:{cardinal:a[0]},ksb:{cardinal:a[0]},ksh:{cardinal:a[20]},ku:{cardinal:a[0]},kw:{cardinal:a[19]},ky:{cardinal:a[0]},lag:{cardinal:a[21]},lb:{cardinal:a[0]},lg:{cardinal:a[0]},ln:{cardinal:a[1]},lt:{cardinal:a[22]},lv:{cardinal:a[23]},mas:{cardinal:a[0]},mg:{cardinal:a[1]},mgo:{cardinal:a[0]},mk:{cardinal:a[24],ordinal:a[46]},ml:{cardinal:a[0]},mn:{cardinal:a[0]},mo:{cardinal:a[25],ordinal:a[0]},mr:{cardinal:a[2],ordinal:a[47]},mt:{cardinal:a[26]},nah:{cardinal:a[0]},naq:{cardinal:a[19]},nb:{cardinal:a[0]},nd:{cardinal:a[0]},ne:{cardinal:a[0],ordinal:a[48]},nl:{cardinal:a[4]},nn:{cardinal:a[0]},nnh:{cardinal:a[0]},no:{cardinal:a[0]},nr:{cardinal:a[0]},nso:{cardinal:a[1]},ny:{cardinal:a[0]},nyn:{cardinal:a[0]},om:{cardinal:a[0]},or:{cardinal:a[0],ordinal:a[49]},os:{cardinal:a[0]},pa:{cardinal:a[1]},pap:{cardinal:a[0]},pl:{cardinal:a[27]},prg:{cardinal:a[23]},ps:{cardinal:a[0]},pt:{cardinal:a[28]},"pt-PT":{cardinal:a[4]},rm:{cardinal:a[0]},ro:{cardinal:a[25],ordinal:a[0]},rof:{cardinal:a[0]},ru:{cardinal:a[29]},rwk:{cardinal:a[0]},saq:{cardinal:a[0]},sc:{cardinal:a[4],ordinal:a[43]},scn:{cardinal:a[4],ordinal:a[43]},sd:{cardinal:a[0]},sdh:{cardinal:a[0]},se:{cardinal:a[19]},seh:{cardinal:a[0]},sh:{cardinal:a[7]},shi:{cardinal:a[30]},si:{cardinal:a[31]},sk:{cardinal:a[8]},sl:{cardinal:a[32]},sma:{cardinal:a[19]},smi:{cardinal:a[19]},smj:{cardinal:a[19]},smn:{cardinal:a[19]},sms:{cardinal:a[19]},sn:{cardinal:a[0]},so:{cardinal:a[0]},sq:{cardinal:a[0],ordinal:a[50]},sr:{cardinal:a[7]},ss:{cardinal:a[0]},ssy:{cardinal:a[0]},st:{cardinal:a[0]},sv:{cardinal:a[4],ordinal:a[51]},sw:{cardinal:a[4]},syr:{cardinal:a[0]},ta:{cardinal:a[0]},te:{cardinal:a[0]},teo:{cardinal:a[0]},ti:{cardinal:a[1]},tig:{cardinal:a[0]},tk:{cardinal:a[0],ordinal:a[52]},tl:{cardinal:a[13],ordinal:a[0]},tn:{cardinal:a[0]},tr:{cardinal:a[0]},ts:{cardinal:a[0]},tzm:{cardinal:a[33]},ug:{cardinal:a[0]},uk:{cardinal:a[29],ordinal:a[53]},ur:{cardinal:a[4]},uz:{cardinal:a[0]},ve:{cardinal:a[0]},vo:{cardinal:a[0]},vun:{cardinal:a[0]},wa:{cardinal:a[1]},wae:{cardinal:a[0]},xh:{cardinal:a[0]},xog:{cardinal:a[0]},yi:{cardinal:a[4]},zu:{cardinal:a[2]},lo:{ordinal:a[0]},ms:{ordinal:a[0]},vi:{ordinal:a[0]}}},510:(t,e,r)=>{var i=r(3562),n=r(2845),s=i.isTag;t.exports={getInnerHTML:function(t,e){return t.children?t.children.map((function(t){return n(t,e)})).join(""):""},getOuterHTML:n,getText:function t(e){return Array.isArray(e)?e.map(t).join(""):s(e)?"br"===e.name?"\n":t(e.children):e.type===i.CDATA?t(e.children):e.type===i.Text?e.data:""}}},529:(t,e,r)=>{var i=r(887),n=/\n+$/,s=new i;s.write=function(t,e,r){var i=r.length-1;if("undefined"!=typeof console&&console.log){if(console.log.apply)return console.log.apply(console,[t,e].concat(r));if(JSON&&JSON.stringify){r[i]&&"string"==typeof r[i]&&(r[i]=r[i].replace(n,""));try{for(i=0;i<r.length;i++)r[i]=JSON.stringify(r[i])}catch(t){}console.log(r.join(" "))}}},s.formatters=["color","minilog"],s.color=r(7205),s.minilog=r(7985),t.exports=s},661:t=>{t.exports=function(t,e){let r="";for(const t in e){let i=e[t].value;"CURRENTMENU"===t&&(i=i.toLowerCase()),r+=`_${i}`}return`${t}${r}`}},728:(t,e,r)=>{try{var i=r(9023);if("function"!=typeof i.inherits)throw"";t.exports=i.inherits}catch(e){t.exports=r(3843)}},764:(t,e,r)=>{e.getScripts=function(){throw new Error("blocks.js has not initialized BlocksRuntimeCache")},e._RuntimeScriptCache=class{constructor(t,e){this.container=t,this.blockId=e;const r=t.getBlock(e),i=t.getFields(r);if(this.fieldsOfInputs=Object.assign({},i),0===Object.keys(i).length){const e=t.getInputs(r);for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const i=e[r].block,n=t.getBlock(i),s=t.getFields(n);Object.assign(this.fieldsOfInputs,s)}}for(const t in this.fieldsOfInputs){const e=this.fieldsOfInputs[t]=Object.assign({},this.fieldsOfInputs[t]);e.value.toUpperCase&&(e.value=e.value.toUpperCase())}}},r(4766)},789:(t,e,r)=>{function i(){}r(887).mixin(i),i.prototype.write=function(t,e,r){this.emit("item",(t?t+" ":"")+(e?e+" ":"")+r.join(" "))},t.exports=i},802:t=>{var e="long",r="short",i="narrow",n="numeric",s="2-digit";t.exports={number:{decimal:{style:"decimal"},integer:{style:"decimal",maximumFractionDigits:0},currency:{style:"currency",currency:"USD"},percent:{style:"percent"},default:{style:"decimal"}},date:{short:{month:n,day:n,year:s},medium:{month:r,day:n,year:n},long:{month:e,day:n,year:n},full:{month:e,day:n,year:n,weekday:e},default:{month:r,day:n,year:n}},time:{short:{hour:n,minute:n},medium:{hour:n,minute:n,second:n},long:{hour:n,minute:n,second:n,timeZoneName:r},full:{hour:n,minute:n,second:n,timeZoneName:r},default:{hour:n,minute:n,second:n}},duration:{default:{hours:{minimumIntegerDigits:1,maximumFractionDigits:0},minutes:{minimumIntegerDigits:2,maximumFractionDigits:0},seconds:{minimumIntegerDigits:2,maximumFractionDigits:3}}},parseNumberPattern:function(t){if(t){var e={},r=t.match(/\b[A-Z]{3}\b/i),i=t.replace(/[^¤]/g,"").length;if(!i&&r&&(i=1),i?(e.style="currency",e.currencyDisplay=1===i?"symbol":2===i?"code":"name",e.currency=r?r[0].toUpperCase():"USD"):t.indexOf("%")>=0&&(e.style="percent"),!/[@#0]/.test(t))return e.style?e:void 0;if(e.useGrouping=t.indexOf(",")>=0,/E\+?[@#0]+/i.test(t)||t.indexOf("@")>=0){var n=t.replace(/E\+?[@#0]+|[^@#0]/gi,"");e.minimumSignificantDigits=Math.min(Math.max(n.replace(/[^@0]/g,"").length,1),21),e.maximumSignificantDigits=Math.min(Math.max(n.length,1),21)}else{for(var s=t.replace(/[^#0.]/g,"").split("."),o=s[0],a=o.length-1;"0"===o[a];)--a;e.minimumIntegerDigits=Math.min(Math.max(o.length-1-a,1),21);var c=s[1]||"";for(a=0;"0"===c[a];)++a;for(e.minimumFractionDigits=Math.min(Math.max(a,0),20);"#"===c[a];)++a;e.maximumFractionDigits=Math.min(Math.max(a,0),20)}return e}},parseDatePattern:function(t){if(t){for(var o={},a=0;a<t.length;){for(var c=t[a],u=1;t[++a]===c;)++u;switch(c){case"G":o.era=5===u?i:4===u?e:r;break;case"y":case"Y":o.year=2===u?s:n;break;case"M":case"L":u=Math.min(Math.max(u-1,0),4),o.month=[n,s,r,e,i][u];break;case"E":case"e":case"c":o.weekday=5===u?i:4===u?e:r;break;case"d":case"D":o.day=2===u?s:n;break;case"h":case"K":o.hour12=!0,o.hour=2===u?s:n;break;case"H":case"k":o.hour12=!1,o.hour=2===u?s:n;break;case"m":o.minute=2===u?s:n;break;case"s":case"S":o.second=2===u?s:n;break;case"z":case"Z":case"v":case"V":o.timeZoneName=1===u?r:e}}return Object.keys(o).length?o:void 0}}}},875:(t,e,r)=>{const i=r(5262);class n{constructor(t){this.runtime=t,this.provider=null,this._skinId=-1,this._drawable=-1,this._ghost=0,this._forceTransparentPreview=!1}static get FORMAT_IMAGE_DATA(){return"image-data"}static get FORMAT_CANVAS(){return"canvas"}static get DIMENSIONS(){return[480,360]}static get ORDER(){return 1}setProvider(t){this.provider=t}enableVideo(){return this.provider?this.provider.enableVideo().then((()=>this._setupPreview())):null}disableVideo(){if(this._disablePreview(),!this.provider)return null;this.provider.disableVideo()}getFrame({dimensions:t=n.DIMENSIONS,mirror:e=this.mirror,format:r=n.FORMAT_IMAGE_DATA,cacheTimeout:i=this._frameCacheTimeout}){return this.provider?this.provider.getFrame({dimensions:t,mirror:e,format:r,cacheTimeout:i}):null}setPreviewGhost(t){this._ghost=t,-1!==this._drawable&&this.runtime.renderer.updateDrawableEffect(this._drawable,"ghost",this._forceTransparentPreview?100:t)}_disablePreview(){-1!==this._skinId&&(this.runtime.renderer.updateBitmapSkin(this._skinId,new ImageData(...n.DIMENSIONS),1),this.runtime.renderer.updateDrawableVisible(this._drawable,!1)),this._renderPreviewFrame=null}_setupPreview(){const{renderer:t}=this.runtime;t&&(-1===this._skinId&&-1===this._drawable&&(this._skinId=t.createBitmapSkin(new ImageData(...n.DIMENSIONS),1),this._drawable=t.createDrawable(i.VIDEO_LAYER),t.updateDrawableSkinId(this._drawable,this._skinId)),this._renderPreviewFrame||(t.updateDrawableEffect(this._drawable,"ghost",this._forceTransparentPreview?100:this._ghost),t.updateDrawableVisible(this._drawable,!0),this._renderPreviewFrame=()=>{if(clearTimeout(this._renderPreviewTimeout),!this._renderPreviewFrame)return;this._renderPreviewTimeout=setTimeout(this._renderPreviewFrame,this.runtime.currentStepTime);const e=this.getFrame({format:n.FORMAT_IMAGE_DATA,cacheTimeout:this.runtime.currentStepTime});e?(t.updateBitmapSkin(this._skinId,e,1),this.runtime.requestRedraw()):t.updateBitmapSkin(this._skinId,new ImageData(...n.DIMENSIONS),1)},this._renderPreviewFrame()))}get videoReady(){return!!this.provider&&this.provider.videoReady}postData({forceTransparentPreview:t}){this._forceTransparentPreview=t,this.setPreviewGhost(this._ghost)}}t.exports=n},887:(t,e,r)=>{function i(){}r(4828).mixin(i),i.prototype.write=function(t,e,r){this.emit("item",t,e,r)},i.prototype.end=function(){this.emit("end"),this.removeAllListeners()},i.prototype.pipe=function(t){var e=this;function r(){t.write.apply(t,Array.prototype.slice.call(arguments))}function i(){!t._isStdio&&t.end()}return e.emit("unpipe",t),t.emit("pipe",e),e.on("item",r),e.on("end",i),e.when("unpipe",(function(n){var s=n===t||void 0===n;return s&&(e.removeListener("item",r),e.removeListener("end",i),t.emit("unpipe")),s})),t},i.prototype.unpipe=function(t){return this.emit("unpipe",t),this},i.prototype.format=function(t){throw new Error(["Warning: .format() is deprecated in Minilog v2! Use .pipe() instead. For example:","var Minilog = require('minilog');","Minilog","  .pipe(Minilog.backends.console.formatClean)","  .pipe(Minilog.backends.console);"].join("\n"))},i.mixin=function(t){var e,r=i.prototype;for(e in r)r.hasOwnProperty(e)&&(t.prototype[e]=r[e])},t.exports=i},889:(t,e,r)=>{const i=r(6550),n=r(9834),s=function(t){const e=Object.create(null);e.tagName=t.name,e.children=[];for(const r in t.attribs)"xmlns"!==r&&(e[r]=n(t.attribs[r]),"blockinfo"===r&&(e.blockInfo=JSON.parse(e.blockinfo),delete e.blockinfo));for(let r=0;r<t.children.length;r++)e.children.push(s(t.children[r]));return e};t.exports=function(t){let e;return e="object"==typeof t?t:i.parseDOM(t)[0],s(e)}},1108:(t,e,r)=>{"use strict";var i=r(2758).F.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,n){var s=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,n,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new i(n?r:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}}},1190:(t,e)=>{e.removeSubsets=function(t){for(var e,r,i,n=t.length;--n>-1;){for(e=r=t[n],t[n]=null,i=!0;r;){if(t.indexOf(r)>-1){i=!1,t.splice(n,1);break}r=r.parent}i&&(t[n]=e)}return t};var r=e.compareDocumentPosition=function(t,e){var r,i,n,s,o,a,c=[],u=[];if(t===e)return 0;for(r=t;r;)c.unshift(r),r=r.parent;for(r=e;r;)u.unshift(r),r=r.parent;for(a=0;c[a]===u[a];)a++;return 0===a?1:(n=(i=c[a-1]).children,s=c[a],o=u[a],n.indexOf(s)>n.indexOf(o)?i===e?20:4:i===t?10:2)};e.uniqueSort=function(t){var e,i,n=t.length;for(t=t.slice();--n>-1;)e=t[n],(i=t.indexOf(e))>-1&&i<n&&t.splice(n,1);return t.sort((function(t,e){var i=r(t,e);return 2&i?-1:4&i?1:0})),t}},1221:(t,e,r)=>{"use strict";var i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=u;var n=r(4715),s=r(7023);r(728)(u,n);for(var o=i(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);n.call(this,t),s.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},1222:(t,e,r)=>{const i=r(4223),n=r(6013),{SamLabsBLE:s,DeviceTypes:o,BabyBotIndex:a,SAMDevice:c}=r(1604);t.exports=class{constructor(t){this.runtime=t,this.deviceMap=new Map,this.numberOfConnectedDevices=0,this.extensionId="sambot",this._stopAll=this.stopAll.bind(this),this.runtime.on("PROJECT_STOP_ALL",this._stopAll),this.runtime.on("PROJECT_RUN_STOP",this._stopAll),this.deviceMenu=[],this.blocks=[{opcode:"connectToDevice",blockType:i.COMMAND,text:"Connect a device"},{opcode:"getBattery",blockType:i.REPORTER,text:"Battery percentage, Block [num]",terminal:!1,arguments:{num:{menu:"deviceMenu",type:n.NUMBER}}},{opcode:"BabyBotExecCommand",blockType:i.COMMAND,text:"[num] [command]",terminal:!1,arguments:{num:{menu:"deviceMenu",type:n.NUMBER},command:{menu:"babyBotCommand",type:n.STRING}}},{opcode:"BabyBotPushCommand",blockType:i.COMMAND,text:"[num] push [command] to itiner",terminal:!1,arguments:{num:{menu:"deviceMenu",type:n.NUMBER},command:{menu:"babyBotCommand",type:n.STRING}}},{opcode:"BabyBotStart",blockType:i.COMMAND,text:"[num] Start",terminal:!1,arguments:{num:{menu:"deviceMenu",type:n.NUMBER}}},{opcode:"BabyBotStop",blockType:i.COMMAND,text:"[num] Stop",terminal:!1,arguments:{num:{menu:"deviceMenu",type:n.NUMBER}}},{opcode:"BabyBotClear",blockType:i.COMMAND,text:"[num] Clear itiner",terminal:!1,arguments:{num:{menu:"deviceMenu",type:n.NUMBER}}},{opcode:"BabyBotWrite",blockType:i.COMMAND,text:"[num] set motor speed right [r], left [l]",terminal:!1,arguments:{num:{menu:"deviceMenu",type:n.NUMBER},r:{defaultValue:0,type:n.NUMBER},l:{defaultValue:0,type:n.NUMBER}}}],this.DeviceMapping=new Map}getInfo(){return{id:this.extensionId,name:"Baby SAM Bot",showStatusButton:!1,color1:"#0FBD8C",color2:"#0DA57A",blocks:this.blocks,menus:{deviceMenu:"getDeviceMenu",babyBotCommand:"getBabyBotCommandMenu"}}}updateDeviceMenu(){this.deviceMenu=[],this.deviceMap.forEach((t=>{this.deviceMenu.push({text:t.displayName,value:t.id})}))}getDeviceMenu(){return this.deviceMenu.length?this.deviceMenu:[{text:"-",value:"-"}]}getBabyBotCommandMenu(){return[{text:"move Forward",value:"F"},{text:"move Backward",value:"B"},{text:"turn Right",value:"R"},{text:"turn Left",value:"L"}]}getDeviceFromId(t){return this.DeviceMapping.get(t)?this.deviceMap.get(this.DeviceMapping.get(t)):this.deviceMap.get(t)}stopAll(){this.deviceMap.forEach(this.stopDevice.bind(this))}stopDevice(t){t.writeActor(new Uint8Array([0,0,0]),!1)}async connectToDevice(){const t=new c(this.runtime,this.extensionId);if(await t.connectToDevice(this.deviceMap,{filters:[{namePrefix:o[a].advName}],optionalServices:[s.battServ,s.SAMServ]})){if(t.device.name!==o[a].advName)return void t._ble.disconnect();this.deviceMap.set(t.id,t),this.updateDeviceMenu()}}getBattery(t){const e=this.getDeviceFromId(t.num);return e?e.battery:0}async BabyBotCommand(t,e){t.SAMBotAvailable&&await t.writeBot(e)}async BabyBotExecCommand(t){const e=this.getDeviceFromId(t.num);e&&await this.BabyBotCommand(e,new Uint8Array([t.command.charCodeAt(0),"e".charCodeAt(0),0]))}async BabyBotPushCommand(t){const e=this.getDeviceFromId(t.num);e&&await this.BabyBotCommand(e,new Uint8Array([t.command.charCodeAt(0),"s".charCodeAt(0),0]))}async BabyBotStart(t){const e=this.getDeviceFromId(t.num);e&&await this.BabyBotCommand(e,new Uint8Array(["X".charCodeAt(0),"e".charCodeAt(0),0]))}async BabyBotStop(t){const e=this.getDeviceFromId(t.num);e&&await this.BabyBotCommand(e,new Uint8Array(["S".charCodeAt(0),"e".charCodeAt(0),0]))}async BabyBotClear(t){const e=this.getDeviceFromId(t.num);e&&await this.BabyBotCommand(e,new Uint8Array(["C".charCodeAt(0),"e".charCodeAt(0),0]))}async BabyBotWrite(t){const e=this.getDeviceFromId(t.num);if(!e||!e.SAMBotAvailable)return;let r=Number(t.l);r<0?(r<-100&&(r=-100),r=1.28*(100-Math.abs(r))+128):(r>100&&(r=100),r*=1.27);let i=Number(t.r);i<0?(i<-100&&(i=-100),i=1.28*(100-Math.abs(i))+128):(i>100&&(i=100),i*=1.27),await e.writeActor(new Uint8Array([i,r,0]))}}},1226:(t,e,r)=>{t.exports=r(9023).deprecate},1330:t=>{"use strict";t.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},1334:(t,e,r)=>{"use strict";function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function a(t){var e=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}var c=r(181).Buffer,u=r(9023).inspect,l=u&&u.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return c.alloc(0);for(var e,r,i,n=c.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,r=n,i=o,c.prototype.copy.call(e,r,i),o+=s.data.length,s=s.next;return n}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,i=e.data;for(t-=i.length;e=e.next;){var n=e.data,s=t>n.length?n.length:t;if(s===n.length?i+=n:i+=n.slice(0,t),0==(t-=s)){s===n.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(s));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(t){var e=c.allocUnsafe(t),r=this.head,i=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var n=r.data,s=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,s),0==(t-=s)){s===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(s));break}++i}return this.length-=i,e}},{key:l,value:function(t,e){return u(this,n(n({},e),{},{depth:0,customInspect:!1}))}}])&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},1398:t=>{const e="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.exports=function(){const t=[];for(let r=0;r<20;r++)t[r]=e.charAt(87*Math.random());return t.join("")}},1474:(t,e,r)=>{const i=r(7905),n=r(9552);t.exports=class{static base64ToUint8Array(t){const e=i(t),r=e.length,n=new Uint8Array(r);for(let t=0;t<r;t++)n[t]=e.charCodeAt(t);return n}static uint8ArrayToBase64(t){return n(String.fromCharCode.apply(null,t))}static arrayBufferToBase64(t){let e="";const r=new Uint8Array(t),i=r.byteLength;for(let t=0;t<i;t++)e+=String.fromCharCode(r[t]);return n(e)}}},1604:(t,e,r)=>{const i=r(7221),n=(r(6374),r(1474)),s=r(5758),o={battServ:"0000180f-0000-1000-8000-00805f9b34fb",batteryLevelCharacteristic:"00002a19-0000-1000-8000-00805f9b34fb",SAMServ:"3b989460-975f-11e4-a9fb-0002a5d5c51b",SensorCharacteristic:"4c592e60-980c-11e4-959a-0002a5d5c51b",ActorCharacteristic:"84fc1520-980c-11e4-8bed-0002a5d5c51b",StatusLedCharacteristic:"5baab0a0-980c-11e4-b5e9-0002a5d5c51b",SAMBotCommandCharacteristic:"abcd1234-1234-1234-1234-0002a5d5c51b",sendInterval:50,sendRateMax:20},a=[{name:"undefined",advName:""},{name:"Baby SAM Bot",advName:"SAM BabyBot"},{name:"slider",advName:"SAM Potentiometer"},{name:"light sensor",advName:"SAM LDR"},{name:"button",advName:"SAM Button"},{name:"proximity",advName:"SAM IR Sensor"},{name:"heat",advName:"SAM Temperature"},{name:"tilt",advName:"SAM Tilt"},{name:"pressure",advName:"SAM Pressure"},{name:"RGB led",advName:"SAM RGB LED"},{name:"DC motor",advName:"SAM DC Motor"},{name:"servo",advName:"SAM Servo Motor"}];t.exports={SamLabsBLE:o,DeviceTypes:a,BabyBotIndex:1,SAMDevice:class{id="";device;typeId=0;deviceType=a[0];displayName=`${a[0].name} 1`;sameDevices=1;SensorAvailable=!1;ActorAvailable=!1;SAMBotAvailable=!1;batteryLevelCharacteristic;SAMSensorCharacteristic;SAMActorCharacteristic;SAMBotCharacteristic;SAMStatusLEDCharacteristic;value=0;battery=0;_ble=null;_runtime=null;constructor(t,e){this._rateLimiter=new s(o.sendRateMax),this._runtime=t,this.extID=e,navigator.bluetooth&&(this.webBLE=!0),this._runtime.on(this._runtime.constructor.PERIPHERAL_SCAN_TIMEOUT,this.discoverTimeout.bind(this))}async connectToDevice(t,e){this.deviceMap=t;try{if(this.webBLE){if(!await this.connectWebBLE(e))return!1}else if(!await this.connectScratchLink(e))return!1;return this.writeStatusLed(new Uint8Array([255,255,255])),!0}catch(t){return console.log(t),!1}}async connectWebBLE(t){const e=await navigator.bluetooth.requestDevice(t);this.device=e,console.log("Device found:",this.device),this.device.addEventListener("gattserverdisconnected",(()=>this.onDisconnected()));const r=await this.device.gatt.connect();console.log("Connected to GATT Server:",r);const i=await r.getPrimaryService(o.battServ);this.batteryLevelCharacteristic=await i.getCharacteristic(o.batteryLevelCharacteristic),console.log("Found battery characteristic");const n=await r.getPrimaryService(o.SAMServ);this.SAMSensorCharacteristic=null,this.SensorAvailable=!0;try{this.SAMSensorCharacteristic=await n.getCharacteristic(o.SensorCharacteristic),console.log("Found sensor characteristic")}catch(t){console.log("Sensor characteristic not found"),this.SensorAvailable=!1}this.SAMActorCharacteristic=null,this.ActorAvailable=!0;try{this.SAMActorCharacteristic=await n.getCharacteristic(o.ActorCharacteristic),console.log("Found actor characteristic")}catch(t){console.log("Actor characteristic not found"),this.ActorAvailable=!1}if(this.SAMBotCharacteristic=null,this.SAMBotAvailable="SAM BabyBot"===e.name,this.SAMBotAvailable)try{this.SAMBotCharacteristic=await n.getCharacteristic(o.SAMBotCommandCharacteristic),console.log("Found samBot characteristic")}catch(t){console.log("samBot characteristic not found")}this.SAMStatusLEDCharacteristic=await n.getCharacteristic(o.StatusLedCharacteristic),console.log("Found statusled characteristic");let s=1;for(this.deviceMap.forEach((t=>{t.device.name===e.name&&s++})),this.typeId=0,this.typeId=0;this.typeId<a.length&&a[this.typeId].advName!==e.name;this.typeId++);if(this.typeId===a.length&&(this.typeId=0),this.displayName=`${a[this.typeId].name} ${s}`,this.id=e.id,this.deviceType=a[this.typeId],this.sameDevices=s,this.device=e,this.SensorAvailable&&!this.SAMBotAvailable)try{await this.SAMSensorCharacteristic.startNotifications(),this.SAMSensorCharacteristic.addEventListener("characteristicvaluechanged",this.handleSensorNotifications.bind(this)),console.log("subscribed to sensor events")}catch(t){console.log("Failed to subscribe to sensor events:",t)}try{await this.batteryLevelCharacteristic.startNotifications(),this.batteryLevelCharacteristic.addEventListener("characteristicvaluechanged",this.handleBattChange.bind(this)),console.log("subscribed to battery events")}catch(t){console.log("Failed to subscribe to battery events:",t)}return console.log(`Connected to ${e.name||"Unknown Device"}, id ${e.id}, sambot ${this.SAMBotAvailable}`),!0}addStyles(){const t=document.createElement("style");t.innerHTML="\n            #device-list-container {\n                position: fixed;\n                top: 20%;\n                left: 50%;\n                transform: translate(-50%, -20%);\n                background: white;\n                padding: 15px;\n                border-radius: 10px;\n                box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);\n                width: 300px;\n                max-height: 400px;\n                overflow-y: auto;\n                z-index: 9999; /* Ensure it appears above Scratch */\n                font-family: Arial, sans-serif;\n            }\n    \n            #device-list-container h3 {\n                margin: 0;\n                padding-bottom: 10px;\n                text-align: center;\n                border-bottom: 1px solid #ccc;\n            }\n    \n            #device-list {\n                list-style: none;\n                padding: 0;\n                margin: 10px 0;\n            }\n    \n            #device-list li {\n                padding: 10px;\n                cursor: pointer;\n                background: #f9f9f9;\n                margin-bottom: 5px;\n                border-radius: 5px;\n                text-align: center;\n                transition: background 0.2s;\n            }\n    \n            #device-list li:hover {\n                background: #ddd;\n            }\n    \n            #close-device-list {\n                display: block;\n                width: 100%;\n                padding: 8px;\n                margin-top: 10px;\n                background: #ff4d4d;\n                color: white;\n                border: none;\n                border-radius: 5px;\n                cursor: pointer;\n                text-align: center;\n            }\n    \n            #close-device-list:hover {\n                background: #cc0000;\n            }\n        ",document.head.appendChild(t)}async connectScratchLink(t){try{this._ble&&this._ble.disconnect(),this.discoverCancelled=!1,this._ble=new i(this._runtime,this.extID,t,this._onConnect.bind(this),this.reset),this.discovering=!0,this.addStyles();let e=document.getElementById("device-list-container");if(e||(e=document.createElement("div"),e.id="device-list-container",e.innerHTML='\n                    <h3>Select a Device</h3>\n                    <ul id="device-list"></ul>\n                    <button id="close-device-list">Close</button>\n                ',document.body.appendChild(e),document.getElementById("close-device-list").onclick=()=>{document.body.removeChild(e),this.discovering=!1,this.discoverCancelled=!0}),await this.scanForDevices(),this.discoverCancelled)return this._ble.disconnect(),!1;const r=this.device;console.log(r);let n=1;for(this.deviceMap.forEach((t=>{t.device.name===r.name&&n++})),this.typeId=0,this.typeId=0;this.typeId<a.length&&a[this.typeId].advName!==r.name;this.typeId++);for(this.typeId===a.length&&(this.typeId=0),this.displayName=`${a[this.typeId].name} ${n}`,this.id=String(r.peripheralId),this.deviceType=a[this.typeId],this.sameDevices=n,this.device=r,this.SAMBotAvailable="SAM BabyBot"===this.device.name,this.ActorAvailable=!0,this.SensorAvailable=!0;!this._ble.isConnected();)await new Promise((t=>setTimeout(t,500)))}catch(t){console.log(t)}return!0}_onConnect(){console.log("connected to device"),this._ble.startNotifications(o.battServ,o.batteryLevelCharacteristic,this.handleBattChange.bind(this)),this._ble.startNotifications(o.SAMServ,o.SensorCharacteristic,this.handleSensorNotifications.bind(this))}async scanForDevices(){for(this._runtime.on(this._runtime.constructor.PERIPHERAL_LIST_UPDATE,this.updateDeviceList.bind(this));this.discovering&&!this._ble.isConnected();)await new Promise((t=>setTimeout(t,100)))}updateDeviceList(){const t=document.getElementById("device-list");if(t){t.innerHTML="";for(const[e,r]of Object.entries(this._ble._availablePeripherals)){const i=document.createElement("li");i.textContent=r.name||`Unknown Device (${e})`,i.dataset.deviceId=e,i.onclick=()=>this.handleDeviceSelection(e),t.appendChild(i)}}}handleDeviceSelection(t){console.log(`Selected device: ${t}`),this.deviceId=t,this.device=this._ble._availablePeripherals[t],console.log("connecting"),this._ble.connectPeripheral(t),this.discovering=!1;const e=document.getElementById("device-list-container");e&&document.body.removeChild(e),console.log(this._ble.isConnected())}discoverTimeout(){this.discovering=!1,this.discoverCancelled=!0;const t=document.getElementById("device-list-container");t&&document.body.removeChild(t)}async sendScratchLink(t,e){this._ble.isConnected()&&await this._ble.write(o.SAMServ,t,n.uint8ArrayToBase64(e),"base64")}handleSensorNotifications(t){let e;e=this.webBLE?t.target.value.getUint8(0):n.base64ToUint8Array(t)[0],a[this.typeId].invertValues?this.value=100-e/2.55:this.value=e/2.55}handleBattChange(t){let e;e=this.webBLE?t.target.value.getUint8(0):n.base64ToUint8Array(t)[0],this.battery=e}onDisconnected(){}async writeStatusLed(t,e=!0){return e&&!this._rateLimiter.okayToSend()?Promise.resolve():(this.webBLE?await this.SAMStatusLEDCharacteristic.writeValue(t):await this.sendScratchLink(o.StatusLedCharacteristic,t),new Promise((t=>{window.setTimeout((()=>{t()}),o.sendInterval)})))}async writeActor(t,e=!0){return e&&!this._rateLimiter.okayToSend()?Promise.resolve():(this.webBLE?await this.SAMActorCharacteristic.writeValue(t):await this.sendScratchLink(o.ActorCharacteristic,t),new Promise((t=>{window.setTimeout((()=>{t()}),o.sendInterval)})))}async writeBot(t,e=!0){return e&&!this._rateLimiter.okayToSend()?Promise.resolve():(this.webBLE?await this.SAMBotCharacteristic.writeValue(t):await this.sendScratchLink(o.SAMBotCommandCharacteristic,t),new Promise((t=>{window.setTimeout((()=>{t()}),o.sendInterval)})))}}}},1628:(t,e,r)=>{const i=r(8833);t.exports=class{constructor(t){this.runtime=t,this.runtime.on("KEY_PRESSED",(t=>{this.runtime.startHats("event_whenkeypressed",{KEY_OPTION:t}),this.runtime.startHats("event_whenkeypressed",{KEY_OPTION:"any"})}))}getPrimitives(){return{event_whentouchingobject:this.touchingObject,event_broadcast:this.broadcast,event_broadcastandwait:this.broadcastAndWait,event_whengreaterthan:this.hatGreaterThanPredicate}}getHats(){return{event_whenflagclicked:{restartExistingThreads:!0},event_whenkeypressed:{restartExistingThreads:!1},event_whenthisspriteclicked:{restartExistingThreads:!0},event_whentouchingobject:{restartExistingThreads:!1,edgeActivated:!0},event_whenstageclicked:{restartExistingThreads:!0},event_whenbackdropswitchesto:{restartExistingThreads:!0},event_whengreaterthan:{restartExistingThreads:!1,edgeActivated:!0},event_whenbroadcastreceived:{restartExistingThreads:!0}}}touchingObject(t,e){return e.target.isTouchingObject(t.TOUCHINGOBJECTMENU)}hatGreaterThanPredicate(t,e){const r=i.toString(t.WHENGREATERTHANMENU).toLowerCase(),n=i.toNumber(t.VALUE);switch(r){case"timer":return e.ioQuery("clock","projectTimer")>n;case"loudness":return this.runtime.audioEngine&&this.runtime.audioEngine.getLoudness()>n}return!1}broadcast(t,e){const r=e.runtime.getTargetForStage().lookupBroadcastMsg(t.BROADCAST_OPTION.id,t.BROADCAST_OPTION.name);if(r){const t=r.name;e.startHats("event_whenbroadcastreceived",{BROADCAST_OPTION:t})}}broadcastAndWait(t,e){if(e.stackFrame.broadcastVar||(e.stackFrame.broadcastVar=e.runtime.getTargetForStage().lookupBroadcastMsg(t.BROADCAST_OPTION.id,t.BROADCAST_OPTION.name)),e.stackFrame.broadcastVar){const t=e.stackFrame.broadcastVar.name;if(!e.stackFrame.startedThreads&&(e.stackFrame.startedThreads=e.startHats("event_whenbroadcastreceived",{BROADCAST_OPTION:t}),0===e.stackFrame.startedThreads.length))return;const r=this;e.stackFrame.startedThreads.some((t=>-1!==r.runtime.threads.indexOf(t)))&&(e.stackFrame.startedThreads.every((t=>r.runtime.isWaitingThread(t)))?e.yieldTick():e.yield())}}}},1740:t=>{t.exports=class{constructor(t){this.runtime=t}getPrimitives(){return{procedures_definition:this.definition,procedures_call:this.call,argument_reporter_string_number:this.argumentReporterStringNumber,argument_reporter_boolean:this.argumentReporterBoolean}}definition(){}call(t,e){if(!e.stackFrame.executed){const r=t.mutation.proccode,i=e.getProcedureParamNamesIdsAndDefaults(r);if(null===i)return;const[n,s,o]=i;e.initParams();for(let r=0;r<s.length;r++)Object.prototype.hasOwnProperty.call(t,s[r])?e.pushParam(n[r],t[s[r]]):e.pushParam(n[r],o[r]);e.stackFrame.executed=!0,e.startProcedure(r)}}argumentReporterStringNumber(t,e){const r=e.getParam(t.VALUE);return null===r?0:r}argumentReporterBoolean(t,e){const r=e.getParam(t.VALUE);return null===r?0:r}}},1761:(t,e,r)=>{const i=r(4196),n=r(4586);t.exports=class{constructor(t){this.provider=null,this.runtime=t,this.stage=null}setProvider(t){this.provider=t}setStage(t){this.stage=t}postData(t){t.varUpdate&&this.updateCloudVariable(t.varUpdate)}requestCreateVariable(t){this.runtime.canAddCloudVariable()&&this.provider&&this.provider.createVariable(t.name,t.value)}requestUpdateVariable(t,e){this.provider&&this.provider.updateVariable(t,e)}requestRenameVariable(t,e){this.provider&&this.provider.renameVariable(t,e)}requestDeleteVariable(t){this.provider&&this.provider.deleteVariable(t)}updateCloudVariable(t){const e=t.name,r=this.stage.lookupVariableByNameAndType(e,i.SCALAR_TYPE);r&&r.isCloud?r.value=t.value:n.warn(`Received an update for a cloud variable that does not exist: ${e}`)}clear(){this.provider&&(this.provider.requestCloseConnection(),this.provider=null,this.stage=null)}}},1771:(t,e,r)=>{"use strict";t.exports=l;var i=r(2758).F,n=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,c=r(1221);function u(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);c.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(e,r){d(t,e,r)}))}function d(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}r(728)(l,c),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,c.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new n("_transform()"))},l.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){c.prototype._destroy.call(this,t,(function(t){e(t)}))}},1863:t=>{"use strict";t.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},2044:(t,e,r)=>{const i=r(8833),n=r(4813),s=r(2181);t.exports=class{constructor(t){this.runtime=t}getPrimitives(){return{motion_movesteps:this.moveSteps,motion_gotoxy:this.goToXY,motion_goto:this.goTo,motion_turnright:this.turnRight,motion_turnleft:this.turnLeft,motion_pointindirection:this.pointInDirection,motion_pointtowards:this.pointTowards,motion_glidesecstoxy:this.glide,motion_glideto:this.glideTo,motion_ifonedgebounce:this.ifOnEdgeBounce,motion_setrotationstyle:this.setRotationStyle,motion_changexby:this.changeX,motion_setx:this.setX,motion_changeyby:this.changeY,motion_sety:this.setY,motion_xposition:this.getX,motion_yposition:this.getY,motion_direction:this.getDirection,motion_scroll_right:()=>{},motion_scroll_up:()=>{},motion_align_scene:()=>{},motion_xscroll:()=>{},motion_yscroll:()=>{}}}getMonitored(){return{motion_xposition:{isSpriteSpecific:!0,getId:t=>`${t}_xposition`},motion_yposition:{isSpriteSpecific:!0,getId:t=>`${t}_yposition`},motion_direction:{isSpriteSpecific:!0,getId:t=>`${t}_direction`}}}moveSteps(t,e){const r=i.toNumber(t.STEPS),s=n.degToRad(90-e.target.direction),o=r*Math.cos(s),a=r*Math.sin(s);e.target.setXY(e.target.x+o,e.target.y+a)}goToXY(t,e){const r=i.toNumber(t.X),n=i.toNumber(t.Y);e.target.setXY(r,n)}getTargetXY(t,e){let r=0,n=0;if("_mouse_"===t)r=e.ioQuery("mouse","getScratchX"),n=e.ioQuery("mouse","getScratchY");else if("_random_"===t){const t=this.runtime.constructor.STAGE_WIDTH,e=this.runtime.constructor.STAGE_HEIGHT;r=Math.round(t*(Math.random()-.5)),n=Math.round(e*(Math.random()-.5))}else{t=i.toString(t);const e=this.runtime.getSpriteTargetByName(t);if(!e)return;r=e.x,n=e.y}return[r,n]}goTo(t,e){const r=this.getTargetXY(t.TO,e);r&&e.target.setXY(r[0],r[1])}turnRight(t,e){const r=i.toNumber(t.DEGREES);e.target.setDirection(e.target.direction+r)}turnLeft(t,e){const r=i.toNumber(t.DEGREES);e.target.setDirection(e.target.direction-r)}pointInDirection(t,e){const r=i.toNumber(t.DIRECTION);e.target.setDirection(r)}pointTowards(t,e){let r=0,s=0;if("_mouse_"===t.TOWARDS)r=e.ioQuery("mouse","getScratchX"),s=e.ioQuery("mouse","getScratchY");else{if("_random_"===t.TOWARDS)return void e.target.setDirection(Math.round(360*Math.random())-180);{t.TOWARDS=i.toString(t.TOWARDS);const e=this.runtime.getSpriteTargetByName(t.TOWARDS);if(!e)return;r=e.x,s=e.y}}const o=r-e.target.x,a=s-e.target.y,c=90-n.radToDeg(Math.atan2(a,o));e.target.setDirection(c)}glide(t,e){if(e.stackFrame.timer){const t=e.stackFrame.timer.timeElapsed();if(t<1e3*e.stackFrame.duration){const r=t/(1e3*e.stackFrame.duration),i=r*(e.stackFrame.endX-e.stackFrame.startX),n=r*(e.stackFrame.endY-e.stackFrame.startY);e.target.setXY(e.stackFrame.startX+i,e.stackFrame.startY+n),e.yield()}else e.target.setXY(e.stackFrame.endX,e.stackFrame.endY)}else{if(e.stackFrame.timer=new s,e.stackFrame.timer.start(),e.stackFrame.duration=i.toNumber(t.SECS),e.stackFrame.startX=e.target.x,e.stackFrame.startY=e.target.y,e.stackFrame.endX=i.toNumber(t.X),e.stackFrame.endY=i.toNumber(t.Y),e.stackFrame.duration<=0)return void e.target.setXY(e.stackFrame.endX,e.stackFrame.endY);e.yield()}}glideTo(t,e){const r=this.getTargetXY(t.TO,e);r&&this.glide({SECS:t.SECS,X:r[0],Y:r[1]},e)}ifOnEdgeBounce(t,e){const r=e.target.getBounds();if(!r)return;const i=this.runtime.constructor.STAGE_WIDTH,s=this.runtime.constructor.STAGE_HEIGHT,o=Math.max(0,i/2+r.left),a=Math.max(0,s/2-r.top),c=Math.max(0,i/2-r.right),u=Math.max(0,s/2+r.bottom);let l="",h=1/0;if(o<h&&(h=o,l="left"),a<h&&(h=a,l="top"),c<h&&(h=c,l="right"),u<h&&(h=u,l="bottom"),h>0)return;const d=n.degToRad(90-e.target.direction);let p=Math.cos(d),f=-Math.sin(d);"left"===l?p=Math.max(.2,Math.abs(p)):"top"===l?f=Math.max(.2,Math.abs(f)):"right"===l?p=0-Math.max(.2,Math.abs(p)):"bottom"===l&&(f=0-Math.max(.2,Math.abs(f)));const m=n.radToDeg(Math.atan2(f,p))+90;e.target.setDirection(m);const g=e.target.keepInFence(e.target.x,e.target.y);e.target.setXY(g[0],g[1])}setRotationStyle(t,e){e.target.setRotationStyle(t.STYLE)}changeX(t,e){const r=i.toNumber(t.DX);e.target.setXY(e.target.x+r,e.target.y)}setX(t,e){const r=i.toNumber(t.X);e.target.setXY(r,e.target.y)}changeY(t,e){const r=i.toNumber(t.DY);e.target.setXY(e.target.x,e.target.y+r)}setY(t,e){const r=i.toNumber(t.Y);e.target.setXY(e.target.x,r)}getX(t,e){return this.limitPrecision(e.target.x)}getY(t,e){return this.limitPrecision(e.target.y)}getDirection(t,e){return e.target.direction}limitPrecision(t){const e=Math.round(t),r=t-e;return Math.abs(r)<1e-9?e:t}}},2071:t=>{"use strict";t.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},2121:(t,e,r)=>{function i(){}r(887).mixin(i),i.prototype.write=function(t,e,r){var i={debug:"[34;40mdebug[39m ",info:"[32minfo[39m  ",warn:"[30;41mWARN[0m  ",error:"[31;40mERR![0m  "};this.emit("item",(t?"[37;40m"+t+"[0m ":"")+(e&&i[e]?i[e]:"")+r.join(" "))},t.exports=i},2142:function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeHTML=e.decodeHTMLStrict=e.decodeXML=void 0;var n=i(r(5774)),s=i(r(8298)),o=i(r(1330)),a=i(r(432)),c=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function u(t){var e=h(t);return function(t){return String(t).replace(c,e)}}e.decodeXML=u(o.default),e.decodeHTMLStrict=u(n.default);var l=function(t,e){return t<e?1:-1};function h(t){return function(e){if("#"===e.charAt(1)){var r=e.charAt(2);return"X"===r||"x"===r?a.default(parseInt(e.substr(3),16)):a.default(parseInt(e.substr(2),10))}return t[e.slice(1,-1)]||e}}e.decodeHTML=function(){for(var t=Object.keys(s.default).sort(l),e=Object.keys(n.default).sort(l),r=0,i=0;r<e.length;r++)t[i]===e[r]?(e[r]+=";?",i++):e[r]+=";";var o=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),a=h(n.default);function c(t){return";"!==t.substr(-1)&&(t+=";"),a(t)}return function(t){return String(t).replace(o,c)}}()},2181:t=>{class e{constructor(t=e.nowObj){this.startTime=0,this.nowObj=t}static get USE_PERFORMANCE(){return!1}static get legacyDateCode(){return{now:function(){return(new Date).getTime()}}}static get nowObj(){return e.USE_PERFORMANCE&&"undefined"!=typeof self&&self.performance&&"now"in self.performance?self.performance:Date.now?Date:e.legacyDateCode}time(){return this.nowObj.now()}start(){this.startTime=this.nowObj.now()}timeElapsed(){return this.nowObj.now()-this.startTime}setTimeout(t,e){return global.setTimeout(t,e)}clearTimeout(t){global.clearTimeout(t)}}t.exports=e},2203:t=>{"use strict";t.exports=require("stream")},2261:(t,e,r)=>{const i=r(8833),n=r(2181),s=r(661);t.exports=class{constructor(t){this.runtime=t,this._answer="",this._timer=new n,this._cachedLoudness=-1,this._cachedLoudnessTimestamp=0,this._questionList=[],this.runtime.on("ANSWER",this._onAnswer.bind(this)),this.runtime.on("PROJECT_START",this._resetAnswer.bind(this)),this.runtime.on("PROJECT_STOP_ALL",this._clearAllQuestions.bind(this)),this.runtime.on("STOP_FOR_TARGET",this._clearTargetQuestions.bind(this)),this.runtime.on("RUNTIME_DISPOSED",this._resetAnswer.bind(this))}getPrimitives(){return{sensing_touchingobject:this.touchingObject,sensing_touchingcolor:this.touchingColor,sensing_coloristouchingcolor:this.colorTouchingColor,sensing_distanceto:this.distanceTo,sensing_timer:this.getTimer,sensing_resettimer:this.resetTimer,sensing_of:this.getAttributeOf,sensing_mousex:this.getMouseX,sensing_mousey:this.getMouseY,sensing_setdragmode:this.setDragMode,sensing_mousedown:this.getMouseDown,sensing_keypressed:this.getKeyPressed,sensing_current:this.current,sensing_dayssince2000:this.daysSince2000,sensing_loudness:this.getLoudness,sensing_loud:this.isLoud,sensing_askandwait:this.askAndWait,sensing_answer:this.getAnswer,sensing_username:this.getUsername,sensing_userid:()=>{}}}getMonitored(){return{sensing_answer:{getId:()=>"answer"},sensing_loudness:{getId:()=>"loudness"},sensing_timer:{getId:()=>"timer"},sensing_current:{getId:(t,e)=>s("current",e)}}}_onAnswer(t){this._answer=t;const e=this._questionList.shift();if(e){const[t,r,i,n,s]=e;n&&!s&&this.runtime.emit("SAY",i,"say",""),r(),this._askNextQuestion()}}_resetAnswer(){this._answer=""}_enqueueAsk(t,e,r,i,n){this._questionList.push([t,e,r,i,n])}_askNextQuestion(){if(this._questionList.length>0){const[t,e,r,i,n]=this._questionList[0];i&&!n?(this.runtime.emit("SAY",r,"say",t),this.runtime.emit("QUESTION","")):this.runtime.emit("QUESTION",t)}}_clearAllQuestions(){this._questionList=[],this.runtime.emit("QUESTION",null)}_clearTargetQuestions(t){const e=this._questionList.length>0&&this._questionList[0][2]===t;this._questionList=this._questionList.filter((e=>e[2]!==t)),e&&(this.runtime.emit("SAY",t,"say",""),this._questionList.length>0?this._askNextQuestion():this.runtime.emit("QUESTION",null))}askAndWait(t,e){const r=e.target;return new Promise((e=>{const i=this._questionList.length>0;this._enqueueAsk(String(t.QUESTION),e,r,r.visible,r.isStage),i||this._askNextQuestion()}))}getAnswer(){return this._answer}touchingObject(t,e){return e.target.isTouchingObject(t.TOUCHINGOBJECTMENU)}touchingColor(t,e){const r=i.toRgbColorList(t.COLOR);return e.target.isTouchingColor(r)}colorTouchingColor(t,e){const r=i.toRgbColorList(t.COLOR),n=i.toRgbColorList(t.COLOR2);return e.target.colorIsTouchingColor(n,r)}distanceTo(t,e){if(e.target.isStage)return 1e4;let r=0,n=0;if("_mouse_"===t.DISTANCETOMENU)r=e.ioQuery("mouse","getScratchX"),n=e.ioQuery("mouse","getScratchY");else{t.DISTANCETOMENU=i.toString(t.DISTANCETOMENU);const e=this.runtime.getSpriteTargetByName(t.DISTANCETOMENU);if(!e)return 1e4;r=e.x,n=e.y}const s=e.target.x-r,o=e.target.y-n;return Math.sqrt(s*s+o*o)}setDragMode(t,e){e.target.setDraggable("draggable"===t.DRAG_MODE)}getTimer(t,e){return e.ioQuery("clock","projectTimer")}resetTimer(t,e){e.ioQuery("clock","resetProjectTimer")}getMouseX(t,e){return e.ioQuery("mouse","getScratchX")}getMouseY(t,e){return e.ioQuery("mouse","getScratchY")}getMouseDown(t,e){return e.ioQuery("mouse","getIsDown")}current(t){const e=i.toString(t.CURRENTMENU).toLowerCase(),r=new Date;switch(e){case"year":return r.getFullYear();case"month":return r.getMonth()+1;case"date":return r.getDate();case"dayofweek":return r.getDay()+1;case"hour":return r.getHours();case"minute":return r.getMinutes();case"second":return r.getSeconds()}return 0}getKeyPressed(t,e){return e.ioQuery("keyboard","getKeyIsDown",[t.KEY_OPTION])}daysSince2000(){const t=new Date(2e3,0,1),e=new Date,r=e.getTimezoneOffset()-t.getTimezoneOffset();let i=e.valueOf()-t.valueOf();return i+=60*(e.getTimezoneOffset()-r)*1e3,i/864e5}getLoudness(){return void 0===this.runtime.audioEngine||null===this.runtime.currentStepTime?-1:(this._timer.time()-this._cachedLoudnessTimestamp<this.runtime.currentStepTime||(this._cachedLoudnessTimestamp=this._timer.time(),this._cachedLoudness=this.runtime.audioEngine.getLoudness()),this._cachedLoudness)}isLoud(){return this.getLoudness()>10}getAttributeOf(t){let e;if("_stage_"===t.OBJECT?e=this.runtime.getTargetForStage():(t.OBJECT=i.toString(t.OBJECT),e=this.runtime.getSpriteTargetByName(t.OBJECT)),!e)return 0;if(e.isStage)switch(t.PROPERTY){case"background #":case"backdrop #":return e.currentCostume+1;case"backdrop name":return e.getCostumes()[e.currentCostume].name;case"volume":return e.volume}else switch(t.PROPERTY){case"x position":return e.x;case"y position":return e.y;case"direction":return e.direction;case"costume #":return e.currentCostume+1;case"costume name":return e.getCostumes()[e.currentCostume].name;case"size":return e.size;case"volume":return e.volume}const r=t.PROPERTY,n=e.lookupVariableByNameAndType(r,"",!0);return n?n.value:0}getUsername(t,e){return e.ioQuery("userData","getUsername")}}},2301:(t,e,r)=>{const i=r(4586);t.exports=function(t){if("string"!=typeof t){if(!Array.isArray(t))return i.error("Unexpected input recieved in replaceUnsafeChars"),t;t=String(t)}return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}}))}},2385:t=>{t.exports=class{constructor(t){this._type=t,this._onOpen=null,this._onClose=null,this._onError=null,this._handleMessage=null,this._ws=null}open(){if(!(this._onOpen&&this._onClose&&this._onError&&this._handleMessage))throw new Error("Must set open, close, message and error handlers before calling open on the socket");let t;switch(this._type){case"BLE":t="scratch/ble";break;case"BT":t="scratch/bt";break;default:throw new Error(`Unknown ScratchLink socket Type: ${this._type}`)}const e=(t,e)=>{e.onopen=e.onerror=null,e.close(),this._ws=t,this._ws.onopen=this._onOpen,this._ws.onclose=this._onClose,this._ws.onerror=this._onError,this._ws.onmessage=this._onMessage.bind(this)},r=new WebSocket(`ws://127.0.0.1:20111/${t}`),i=new WebSocket(`wss://device-manager.scratch.mit.edu:20110/${t}`),n=setTimeout((()=>{e(r,i),this._ws.onerror(new Event("timeout"))}),15e3);let s,o;r.onopen=t=>{clearTimeout(n),e(r,i),this._ws.onopen(t)},i.onopen=t=>{clearTimeout(n),e(i,r),this._ws.onopen(t)};const a=()=>{s&&o&&(clearTimeout(n),e(r,i),this._ws.onerror(s))};r.onerror=t=>{s=t,a()},i.onerror=t=>{o=t,a()}}close(){this._ws.close(),this._ws=null}sendMessage(t){const e=JSON.stringify(t);this._ws.send(e)}setOnOpen(t){this._onOpen=t}setOnClose(t){this._onClose=t}setOnError(t){this._onError=t}setHandleMessage(t){this._handleMessage=t}isOpen(){return this._ws&&this._ws.readyState===this._ws.OPEN}_onMessage(t){const e=JSON.parse(t.data);this._handleMessage(e)}}},2397:t=>{let e=0;const r={},i="object"==typeof window&&window.performance;class n{constructor(t){this.id=-1,this.totalTime=0,this.selfTime=0,this.arg=null,this.depth=t,this.count=0}}class s{constructor(t=function(){}){this.records=[],this.increments=[],this.counters=[],this.nullFrame=new n(-1),this._stack=[new n(0)],this.onFrame=t,this.START=0,this.STOP=1}start(t,e){this.records.push(0,t,e,i.now())}stop(){this.records.push(1,i.now())}increment(t){this.increments[t]||(this.increments[t]=new n(-1),this.increments[t].id=t),this.increments[t].count+=1}frame(t,e){for(let r=0;r<this.counters.length;r++)if(this.counters[r].id===t&&this.counters[r].arg===e)return this.counters[r];const r=new n(-1);return r.id=t,r.arg=e,this.counters.push(r),r}reportFrames(){const t=this._stack;let e=1;for(let r=0;r<this.records.length;)if(0===this.records[r]){e>=t.length&&t.push(new n(e));const i=t[e++];i.id=this.records[r+1],i.arg=this.records[r+2],i.totalTime=this.records[r+3],i.selfTime=0,r+=4}else{if(1!==this.records[r])throw this.records.length=0,new Error("Unable to decode Profiler records.");{const i=this.records[r+1],n=t[--e];n.totalTime=i-n.totalTime,n.selfTime+=n.totalTime,t[e-1].selfTime-=n.totalTime,n.count=1,this.onFrame(n),r+=2}}for(let t=0;t<this.increments.length;t++)this.increments[t]&&this.increments[t].count>0&&(this.onFrame(this.increments[t]),this.increments[t].count=0);for(let t=0;t<this.counters.length;t++)this.counters[t].count>0&&(this.onFrame(this.counters[t]),this.counters[t].count=0);this.records.length=0}idByName(t){return s.idByName(t)}nameById(t){return s.nameById(t)}static idByName(t){return"number"!=typeof r[t]&&(r[t]=e++),r[t]}static nameById(t){for(const e in r)if(r[e]===t)return e;return null}static available(){return"object"==typeof window&&void 0!==window.performance}}s.START=0,s.STOP=1,t.exports=s},2441:t=>{"use strict";t.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},2490:(t,e,r)=>{var i=r(3562),n=/\s+/g,s=r(5076),o=r(8290);function a(t,e,r){"object"==typeof t?(r=e,e=t,t=null):"function"==typeof e&&(r=e,e=c),this._callback=t,this._options=e||c,this._elementCB=r,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var c={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1};a.prototype.onparserinit=function(t){this._parser=t},a.prototype.onreset=function(){a.call(this,this._callback,this._options,this._elementCB)},a.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},a.prototype._handleCallback=a.prototype.onerror=function(t){if("function"==typeof this._callback)this._callback(t,this.dom);else if(t)throw t},a.prototype.onclosetag=function(){var t=this._tagStack.pop();this._options.withEndIndices&&t&&(t.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(t)},a.prototype._createDomElement=function(t){if(!this._options.withDomLvl1)return t;var e;for(var r in e="tag"===t.type?Object.create(o):Object.create(s),t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},a.prototype._addDomElement=function(t){var e=this._tagStack[this._tagStack.length-1],r=e?e.children:this.dom,i=r[r.length-1];t.next=null,this._options.withStartIndices&&(t.startIndex=this._parser.startIndex),this._options.withEndIndices&&(t.endIndex=this._parser.endIndex),i?(t.prev=i,i.next=t):t.prev=null,r.push(t),t.parent=e||null},a.prototype.onopentag=function(t,e){var r={type:"script"===t?i.Script:"style"===t?i.Style:i.Tag,name:t,attribs:e,children:[]},n=this._createDomElement(r);this._addDomElement(n),this._tagStack.push(n)},a.prototype.ontext=function(t){var e,r=this._options.normalizeWhitespace||this._options.ignoreWhitespace;if(!this._tagStack.length&&this.dom.length&&(e=this.dom[this.dom.length-1]).type===i.Text)r?e.data=(e.data+t).replace(n," "):e.data+=t;else if(this._tagStack.length&&(e=this._tagStack[this._tagStack.length-1])&&(e=e.children[e.children.length-1])&&e.type===i.Text)r?e.data=(e.data+t).replace(n," "):e.data+=t;else{r&&(t=t.replace(n," "));var s=this._createDomElement({data:t,type:i.Text});this._addDomElement(s)}},a.prototype.oncomment=function(t){var e=this._tagStack[this._tagStack.length-1];if(e&&e.type===i.Comment)e.data+=t;else{var r={data:t,type:i.Comment},n=this._createDomElement(r);this._addDomElement(n),this._tagStack.push(n)}},a.prototype.oncdatastart=function(){var t={children:[{data:"",type:i.Text}],type:i.CDATA},e=this._createDomElement(t);this._addDomElement(e),this._tagStack.push(e)},a.prototype.oncommentend=a.prototype.oncdataend=function(){this._tagStack.pop()},a.prototype.onprocessinginstruction=function(t,e){var r=this._createDomElement({name:t,data:e,type:i.Directive});this._addDomElement(r)},t.exports=a},2531:(t,e,r)=>{const i=r(4813),n=r(8833),s=r(3581),o=!0;class a{constructor(t){this.runtime=t,this.waitingSounds={},this.stopAllSounds=this.stopAllSounds.bind(this),this._stopWaitingSoundsForTarget=this._stopWaitingSoundsForTarget.bind(this),this._clearEffectsForAllTargets=this._clearEffectsForAllTargets.bind(this),this.runtime&&(this.runtime.on("PROJECT_STOP_ALL",this.stopAllSounds),this.runtime.on("PROJECT_STOP_ALL",this._clearEffectsForAllTargets),this.runtime.on("STOP_FOR_TARGET",this._stopWaitingSoundsForTarget),this.runtime.on("PROJECT_START",this._clearEffectsForAllTargets)),this._onTargetCreated=this._onTargetCreated.bind(this),this.runtime&&t.on("targetWasCreated",this._onTargetCreated)}static get STATE_KEY(){return"Scratch.sound"}static get DEFAULT_SOUND_STATE(){return{effects:{pitch:0,pan:0}}}static get MIDI_NOTE_RANGE(){return{min:36,max:96}}static get BEAT_RANGE(){return{min:0,max:100}}static get TEMPO_RANGE(){return{min:20,max:500}}static get EFFECT_RANGE(){return{pitch:{min:-360,max:360},pan:{min:-100,max:100}}}_getSoundState(t){let e=t.getCustomState(a.STATE_KEY);return e||(e=s.simple(a.DEFAULT_SOUND_STATE),t.setCustomState(a.STATE_KEY,e),t.soundEffects=e.effects),e}_onTargetCreated(t,e){if(e){const r=e.getCustomState(a.STATE_KEY);r&&t&&(t.setCustomState(a.STATE_KEY,s.simple(r)),this._syncEffectsForTarget(t))}}getPrimitives(){return{sound_play:this.playSound,sound_playuntildone:this.playSoundAndWait,sound_stopallsounds:this.stopAllSounds,sound_seteffectto:this.setEffect,sound_changeeffectby:this.changeEffect,sound_cleareffects:this.clearEffects,sound_sounds_menu:this.soundsMenu,sound_beats_menu:this.beatsMenu,sound_effects_menu:this.effectsMenu,sound_setvolumeto:this.setVolume,sound_changevolumeby:this.changeVolume,sound_volume:this.getVolume}}getMonitored(){return{sound_volume:{isSpriteSpecific:!0,getId:t=>`${t}_volume`}}}playSound(t,e){this._playSound(t,e)}playSoundAndWait(t,e){return this._playSound(t,e,o)}_playSound(t,e,r){const i=this._getSoundIndex(t.SOUND_MENU,e);if(i>=0){const{target:t}=e,{sprite:n}=t,{soundId:s}=n.sounds[i];if(n.soundBank)return r===o?this._addWaitingSound(t.id,s):this._removeWaitingSound(t.id,s),n.soundBank.playSound(t,s)}}_addWaitingSound(t,e){this.waitingSounds[t]||(this.waitingSounds[t]=new Set),this.waitingSounds[t].add(e)}_removeWaitingSound(t,e){this.waitingSounds[t]&&this.waitingSounds[t].delete(e)}_getSoundIndex(t,e){const r=e.target.sprite.sounds.length;if(0===r)return-1;const n=this.getSoundIndexByName(t,e);if(-1!==n)return n;const s=parseInt(t,10);return isNaN(s)?-1:i.wrapClamp(s-1,0,r-1)}getSoundIndexByName(t,e){const r=e.target.sprite.sounds;for(let e=0;e<r.length;e++)if(r[e].name===t)return e;return-1}stopAllSounds(){if(null===this.runtime.targets)return;const t=this.runtime.targets;for(let e=0;e<t.length;e++)this._stopAllSoundsForTarget(t[e])}_stopAllSoundsForTarget(t){t.sprite.soundBank&&(t.sprite.soundBank.stopAllSounds(t),this.waitingSounds[t.id]&&this.waitingSounds[t.id].clear())}_stopWaitingSoundsForTarget(t){if(t.sprite.soundBank&&this.waitingSounds[t.id]){for(const e of this.waitingSounds[t.id].values())t.sprite.soundBank.stop(t,e);this.waitingSounds[t.id].clear()}}setEffect(t,e){return this._updateEffect(t,e,!1)}changeEffect(t,e){return this._updateEffect(t,e,!0)}_updateEffect(t,e,r){const s=n.toString(t.EFFECT).toLowerCase(),o=n.toNumber(t.VALUE),c=this._getSoundState(e.target);if(!Object.prototype.hasOwnProperty.call(c.effects,s))return;r?c.effects[s]+=o:c.effects[s]=o;const{min:u,max:l}=a.EFFECT_RANGE[s];return c.effects[s]=i.clamp(c.effects[s],u,l),this._syncEffectsForTarget(e.target),Promise.resolve()}_syncEffectsForTarget(t){t&&t.sprite.soundBank&&(t.soundEffects=this._getSoundState(t).effects,t.sprite.soundBank.setEffects(t))}clearEffects(t,e){this._clearEffectsForTarget(e.target)}_clearEffectsForTarget(t){const e=this._getSoundState(t);for(const t in e.effects)Object.prototype.hasOwnProperty.call(e.effects,t)&&(e.effects[t]=0);this._syncEffectsForTarget(t)}_clearEffectsForAllTargets(){if(null===this.runtime.targets)return;const t=this.runtime.targets;for(let e=0;e<t.length;e++)this._clearEffectsForTarget(t[e])}setVolume(t,e){const r=n.toNumber(t.VOLUME);return this._updateVolume(r,e)}changeVolume(t,e){const r=n.toNumber(t.VOLUME)+e.target.volume;return this._updateVolume(r,e)}_updateVolume(t,e){return t=i.clamp(t,0,100),e.target.volume=t,this._syncEffectsForTarget(e.target),Promise.resolve()}getVolume(t,e){return e.target.volume}soundsMenu(t){return t.SOUND_MENU}beatsMenu(t){return t.BEATS}effectsMenu(t){return t.EFFECT}}t.exports=a},2615:t=>{t.exports={SPRITE:"sprite",STAGE:"stage"}},2758:t=>{"use strict";const e={};function r(t,r,i){i||(i=Error);class n extends i{constructor(t,e,i){super(function(t,e,i){return"string"==typeof r?r:r(t,e,i)}(t,e,i))}}n.prototype.name=i.name,n.prototype.code=t,e[t]=n}function i(t,e){if(Array.isArray(t)){const r=t.length;return t=t.map((t=>String(t))),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:2===r?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}return`of ${e} ${String(t)}`}r("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(t,e,r){let n;var s;let o;if("string"==typeof e&&(s="not ",e.substr(0,4)===s)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-9,r)===e}(t," argument"))o=`The ${t} ${n} ${i(e,"type")}`;else{o=`The "${t}" ${"number"!=typeof c&&(c=0),c+1>(a=t).length||-1===a.indexOf(".",c)?"argument":"property"} ${n} ${i(e,"type")}`}var a,c;return o+=". Received type "+typeof r,o}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.F=e},2787:(t,e,r)=>{const i=r(8833),n={SPACE:"space",LEFT:"left arrow",UP:"up arrow",RIGHT:"right arrow",DOWN:"down arrow",ENTER:"enter"},s=Object.keys(n).map((t=>n[t]));t.exports=class{constructor(t){this._keysPressed=[],this.runtime=t}_keyStringToScratchKey(t){switch(t=i.toString(t)){case" ":return n.SPACE;case"ArrowLeft":case"Left":return n.LEFT;case"ArrowUp":case"Up":return n.UP;case"Right":case"ArrowRight":return n.RIGHT;case"Down":case"ArrowDown":return n.DOWN;case"Enter":return n.ENTER}return t.length>1?"":t.toUpperCase()}_keyArgToScratchKey(t){if("number"==typeof t){if(t>=48&&t<=90)return String.fromCharCode(t);switch(t){case 32:return n.SPACE;case 37:return n.LEFT;case 38:return n.UP;case 39:return n.RIGHT;case 40:return n.DOWN}}return t=i.toString(t),s.includes(t)?t:(t.length>1&&(t=t[0])," "===t?n.SPACE:t.toUpperCase())}postData(t){if(!t.key)return;const e=this._keyStringToScratchKey(t.key);if(""===e)return;const r=this._keysPressed.indexOf(e);t.isDown?(this.runtime.emit("KEY_PRESSED",e),r<0&&this._keysPressed.push(e)):r>-1&&this._keysPressed.splice(r,1)}getKeyIsDown(t){if("any"===t)return this._keysPressed.length>0;const e=this._keyArgToScratchKey(t);return this._keysPressed.indexOf(e)>-1}}},2845:(t,e,r)=>{var i=r(3501),n=r(354),s=r(7822);s.elementNames.__proto__=null,s.attributeNames.__proto__=null;var o={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0},a={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},c=t.exports=function(t,e){Array.isArray(t)||t.cheerio||(t=[t]),e=e||{};for(var r="",n=0;n<t.length;n++){var s=t[n];"root"===s.type?r+=c(s.children,e):i.isTag(s)?r+=l(s,e):s.type===i.Directive?r+=h(s):s.type===i.Comment?r+=f(s):s.type===i.CDATA?r+=p(s):r+=d(s,e)}return r},u=["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"];function l(t,e){"foreign"===e.xmlMode&&(t.name=s.elementNames[t.name]||t.name,t.parent&&u.indexOf(t.parent.name)>=0&&(e=Object.assign({},e,{xmlMode:!1}))),!e.xmlMode&&["svg","math"].indexOf(t.name)>=0&&(e=Object.assign({},e,{xmlMode:"foreign"}));var r="<"+t.name,i=function(t,e){if(t){var r,i="";for(var o in t)r=t[o],i&&(i+=" "),"foreign"===e.xmlMode&&(o=s.attributeNames[o]||o),i+=o,(null!==r&&""!==r||e.xmlMode)&&(i+='="'+(e.decodeEntities?n.encodeXML(r):r.replace(/\"/g,"&quot;"))+'"');return i}}(t.attribs,e);return i&&(r+=" "+i),!e.xmlMode||t.children&&0!==t.children.length?(r+=">",t.children&&(r+=c(t.children,e)),a[t.name]&&!e.xmlMode||(r+="</"+t.name+">")):r+="/>",r}function h(t){return"<"+t.data+">"}function d(t,e){var r=t.data||"";return!e.decodeEntities||t.parent&&t.parent.name in o||(r=n.encodeXML(r)),r}function p(t){return"<![CDATA["+t.children[0].data+"]]>"}function f(t){return"\x3c!--"+t.data+"--\x3e"}},2847:(t,e,r)=>{var i=r(3562).isTag;function n(t,e,r,i){for(var s,o=[],a=0,c=e.length;a<c&&!(t(e[a])&&(o.push(e[a]),--i<=0))&&(s=e[a].children,!(r&&s&&s.length>0&&(s=n(t,s,r,i),o=o.concat(s),(i-=s.length)<=0)));a++);return o}t.exports={filter:function(t,e,r,i){return Array.isArray(e)||(e=[e]),"number"==typeof i&&isFinite(i)||(i=1/0),n(t,e,!1!==r,i)},find:n,findOneChild:function(t,e){for(var r=0,i=e.length;r<i;r++)if(t(e[r]))return e[r];return null},findOne:function t(e,r){for(var n=null,s=0,o=r.length;s<o&&!n;s++)i(r[s])&&(e(r[s])?n=r[s]:r[s].children.length>0&&(n=t(e,r[s].children)));return n},existsOne:function t(e,r){for(var n=0,s=r.length;n<s;n++)if(i(r[n])&&(e(r[n])||r[n].children.length>0&&t(e,r[n].children)))return!0;return!1},findAll:function(t,e){for(var r=[],n=e.slice();n.length;){var s=n.shift();i(s)&&(s.children&&s.children.length>0&&n.unshift.apply(n,s.children),t(s)&&r.push(s))}return r}}},3180:(t,e,r)=>{"use strict";var i=r(6680).Buffer,n=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.I=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},s.prototype.text=function(t,e){var r=function(t,e,r){var i=e.length-1;if(i<r)return 0;var n=o(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||-2===n?0:(n=o(e[i]))>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||-2===n?0:(n=o(e[i]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},3193:t=>{"use strict";t.exports=require("string_decoder")},3268:(t,e,r)=>{const{Record:i}=r(9063),n=i({id:null,spriteName:null,targetId:null,opcode:null,value:null,params:null,mode:"default",sliderMin:0,sliderMax:100,isDiscrete:!0,x:null,y:null,width:0,height:0,visible:!0});t.exports=n},3473:t=>{function e(t){this.client=t.client,this.key=t.key}e.prototype.write=function(t){this.client.rpush(this.key,t)},e.prototype.end=function(){},e.prototype.clear=function(t){this.client.del(this.key,t)},t.exports=e},3483:(t,e,r)=>{var i=r(887),n=r(5406).i,s=r(9023);function o(){}i.mixin(o),o.prototype.write=function(t,e,r){this.emit("item",(t?n(t+" ","grey"):"")+(e?n(e,{debug:"blue",info:"cyan",warn:"yellow",error:"red"}[e])+" ":"")+r.map((function(t){return"string"==typeof t?t:s.inspect(t,null,3,!0)})).join(" "))},t.exports=o},3501:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"}(r=e.ElementType||(e.ElementType={})),e.isTag=function(t){return t.type===r.Tag||t.type===r.Script||t.type===r.Style},e.Root=r.Root,e.Text=r.Text,e.Directive=r.Directive,e.Comment=r.Comment,e.Script=r.Script,e.Style=r.Style,e.Tag=r.Tag,e.CDATA=r.CDATA,e.Doctype=r.Doctype},3562:t=>{t.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(t){return"tag"===t.type||"script"===t.type||"style"===t.type}}},3581:t=>{t.exports=class{static simple(t){return JSON.parse(JSON.stringify(t))}}},3584:(t,e,r)=>{function i(t){this._cbs=t||{},this.events=[]}t.exports=i;var n=r(6550).EVENTS;Object.keys(n).forEach((function(t){if(0===n[t])t="on"+t,i.prototype[t]=function(){this.events.push([t]),this._cbs[t]&&this._cbs[t]()};else if(1===n[t])t="on"+t,i.prototype[t]=function(e){this.events.push([t,e]),this._cbs[t]&&this._cbs[t](e)};else{if(2!==n[t])throw Error("wrong number of arguments");t="on"+t,i.prototype[t]=function(e,r){this.events.push([t,e,r]),this._cbs[t]&&this._cbs[t](e,r)}}})),i.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},i.prototype.restart=function(){this._cbs.onreset&&this._cbs.onreset();for(var t=0,e=this.events.length;t<e;t++)if(this._cbs[this.events[t][0]]){var r=this.events[t].length;1===r?this._cbs[this.events[t][0]]():2===r?this._cbs[this.events[t][0]](this.events[t][1]):this._cbs[this.events[t][0]](this.events[t][1],this.events[t][2])}}},3593:(t,e,r)=>{t.exports=r(8272);var i=r(8287);"undefined"!=typeof window&&window.process&&"renderer"===window.process.type&&(i=r(529).minilog),t.exports.Stringifier=r(3719);var n=t.exports.pipe;t.exports.pipe=function(e){return e instanceof r(2203)?n.call(t.exports,new t.exports.Stringifier).pipe(e):n.call(t.exports,e)},t.exports.defaultBackend=i,t.exports.defaultFormatter=i.formatMinilog,t.exports.backends={redis:r(3473),nodeConsole:i,console:i}},3656:(t,e,r)=>{const i=r(455);t.exports=function(t,e,r){return t&&t.id&&t.default?i(t,e,r):t}},3659:t=>{"use strict";function e(t,e){i(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,n){var s=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(i,this,t)):process.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?s._writableState?s._writableState.errorEmitted?process.nextTick(r,s):(s._writableState.errorEmitted=!0,process.nextTick(e,s,t)):process.nextTick(e,s,t):n?(process.nextTick(r,s),n(t)):process.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}}},3698:(t,e,r)=>{const i=r(9224),n=r(2181);t.exports=class{constructor(t=null,e=null){this.sequencer=t,this.thread=e,this._nowObj={now:()=>this.sequencer.runtime.currentMSecs}}get target(){return this.thread.target}get runtime(){return this.sequencer.runtime}get nowObj(){return this.runtime?this._nowObj:null}get stackFrame(){const t=this.thread.peekStackFrame();return null===t.executionContext&&(t.executionContext={}),t.executionContext}stackTimerFinished(){return!(this.stackFrame.timer.timeElapsed()<this.stackFrame.duration)}stackTimerNeedsInit(){return!this.stackFrame.timer}startStackTimer(t){this.nowObj?this.stackFrame.timer=new n(this.nowObj):this.stackFrame.timer=new n,this.stackFrame.timer.start(),this.stackFrame.duration=t}yield(){this.thread.status=i.STATUS_YIELD}yieldTick(){this.thread.status=i.STATUS_YIELD_TICK}startBranch(t,e){this.sequencer.stepToBranch(this.thread,t,e)}stopAll(){this.sequencer.runtime.stopAll()}stopOtherTargetThreads(){this.sequencer.runtime.stopForTarget(this.thread.target,this.thread)}stopThisScript(){this.thread.stopThisScript()}startProcedure(t){this.sequencer.stepToProcedure(this.thread,t)}getProcedureParamNamesAndIds(t){return this.thread.target.blocks.getProcedureParamNamesAndIds(t)}getProcedureParamNamesIdsAndDefaults(t){return this.thread.target.blocks.getProcedureParamNamesIdsAndDefaults(t)}initParams(){this.thread.initParams()}pushParam(t,e){this.thread.pushParam(t,e)}getParam(t){return this.thread.getParam(t)}startHats(t,e,r){const i=this.thread,n=this.sequencer,s=this.sequencer.runtime.startHats(t,e,r);return this.thread=i,this.sequencer=n,s}ioQuery(t,e,r){if(this.sequencer.runtime.ioDevices[t]&&this.sequencer.runtime.ioDevices[t][e]){const i=this.sequencer.runtime.ioDevices[t];return i[e].apply(i,r)}}}},3719:(t,e,r)=>{function i(){}r(887).mixin(i),i.prototype.write=function(t,e,r){var i=[];t&&i.push(t),e&&i.push(e),i=i.concat(r);for(var n=0;n<i.length;n++)if(i[n]&&"object"==typeof i[n])if(i[n].constructor&&i[n].constructor.isBuffer)i[n]=i[n].toString();else try{i[n]=JSON.stringify(i[n])}catch(t){}else i[n]=i[n];this.emit("item",i.join(" ")+"\n")},t.exports=i},3843:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},4105:(t,e)=>{var r=e.getChildren=function(t){return t.children},i=e.getParent=function(t){return t.parent};e.getSiblings=function(t){var e=i(t);return e?r(e):[t]},e.getAttributeValue=function(t,e){return t.attribs&&t.attribs[e]},e.hasAttrib=function(t,e){return!!t.attribs&&hasOwnProperty.call(t.attribs,e)},e.getName=function(t){return t.name}},4196:(t,e,r)=>{const i=r(1398),n=r(2301);class s{constructor(t,e,r,n){switch(this.id=t||i(),this.name=e,this.type=r,this.isCloud=n,this.type){case s.SCALAR_TYPE:this.value=0;break;case s.LIST_TYPE:this.value=[];break;case s.BROADCAST_MESSAGE_TYPE:this.value=this.name;break;default:throw new Error(`Invalid variable type: ${this.type}`)}}toXML(t){return t=!0===t,`<variable type="${this.type}" id="${this.id}" islocal="${t}" iscloud="${this.isCloud}">${n(this.name)}</variable>`}static get SCALAR_TYPE(){return""}static get LIST_TYPE(){return"list"}static get BROADCAST_MESSAGE_TYPE(){return"broadcast_msg"}}t.exports=s},4204:t=>{"use strict";t.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},4223:t=>{t.exports={BOOLEAN:"Boolean",BUTTON:"button",COMMAND:"command",CONDITIONAL:"conditional",EVENT:"event",HAT:"hat",LOOP:"loop",REPORTER:"reporter"}},4277:(t,e,r)=>{const i=r(8833),n=r(4813);t.exports=class{constructor(t){this.runtime=t}getPrimitives(){return{operator_add:this.add,operator_subtract:this.subtract,operator_multiply:this.multiply,operator_divide:this.divide,operator_lt:this.lt,operator_equals:this.equals,operator_gt:this.gt,operator_and:this.and,operator_or:this.or,operator_not:this.not,operator_random:this.random,operator_join:this.join,operator_letter_of:this.letterOf,operator_length:this.length,operator_contains:this.contains,operator_mod:this.mod,operator_round:this.round,operator_mathop:this.mathop}}add(t){return i.toNumber(t.NUM1)+i.toNumber(t.NUM2)}subtract(t){return i.toNumber(t.NUM1)-i.toNumber(t.NUM2)}multiply(t){return i.toNumber(t.NUM1)*i.toNumber(t.NUM2)}divide(t){return i.toNumber(t.NUM1)/i.toNumber(t.NUM2)}lt(t){return i.compare(t.OPERAND1,t.OPERAND2)<0}equals(t){return 0===i.compare(t.OPERAND1,t.OPERAND2)}gt(t){return i.compare(t.OPERAND1,t.OPERAND2)>0}and(t){return i.toBoolean(t.OPERAND1)&&i.toBoolean(t.OPERAND2)}or(t){return i.toBoolean(t.OPERAND1)||i.toBoolean(t.OPERAND2)}not(t){return!i.toBoolean(t.OPERAND)}random(t){const e=i.toNumber(t.FROM),r=i.toNumber(t.TO),n=e<=r?e:r,s=e<=r?r:e;return n===s?n:i.isInt(t.FROM)&&i.isInt(t.TO)?n+Math.floor(Math.random()*(s+1-n)):Math.random()*(s-n)+n}join(t){return i.toString(t.STRING1)+i.toString(t.STRING2)}letterOf(t){const e=i.toNumber(t.LETTER)-1,r=i.toString(t.STRING);return e<0||e>=r.length?"":r.charAt(e)}length(t){return i.toString(t.STRING).length}contains(t){const e=function(t){return i.toString(t).toLowerCase()};return e(t.STRING1).includes(e(t.STRING2))}mod(t){const e=i.toNumber(t.NUM1),r=i.toNumber(t.NUM2);let n=e%r;return n/r<0&&(n+=r),n}round(t){return Math.round(i.toNumber(t.NUM))}mathop(t){const e=i.toString(t.OPERATOR).toLowerCase(),r=i.toNumber(t.NUM);switch(e){case"abs":return Math.abs(r);case"floor":return Math.floor(r);case"ceiling":return Math.ceil(r);case"sqrt":return Math.sqrt(r);case"sin":return parseFloat(Math.sin(Math.PI*r/180).toFixed(10));case"cos":return parseFloat(Math.cos(Math.PI*r/180).toFixed(10));case"tan":return n.tan(r);case"asin":return 180*Math.asin(r)/Math.PI;case"acos":return 180*Math.acos(r)/Math.PI;case"atan":return 180*Math.atan(r)/Math.PI;case"ln":return Math.log(r);case"log":return Math.log(r)/Math.LN10;case"e ^":return Math.exp(r);case"10 ^":return Math.pow(10,r)}return 0}}},4434:t=>{"use strict";t.exports=require("events")},4495:t=>{t.exports={OUTPUT_SHAPE_HEXAGONAL:1,OUTPUT_SHAPE_ROUND:2,OUTPUT_SHAPE_SQUARE:3}},4586:(t,e,r)=>{const i=r(3593);i.enable(),t.exports=i("vm")},4666:(t,e,r)=>{"use strict";var i;function n(t,e,r){return(e=function(t){var e=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=r(9249),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(t,e){return{value:t,done:e}}function f(t){var e=t[o];if(null!==e){var r=t[d].read();null!==r&&(t[l]=null,t[o]=null,t[a]=null,e(p(r,!1)))}}function m(t){process.nextTick(f,t)}var g=Object.getPrototypeOf((function(){})),_=Object.setPrototypeOf((n(i={get stream(){return this[d]},next:function(){var t=this,e=this[c];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(e,r){process.nextTick((function(){t[c]?r(t[c]):e(p(void 0,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(t,e){return function(r,i){t.then((function(){e[u]?r(p(void 0,!0)):e[h](r,i)}),i)}}(i,this));else{var n=this[d].read();if(null!==n)return Promise.resolve(p(n,!1));r=new Promise(this[h])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),n(i,"return",(function(){var t=this;return new Promise((function(e,r){t[d].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),i),g);t.exports=function(t){var e,r=Object.create(_,(n(e={},d,{value:t,writable:!0}),n(e,o,{value:null,writable:!0}),n(e,a,{value:null,writable:!0}),n(e,c,{value:null,writable:!0}),n(e,u,{value:t._readableState.endEmitted,writable:!0}),n(e,h,{value:function(t,e){var i=r[d].read();i?(r[l]=null,r[o]=null,r[a]=null,t(p(i,!1))):(r[o]=t,r[a]=e)},writable:!0}),e));return r[l]=null,s(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[a];return null!==e&&(r[l]=null,r[o]=null,r[a]=null,e(t)),void(r[c]=t)}var i=r[o];null!==i&&(r[l]=null,r[o]=null,r[a]=null,i(p(void 0,!0))),r[u]=!0})),t.on("readable",m.bind(null,r)),r}},4715:(t,e,r)=>{"use strict";var i;t.exports=E,E.ReadableState=T,r(4434).EventEmitter;var n,s=function(t,e){return t.listeners(e).length},o=r(5205),a=r(181).Buffer,c=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=r(9023);n=u&&u.debuglog?u.debuglog("stream"):function(){};var l,h,d,p=r(1334),f=r(3659),m=r(1108).getHighWaterMark,g=r(2758).F,_=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(728)(E,o);var S=f.errorOrDestroy,w=["error","close","destroy","pause","resume"];function T(t,e,n){i=i||r(1221),t=t||{},"boolean"!=typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=r(3180).I),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function E(t){if(i=i||r(1221),!(this instanceof E))return new E(t);var e=this instanceof i;this._readableState=new T(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function k(t,e,r,i,s){n("readableAddChunk",e);var o,u=t._readableState;if(null===e)u.reading=!1,function(t,e){if(n("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?O(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,C(t)))}}(t,u);else if(s||(o=function(t,e){var r,i;return i=e,a.isBuffer(i)||i instanceof c||"string"==typeof e||void 0===e||t.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],e)),r}(u,e)),o)S(t,o);else if(u.objectMode||e&&e.length>0)if("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),i)u.endEmitted?S(t,new v):A(t,u,e,!0);else if(u.ended)S(t,new b);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(e=u.decoder.write(e),u.objectMode||0!==e.length?A(t,u,e,!1):D(t,u)):A(t,u,e,!1)}else i||(u.reading=!1,D(t,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function A(t,e,r,i){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&O(t)),D(t,e)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(t,e){e(t)},E.prototype.push=function(t,e){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=a.from(t,e),e=""),r=!0),k(this,t,e,!1,r)},E.prototype.unshift=function(t){return k(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){l||(l=r(3180).I);var e=new l(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var I=1073741824;function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=I?t=I:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t){var e=t._readableState;n("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(n("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(C,t))}function C(t){var e=t._readableState;n("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,P(t)}function D(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(R,t,e))}function R(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(n("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function N(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function L(t){n("readable nexttick read 0"),t.read(0)}function M(t,e){n("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),P(t),e.flowing&&!e.reading&&t.read(0)}function P(t){var e=t._readableState;for(n("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function q(t){var e=t._readableState;n("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(U,e,t))}function U(t,e){if(n("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function F(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}E.prototype.read=function(t){n("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return n("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?q(this):O(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&q(this),null;var i,s=e.needReadable;return n("need readable",s),(0===e.length||e.length-t<e.highWaterMark)&&n("length less than watermark",s=!0),e.ended||e.reading?n("reading or ended",s=!1):s&&(n("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(r,e))),null===(i=t>0?B(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&q(this)),null!==i&&this.emit("data",i),i},E.prototype._read=function(t){S(this,new y("_read()"))},E.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,n("pipe count=%d opts=%j",i.pipesCount,e);var o=e&&!1===e.end||t===process.stdout||t===process.stderr?f:a;function a(){n("onend"),t.end()}i.endEmitted?process.nextTick(o):r.once("end",o),t.on("unpipe",(function e(s,o){n("onunpipe"),s===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,n("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",c),t.removeListener("error",h),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",f),r.removeListener("data",l),u=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}));var c=function(t){return function(){var e=t._readableState;n("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,P(t))}}(r);t.on("drain",c);var u=!1;function l(e){n("ondata");var s=t.write(e);n("dest.write",s),!1===s&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==F(i.pipes,t))&&!u&&(n("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(e){n("onerror",e),f(),t.removeListener("error",h),0===s(t,"error")&&S(t,e)}function d(){t.removeListener("finish",p),f()}function p(){n("onfinish"),t.removeListener("close",d),f()}function f(){n("unpipe"),r.unpipe(t)}return r.on("data",l),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",h),t.once("close",d),t.once("finish",p),t.emit("pipe",r),i.flowing||(n("pipe resume"),r.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},E.prototype.on=function(t,e){var r=o.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,n("on readable",i.length,i.reading),i.length?O(this):i.reading||process.nextTick(L,this))),r},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(t,e){var r=o.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(N,this),r},E.prototype.removeAllListeners=function(t){var e=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(N,this),e},E.prototype.resume=function(){var t=this._readableState;return t.flowing||(n("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(M,t,e))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;for(var s in t.on("end",(function(){if(n("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(s){n("wrapped data"),r.decoder&&(s=r.decoder.write(s)),r.objectMode&&null==s||(r.objectMode||s&&s.length)&&(e.push(s)||(i=!0,t.pause()))})),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(e){return function(){return t[e].apply(t,arguments)}}(s));for(var o=0;o<w.length;o++)t.on(w[o],this.emit.bind(this,w[o]));return this._read=function(e){n("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(4666)),h(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=B,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,e){return void 0===d&&(d=r(5017)),d(E,t,e)})},4766:(t,e,r)=>{const i=r(6941),n=r(889),s=r(2301),o=r(3268),a=r(3581),{Map:c}=r(9063),u=r(8971),l=r(764),h=r(4586),d=r(4196),p=r(661);class f{constructor(t,e){this.runtime=t,this._blocks={},this._scripts=[],Object.defineProperty(this,"_cache",{writable:!0,enumerable:!1}),this._cache={inputs:{},procedureParamNames:{},procedureDefinitions:{},_executeCached:{},_monitored:null,scripts:{}},this.forceNoGlow=e||!1}static get BRANCH_INPUT_PREFIX(){return"SUBSTACK"}getBlock(t){return this._blocks[t]}getScripts(){return this._scripts}getNextBlock(t){const e=this._blocks[t];return void 0===e?null:e.next}getBranch(t,e){const r=this._blocks[t];if(void 0===r)return null;e||(e=1);let i=f.BRANCH_INPUT_PREFIX;e>1&&(i+=e);const n=r.inputs[i];return void 0===n?null:n.block}getOpcode(t){return void 0===t?null:t.opcode}getFields(t){return void 0===t?null:t.fields}getInputs(t){if(void 0===t)return null;let e=this._cache.inputs[t.id];if(void 0!==e)return e;e={};for(const r in t.inputs)r.substring(0,f.BRANCH_INPUT_PREFIX.length)!==f.BRANCH_INPUT_PREFIX&&(e[r]=t.inputs[r]);return this._cache.inputs[t.id]=e,e}getMutation(t){return void 0===t?null:t.mutation}getTopLevelScript(t){let e=this._blocks[t];if(void 0===e)return null;for(;null!==e.parent;)e=this._blocks[e.parent];return e.id}getProcedureDefinition(t){const e=this._cache.procedureDefinitions[t];if(void 0!==e)return e;for(const e in this._blocks){if(!Object.prototype.hasOwnProperty.call(this._blocks,e))continue;const r=this._blocks[e];if("procedures_definition"===r.opcode){const i=this._getCustomBlockInternal(r);if(i&&i.mutation.proccode===t)return this._cache.procedureDefinitions[t]=e,e}}return this._cache.procedureDefinitions[t]=null,null}getProcedureParamNamesAndIds(t){return this.getProcedureParamNamesIdsAndDefaults(t).slice(0,2)}getProcedureParamNamesIdsAndDefaults(t){const e=this._cache.procedureParamNames[t];if(void 0!==e)return e;for(const e in this._blocks){if(!Object.prototype.hasOwnProperty.call(this._blocks,e))continue;const r=this._blocks[e];if("procedures_prototype"===r.opcode&&r.mutation.proccode===t){const e=JSON.parse(r.mutation.argumentnames),i=JSON.parse(r.mutation.argumentids),n=JSON.parse(r.mutation.argumentdefaults);return this._cache.procedureParamNames[t]=[e,i,n],this._cache.procedureParamNames[t]}}return this._cache.procedureParamNames[t]=null,null}duplicate(){const t=new f(this.runtime,this.forceNoGlow);return t._blocks=a.simple(this._blocks),t._scripts=a.simple(this._scripts),t}blocklyListen(t){if("object"!=typeof t)return;if("string"!=typeof t.blockId&&"string"!=typeof t.varId&&"string"!=typeof t.commentId)return;const e=this.runtime.getTargetForStage(),r=this.runtime.getEditingTarget();if("stackclick"!==t.element)switch(t.type){case"create":{const e=i(t);for(let t=0;t<e.length;t++)this.createBlock(e[t]);break}case"change":this.changeBlock({id:t.blockId,element:t.element,name:t.name,value:t.newValue});break;case"move":this.moveBlock({id:t.blockId,oldParent:t.oldParentId,oldInput:t.oldInputName,newParent:t.newParentId,newInput:t.newInputName,newCoordinate:t.newCoordinate});break;case"dragOutside":this.runtime.emitBlockDragUpdate(t.isOutside);break;case"endDrag":if(this.runtime.emitBlockDragUpdate(!1),t.isOutside){const e=i(t);this.runtime.emitBlockEndDrag(e,t.blockId)}break;case"delete":if(!Object.prototype.hasOwnProperty.call(this._blocks,t.blockId)||this._blocks[t.blockId].shadow)return;this._blocks[t.blockId].topLevel&&this.runtime.quietGlow(t.blockId),this.deleteBlock(t.blockId);break;case"var_create":if(t.isLocal&&r&&!r.isStage&&!t.isCloud)r.lookupVariableById(t.varId)||(r.createVariable(t.varId,t.varName,t.varType),this.emitProjectChanged());else{if(e.lookupVariableById(t.varId))return;const r=this.runtime.targets.filter((t=>t.isOriginal));for(const e of r)if(e.lookupVariableByNameAndType(t.varName,t.varType,!0))return;e.createVariable(t.varId,t.varName,t.varType,t.isCloud),this.emitProjectChanged()}break;case"var_rename":if(r&&Object.prototype.hasOwnProperty.call(r.variables,t.varId))r.renameVariable(t.varId,t.newName),r.blocks.updateBlocksAfterVarRename(t.varId,t.newName);else{e.renameVariable(t.varId,t.newName);const r=this.runtime.targets;for(let e=0;e<r.length;e++)r[e].blocks.updateBlocksAfterVarRename(t.varId,t.newName)}this.emitProjectChanged();break;case"var_delete":(r&&Object.prototype.hasOwnProperty.call(r.variables,t.varId)?r:e).deleteVariable(t.varId),this.emitProjectChanged();break;case"comment_create":if(this.runtime.getEditingTarget()){const e=this.runtime.getEditingTarget();e.createComment(t.commentId,t.blockId,t.text,t.xy.x,t.xy.y,t.width,t.height,t.minimized),null===e.comments[t.commentId].x&&null===e.comments[t.commentId].y&&(e.comments[t.commentId].x=t.xy.x,e.comments[t.commentId].y=t.xy.y)}this.emitProjectChanged();break;case"comment_change":if(this.runtime.getEditingTarget()){const e=this.runtime.getEditingTarget();if(!Object.prototype.hasOwnProperty.call(e.comments,t.commentId))return void h.warn(`Cannot change comment with id ${t.commentId} because it does not exist.`);const r=e.comments[t.commentId],i=t.newContents_;Object.prototype.hasOwnProperty.call(i,"minimized")&&(r.minimized=i.minimized),Object.prototype.hasOwnProperty.call(i,"width")&&Object.prototype.hasOwnProperty.call(i,"height")&&(r.width=i.width,r.height=i.height),Object.prototype.hasOwnProperty.call(i,"text")&&(r.text=i.text),this.emitProjectChanged()}break;case"comment_move":if(this.runtime.getEditingTarget()){const e=this.runtime.getEditingTarget();if(e&&!Object.prototype.hasOwnProperty.call(e.comments,t.commentId))return void h.warn(`Cannot move comment with id ${t.commentId} because it does not exist.`);const r=e.comments[t.commentId],i=t.newCoordinate_;r.x=i.x,r.y=i.y,this.emitProjectChanged()}break;case"comment_delete":if(this.runtime.getEditingTarget()){const e=this.runtime.getEditingTarget();if(!Object.prototype.hasOwnProperty.call(e.comments,t.commentId))return;if(delete e.comments[t.commentId],t.blockId){const r=e.blocks.getBlock(t.blockId);if(!r)return void h.warn(`Could not find block referenced by comment with id: ${t.commentId}`);delete r.comment}this.emitProjectChanged()}}else this.runtime.toggleScript(t.blockId,{stackClick:!0})}resetCache(){this._cache.inputs={},this._cache.procedureParamNames={},this._cache.procedureDefinitions={},this._cache._executeCached={},this._cache._monitored=null,this._cache.scripts={}}emitProjectChanged(){this.forceNoGlow||this.runtime.emitProjectChanged()}createBlock(t){Object.prototype.hasOwnProperty.call(this._blocks,t.id)||(this._blocks[t.id]=t,t.topLevel&&this._addScript(t.id),this.resetCache(),this.emitProjectChanged())}changeBlock(t){if(-1===["field","mutation","checkbox"].indexOf(t.element))return;let e=this._blocks[t.id];if(void 0!==e){switch(t.element){case"field":if(!e.fields[t.name])return;if("VARIABLE"===t.name||"LIST"===t.name||"BROADCAST_OPTION"===t.name){const r=this.runtime.getEditingTarget().lookupVariableById(t.value);r&&(e.fields[t.name].value=r.name,e.fields[t.name].id=t.value)}else{e.fields[t.name].value=t.value,"sensing_of_object_menu"===e.opcode&&("_stage_"===e.fields.OBJECT.value?this._blocks[e.parent].fields.PROPERTY.value="backdrop #":this._blocks[e.parent].fields.PROPERTY.value="x position",this.runtime.requestBlocksUpdate());const r=e.shadow&&e.parent?this._blocks[e.parent]:e;r.isMonitored&&this.runtime.requestUpdateMonitor(c({id:r.id,params:this._getBlockParams(r)}))}break;case"mutation":e.mutation=n(t.value);break;case"checkbox":{if(e.fields&&Object.keys(e.fields).length>0&&"data_variable"!==e.opcode&&"data_listcontents"!==e.opcode){const t=p(e.id,e.fields);let r=this.runtime.monitorBlocks.getBlock(t);r||(r=JSON.parse(JSON.stringify(e)),r.id=t,this.runtime.monitorBlocks.createBlock(r)),e=r}const r=e.isMonitored;e.isMonitored=t.value;let i=!1;"data_variable"===e.opcode?i=!this.runtime.getTargetForStage().variables[e.fields.VARIABLE.id]:"data_listcontents"===e.opcode&&(i=!this.runtime.getTargetForStage().variables[e.fields.LIST.id]);const n=i||Object.prototype.hasOwnProperty.call(this.runtime.monitorBlockInfo,e.opcode)&&this.runtime.monitorBlockInfo[e.opcode].isSpriteSpecific;e.targetId=n?e.targetId||this.runtime.getEditingTarget().id:null,r&&!e.isMonitored?this.runtime.requestHideMonitor(e.id):!r&&e.isMonitored&&(this.runtime.requestShowMonitor(e.id)||this.runtime.requestAddMonitor(o({id:e.id,targetId:e.targetId,spriteName:e.targetId?this.runtime.getTargetById(e.targetId).getName():null,opcode:e.opcode,params:this._getBlockParams(e),value:"",mode:"data_listcontents"===e.opcode?"list":"default"})));break}}this.emitProjectChanged(),this.resetCache()}}moveBlock(t){if(!Object.prototype.hasOwnProperty.call(this._blocks,t.id))return;const e=this._blocks[t.id];let r=!1;if(t.newCoordinate&&(r=e.x!==t.newCoordinate.x||e.y!==t.newCoordinate.y,e.x=t.newCoordinate.x,e.y=t.newCoordinate.y),void 0!==t.oldParent){const e=this._blocks[t.oldParent];void 0!==t.oldInput&&e.inputs[t.oldInput].block===t.id?e.inputs[t.oldInput].block=null:e.next===t.id&&(e.next=null),this._blocks[t.id].parent=null,r=!0}if(void 0===t.newParent)this._addScript(t.id);else{if(this._deleteScript(t.id),void 0===t.newInput)this._blocks[t.newParent].next=t.id;else{let e=null;Object.prototype.hasOwnProperty.call(this._blocks[t.newParent].inputs,t.newInput)&&(e=this._blocks[t.newParent].inputs[t.newInput].shadow),this._blocks[t.id].shadow&&(e=t.id),this._blocks[t.newParent].inputs[t.newInput]={name:t.newInput,block:t.id,shadow:e}}this._blocks[t.id].parent=t.newParent,r=!0}this.resetCache(),r&&this.emitProjectChanged()}runAllMonitored(t){null===this._cache._monitored&&(this._cache._monitored=Object.keys(this._blocks).filter((t=>this.getBlock(t).isMonitored)).map((e=>{const r=this.getBlock(e).targetId;return{blockId:e,target:r?t.getTargetById(r):null}})));const e=this._cache._monitored;for(let r=0;r<e.length;r++){const{blockId:i,target:n}=e[r];t.addMonitorScript(i,n)}}deleteBlock(t){const e=this._blocks[t];if(e){null!==e.next&&this.deleteBlock(e.next);for(const t in e.inputs)null!==e.inputs[t].block&&this.deleteBlock(e.inputs[t].block),null!==e.inputs[t].shadow&&e.inputs[t].shadow!==e.inputs[t].block&&this.deleteBlock(e.inputs[t].shadow);this._deleteScript(t),delete this._blocks[t],this.resetCache(),this.emitProjectChanged()}}deleteAllBlocks(){Object.keys(this._blocks).forEach((t=>this.deleteBlock(t)))}getAllVariableAndListReferences(t,e){const r=t||this._blocks,i=Object.create(null);for(const t in r){let n=null,s=null;if(r[t].fields.VARIABLE?(n=r[t].fields.VARIABLE,s=d.SCALAR_TYPE):r[t].fields.LIST?(n=r[t].fields.LIST,s=d.LIST_TYPE):e&&r[t].fields.BROADCAST_OPTION&&(n=r[t].fields.BROADCAST_OPTION,s=d.BROADCAST_MESSAGE_TYPE),n){const t=n.id;i[t]?i[t].push({referencingField:n,type:s}):i[t]=[{referencingField:n,type:s}]}}return i}updateBlocksAfterVarRename(t,e){const r=this._blocks;for(const i in r){let n=null;r[i].fields.VARIABLE?n=r[i].fields.VARIABLE:r[i].fields.LIST&&(n=r[i].fields.LIST),n&&t===n.id&&(n.value=e)}}updateTargetSpecificBlocks(t){const e=this._blocks;for(const r in e)t&&"event_whenthisspriteclicked"===e[r].opcode?e[r].opcode="event_whenstageclicked":t||"event_whenstageclicked"!==e[r].opcode||(e[r].opcode="event_whenthisspriteclicked")}updateAssetName(t,e,r){let i;if("costume"===r)i=this._getCostumeField.bind(this);else if("sound"===r)i=this._getSoundField.bind(this);else if("backdrop"===r)i=this._getBackdropField.bind(this);else{if("sprite"!==r)return;i=this._getSpriteField.bind(this)}const n=this._blocks;for(const r in n){const n=i(r);n&&n.value===t&&(n.value=e)}}updateSensingOfReference(t,e,r){const i=this._blocks;let n=!1;for(const s in i){const o=i[s];"sensing_of"===o.opcode&&o.fields.PROPERTY.value===t&&o.inputs.OBJECT.block===o.inputs.OBJECT.shadow&&this.getBlock(o.inputs.OBJECT.block).fields.OBJECT.value===r&&(o.fields.PROPERTY.value=e,n=!0)}return n&&this.resetCache(),n}_getCostumeField(t){const e=this.getBlock(t);return e&&Object.prototype.hasOwnProperty.call(e.fields,"COSTUME")?e.fields.COSTUME:null}_getSoundField(t){const e=this.getBlock(t);return e&&Object.prototype.hasOwnProperty.call(e.fields,"SOUND_MENU")?e.fields.SOUND_MENU:null}_getBackdropField(t){const e=this.getBlock(t);return e&&Object.prototype.hasOwnProperty.call(e.fields,"BACKDROP")?e.fields.BACKDROP:null}_getSpriteField(t){const e=this.getBlock(t);if(!e)return null;const r=["TOWARDS","TO","OBJECT","VIDEOONMENU2","DISTANCETOMENU","TOUCHINGOBJECTMENU","CLONE_OPTION"];for(let t=0;t<r.length;t++){const i=r[t];if(Object.prototype.hasOwnProperty.call(e.fields,i))return e.fields[i]}return null}toXML(t){return this._scripts.map((e=>this.blockToXML(e,t))).join()}blockToXML(t,e){const r=this._blocks[t];if(!r)return;const i=r.shadow?"shadow":"block";let n=`<${i}\n                id="${r.id}"\n                type="${r.opcode}"\n                ${r.topLevel?`x="${r.x}" y="${r.y}"`:""}\n            >`;const o=r.comment;o&&(e?Object.prototype.hasOwnProperty.call(e,o)?n+=e[o].toXML():h.warn(`Could not find comment with id: ${o} in provided comment descriptions.`):h.warn(`Cannot serialize comment with id: ${o}; no comment descriptions provided.`)),r.mutation&&(n+=this.mutationToXML(r.mutation));for(const t in r.inputs){if(!Object.prototype.hasOwnProperty.call(r.inputs,t))continue;const i=r.inputs[t];(i.block||i.shadow)&&(n+=`<value name="${i.name}">`,i.block&&(n+=this.blockToXML(i.block,e)),i.shadow&&i.shadow!==i.block&&(n+=this.blockToXML(i.shadow,e)),n+="</value>")}for(const t in r.fields){if(!Object.prototype.hasOwnProperty.call(r.fields,t))continue;const e=r.fields[t];n+=`<field name="${e.name}"`;const i=e.id;i&&(n+=` id="${i}"`);const o=e.variableType;"string"==typeof o&&(n+=` variabletype="${o}"`);let a=e.value;"string"==typeof a&&(a=s(e.value)),n+=`>${a}</field>`}return r.next&&(n+=`<next>${this.blockToXML(r.next,e)}</next>`),n+=`</${i}>`,n}mutationToXML(t){let e=`<${t.tagName}`;for(const r in t){if("children"===r||"tagName"===r)continue;let i="string"==typeof t[r]?s(t[r]):t[r];"blockInfo"===r&&(i=s(JSON.stringify(t[r]))),e+=` ${r}="${i}"`}e+=">";for(let r=0;r<t.children.length;r++)e+=this.mutationToXML(t.children[r]);return e+=`</${t.tagName}>`,e}_getBlockParams(t){const e={};for(const r in t.fields)e[r]=t.fields[r].value;for(const r in t.inputs){const i=this._blocks[t.inputs[r].block];for(const t in i.fields)e[t]=i.fields[t].value}return e}_getCustomBlockInternal(t){if(t.inputs&&t.inputs.custom_block)return this._blocks[t.inputs.custom_block.block]}_addScript(t){this._scripts.indexOf(t)>-1||(this._scripts.push(t),this._blocks[t].topLevel=!0)}_deleteScript(t){const e=this._scripts.indexOf(t);e>-1&&this._scripts.splice(e,1),this._blocks[t]&&(this._blocks[t].topLevel=!1)}}u.getCached=function(t,e,r){let i=t._cache._executeCached[e];if(void 0!==i)return i;const n=t.getBlock(e);return void 0===n?null:(i=void 0===r?{id:e,opcode:t.getOpcode(n),fields:t.getFields(n),inputs:t.getInputs(n),mutation:t.getMutation(n)}:new r(t,{id:e,opcode:t.getOpcode(n),fields:t.getFields(n),inputs:t.getInputs(n),mutation:t.getMutation(n)}),t._cache._executeCached[e]=i,i)};const m=l._RuntimeScriptCache;l.getScripts=function(t,e){let r=t._cache.scripts[e];if(!r){r=t._cache.scripts[e]=[];const i=t._scripts;for(let n=0;n<i.length;n++){const s=i[n];t.getBlock(s).opcode===e&&r.push(new m(t,s))}}return r},t.exports=f},4788:(t,e,r)=>{function i(t){this._cbs=t||{}}t.exports=i;var n=r(6550).EVENTS;Object.keys(n).forEach((function(t){if(0===n[t])t="on"+t,i.prototype[t]=function(){this._cbs[t]&&this._cbs[t]()};else if(1===n[t])t="on"+t,i.prototype[t]=function(e){this._cbs[t]&&this._cbs[t](e)};else{if(2!==n[t])throw Error("wrong number of arguments");t="on"+t,i.prototype[t]=function(e,r){this._cbs[t]&&this._cbs[t](e,r)}}}))},4813:t=>{t.exports=class{static degToRad(t){return t*Math.PI/180}static radToDeg(t){return 180*t/Math.PI}static clamp(t,e,r){return Math.min(Math.max(t,e),r)}static wrapClamp(t,e,r){const i=r-e+1;return t-Math.floor((t-e)/i)*i}static tan(t){switch(t%=360){case-270:case 90:return 1/0;case-90:case 270:return-1/0;default:return parseFloat(Math.tan(Math.PI*t/180).toFixed(10))}}static reducedSortOrdering(t){const e=t.slice(0).sort(((t,e)=>t-e));return t.map((t=>e.indexOf(t)))}static inclusiveRandIntWithout(t,e,r){const i=e-t,n=t+Math.floor(Math.random()*i);return n>=r?n+1:n}static scale(t,e,r,i,n){return(t-e)/(r-e)*(n-i)+i}}},4828:t=>{function e(){this._events={}}e.prototype={on:function(t,e){this._events||(this._events={});var r=this._events;return(r[t]||(r[t]=[])).push(e),this},removeListener:function(t,e){var r,i=this._events[t]||[];for(r=i.length-1;r>=0&&i[r];r--)i[r]!==e&&i[r].cb!==e||i.splice(r,1)},removeAllListeners:function(t){t?this._events[t]&&(this._events[t]=[]):this._events={}},listeners:function(t){return this._events&&this._events[t]||[]},emit:function(t){this._events||(this._events={});var e,r=Array.prototype.slice.call(arguments,1),i=this._events[t]||[];for(e=i.length-1;e>=0&&i[e];e--)i[e].apply(this,r);return this},when:function(t,e){return this.once(t,e,!0)},once:function(t,e,r){if(!e)return this;function i(){r||this.removeListener(t,i),e.apply(this,arguments)&&r&&this.removeListener(t,i)}return i.cb=e,this.on(t,i),this}},e.mixin=function(t){var r,i=e.prototype;for(r in i)i.hasOwnProperty(r)&&(t.prototype[r]=i[r])},t.exports=e},4916:(t,e,r)=>{var i=r(887),n=r(5406).i;function s(){}function o(t){return t}i.mixin(s);var a={string:o,number:o,default:JSON.stringify.bind(JSON)};s.prototype.write=function(t,e,r){var i,o=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(t,e){return e};var e=new Error;Error.captureStackTrace(e,arguments.callee);var r=e.stack;return Error.prepareStackTrace=t,r}()[5],c=s.fullPath?o.getFileName():o.getFileName().replace(/^.*\/(.+)$/,"/$1");this.emit("item",(t?t+" ":"")+(e?n(4==(i=e).toString().length?" "+i:i,{debug:"magenta",info:"cyan",warn:"yellow",error:"red"}[e])+" ":"")+n(c+":"+o.getLineNumber(),"grey")+" "+function(t){return t.map((function(t){return(a[typeof t]||a.default)(t)}))}(r).join(" "))},s.fullPath=!0,t.exports=s},5017:(t,e,r)=>{"use strict";function i(t,e,r,i,n,s,o){try{var a=t[s](o),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(i,n)}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function s(t,e,r){return(e=function(t){var e=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(2758).F.ERR_INVALID_ARG_TYPE;t.exports=function(t,e,r){var a;if(e&&"function"==typeof e.next)a=e;else if(e&&e[Symbol.asyncIterator])a=e[Symbol.asyncIterator]();else{if(!e||!e[Symbol.iterator])throw new o("iterable",["Iterable"],e);a=e[Symbol.iterator]()}var c=new t(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({objectMode:!0},r)),u=!1;function l(){return h.apply(this,arguments)}function h(){var t;return t=function*(){try{var t=yield a.next(),e=t.value;t.done?c.push(null):c.push(yield e)?l():u=!1}catch(t){c.destroy(t)}},h=function(){var e=this,r=arguments;return new Promise((function(n,s){var o=t.apply(e,r);function a(t){i(o,n,s,a,c,"next",t)}function c(t){i(o,n,s,a,c,"throw",t)}a(void 0)}))},h.apply(this,arguments)}return c._read=function(){u||(u=!0,l())},c}},5075:(t,e,r)=>{const i=r(4813);t.exports=class{constructor(t){this._x=0,this._y=0,this._isDown=!1,this.runtime=t}_activateClickHats(t){this.runtime.startHats("event_whenthisspriteclicked",null,t),this.runtime.startHats("event_whenstageclicked",null,t)}_pickTarget(t,e){if(this.runtime.renderer){const r=this.runtime.renderer.pick(t,e);for(let t=0;t<this.runtime.targets.length;t++){const e=this.runtime.targets[t];if(Object.prototype.hasOwnProperty.call(e,"drawableID")&&e.drawableID===r)return e}}return this.runtime.getTargetForStage()}postData(t){if(t.x&&(this._clientX=t.x,this._scratchX=Math.round(i.clamp(480*(t.x/t.canvasWidth-.5),-240,240))),t.y&&(this._clientY=t.y,this._scratchY=Math.round(i.clamp(-360*(t.y/t.canvasHeight-.5),-180,180))),void 0!==t.isDown){const e=this._isDown;if(this._isDown=t.isDown,e===this._isDown)return;if(t.wasDragged)return;if(!(t.x>0&&t.x<t.canvasWidth&&t.y>0&&t.y<t.canvasHeight))return;const r=this._pickTarget(t.x,t.y),i=!e&&this._isDown,n=e&&!this._isDown;(r.draggable&&n||!r.draggable&&i)&&this._activateClickHats(r)}}getClientX(){return this._clientX}getClientY(){return this._clientY}getScratchX(){return this._scratchX}getScratchY(){return this._scratchY}getIsDown(){return this._isDown}}},5076:t=>{var e=t.exports={get firstChild(){var t=this.children;return t&&t[0]||null},get lastChild(){var t=this.children;return t&&t[t.length-1]||null},get nodeType(){return i[this.type]||i.element}},r={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},i={element:1,text:3,cdata:4,comment:8};Object.keys(r).forEach((function(t){var i=r[t];Object.defineProperty(e,t,{get:function(){return this[i]||null},set:function(t){return this[i]=t,t}})}))},5094:(t,e,r)=>{const i=r(8833);class n{constructor(t){this.runtime=t}getPrimitives(){return{data_variable:this.getVariable,data_setvariableto:this.setVariableTo,data_changevariableby:this.changeVariableBy,data_hidevariable:this.hideVariable,data_showvariable:this.showVariable,data_listcontents:this.getListContents,data_addtolist:this.addToList,data_deleteoflist:this.deleteOfList,data_deletealloflist:this.deleteAllOfList,data_insertatlist:this.insertAtList,data_replaceitemoflist:this.replaceItemOfList,data_itemoflist:this.getItemOfList,data_itemnumoflist:this.getItemNumOfList,data_lengthoflist:this.lengthOfList,data_listcontainsitem:this.listContainsItem,data_hidelist:this.hideList,data_showlist:this.showList}}getVariable(t,e){return e.target.lookupOrCreateVariable(t.VARIABLE.id,t.VARIABLE.name).value}setVariableTo(t,e){const r=e.target.lookupOrCreateVariable(t.VARIABLE.id,t.VARIABLE.name);r.value=t.VALUE,r.isCloud&&e.ioQuery("cloud","requestUpdateVariable",[r.name,t.VALUE])}changeVariableBy(t,e){const r=e.target.lookupOrCreateVariable(t.VARIABLE.id,t.VARIABLE.name),n=i.toNumber(r.value)+i.toNumber(t.VALUE);r.value=n,r.isCloud&&e.ioQuery("cloud","requestUpdateVariable",[r.name,n])}changeMonitorVisibility(t,e){this.runtime.monitorBlocks.changeBlock({id:t,element:"checkbox",value:e},this.runtime)}showVariable(t){this.changeMonitorVisibility(t.VARIABLE.id,!0)}hideVariable(t){this.changeMonitorVisibility(t.VARIABLE.id,!1)}showList(t){this.changeMonitorVisibility(t.LIST.id,!0)}hideList(t){this.changeMonitorVisibility(t.LIST.id,!1)}getListContents(t,e){const r=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name);if(e.thread.updateMonitor)return r._monitorUpToDate?r.value:(r._monitorUpToDate=!0,r.value.slice());let i=!0;for(let t=0;t<r.value.length;t++){const e=r.value[t];if("string"!=typeof e||1!==e.length){i=!1;break}}return i?r.value.join(""):r.value.join(" ")}addToList(t,e){const r=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name);r.value.length<n.LIST_ITEM_LIMIT&&(r.value.push(t.ITEM),r._monitorUpToDate=!1)}deleteOfList(t,e){const r=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name),n=i.toListIndex(t.INDEX,r.value.length,!0);n!==i.LIST_INVALID&&(n!==i.LIST_ALL?(r.value.splice(n-1,1),r._monitorUpToDate=!1):r.value=[])}deleteAllOfList(t,e){e.target.lookupOrCreateList(t.LIST.id,t.LIST.name).value=[]}insertAtList(t,e){const r=t.ITEM,s=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name),o=i.toListIndex(t.INDEX,s.value.length+1,!1);if(o===i.LIST_INVALID)return;const a=n.LIST_ITEM_LIMIT;o>a||(s.value.splice(o-1,0,r),s.value.length>a&&s.value.pop(),s._monitorUpToDate=!1)}replaceItemOfList(t,e){const r=t.ITEM,n=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name),s=i.toListIndex(t.INDEX,n.value.length,!1);s!==i.LIST_INVALID&&(n.value[s-1]=r,n._monitorUpToDate=!1)}getItemOfList(t,e){const r=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name),n=i.toListIndex(t.INDEX,r.value.length,!1);return n===i.LIST_INVALID?"":r.value[n-1]}getItemNumOfList(t,e){const r=t.ITEM,n=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name);for(let t=0;t<n.value.length;t++)if(0===i.compare(n.value[t],r))return t+1;return 0}lengthOfList(t,e){return e.target.lookupOrCreateList(t.LIST.id,t.LIST.name).value.length}listContainsItem(t,e){const r=t.ITEM,n=e.target.lookupOrCreateList(t.LIST.id,t.LIST.name);if(n.value.indexOf(r)>=0)return!0;for(let t=0;t<n.value.length;t++)if(0===i.compare(n.value[t],r))return!0;return!1}static get LIST_ITEM_LIMIT(){return 2e5}}t.exports=n},5139:(t,e,r)=>{t.exports=gt;var i=r(8341),n=r(2441),s=r(77),o=r(1863),a=0,c=a++,u=a++,l=a++,h=a++,d=a++,p=a++,f=a++,m=a++,g=a++,_=a++,b=a++,y=a++,v=a++,S=a++,w=a++,T=a++,E=a++,k=a++,A=a++,I=a++,x=a++,O=a++,C=a++,D=a++,R=a++,N=a++,L=a++,M=a++,P=a++,B=a++,q=a++,U=a++,F=a++,j=a++,V=a++,H=a++,G=a++,z=a++,Y=a++,W=a++,$=a++,K=a++,X=a++,J=a++,Q=a++,Z=a++,tt=a++,et=a++,rt=a++,it=a++,nt=a++,st=a++,ot=a++,at=a++,ct=a++,ut=0,lt=ut++,ht=ut++,dt=ut++;function pt(t){return" "===t||"\n"===t||"\t"===t||"\f"===t||"\r"===t}function ft(t,e,r){var i=t.toLowerCase();return t===i?function(t){t===i?this._state=e:(this._state=r,this._index--)}:function(n){n===i||n===t?this._state=e:(this._state=r,this._index--)}}function mt(t,e){var r=t.toLowerCase();return function(i){i===r||i===t?this._state=e:(this._state=l,this._index--)}}function gt(t,e){this._state=c,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=c,this._special=lt,this._cbs=e,this._running=!0,this._ended=!1,this._xmlMode=!(!t||!t.xmlMode),this._decodeEntities=!(!t||!t.decodeEntities)}gt.prototype._stateText=function(t){"<"===t?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=u,this._sectionStart=this._index):this._decodeEntities&&this._special===lt&&"&"===t&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=c,this._state=nt,this._sectionStart=this._index)},gt.prototype._stateBeforeTagName=function(t){"/"===t?this._state=d:"<"===t?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===t||this._special!==lt||pt(t)?this._state=c:"!"===t?(this._state=w,this._sectionStart=this._index+1):"?"===t?(this._state=E,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==t&&"S"!==t?l:q,this._sectionStart=this._index)},gt.prototype._stateInTagName=function(t){("/"===t||">"===t||pt(t))&&(this._emitToken("onopentagname"),this._state=m,this._index--)},gt.prototype._stateBeforeCloseingTagName=function(t){pt(t)||(">"===t?this._state=c:this._special!==lt?"s"===t||"S"===t?this._state=U:(this._state=c,this._index--):(this._state=p,this._sectionStart=this._index))},gt.prototype._stateInCloseingTagName=function(t){(">"===t||pt(t))&&(this._emitToken("onclosetag"),this._state=f,this._index--)},gt.prototype._stateAfterCloseingTagName=function(t){">"===t&&(this._state=c,this._sectionStart=this._index+1)},gt.prototype._stateBeforeAttributeName=function(t){">"===t?(this._cbs.onopentagend(),this._state=c,this._sectionStart=this._index+1):"/"===t?this._state=h:pt(t)||(this._state=g,this._sectionStart=this._index)},gt.prototype._stateInSelfClosingTag=function(t){">"===t?(this._cbs.onselfclosingtag(),this._state=c,this._sectionStart=this._index+1):pt(t)||(this._state=m,this._index--)},gt.prototype._stateInAttributeName=function(t){("="===t||"/"===t||">"===t||pt(t))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=_,this._index--)},gt.prototype._stateAfterAttributeName=function(t){"="===t?this._state=b:"/"===t||">"===t?(this._cbs.onattribend(),this._state=m,this._index--):pt(t)||(this._cbs.onattribend(),this._state=g,this._sectionStart=this._index)},gt.prototype._stateBeforeAttributeValue=function(t){'"'===t?(this._state=y,this._sectionStart=this._index+1):"'"===t?(this._state=v,this._sectionStart=this._index+1):pt(t)||(this._state=S,this._sectionStart=this._index,this._index--)},gt.prototype._stateInAttributeValueDoubleQuotes=function(t){'"'===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=nt,this._sectionStart=this._index)},gt.prototype._stateInAttributeValueSingleQuotes=function(t){"'"===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=nt,this._sectionStart=this._index)},gt.prototype._stateInAttributeValueNoQuotes=function(t){pt(t)||">"===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m,this._index--):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=nt,this._sectionStart=this._index)},gt.prototype._stateBeforeDeclaration=function(t){this._state="["===t?O:"-"===t?k:T},gt.prototype._stateInDeclaration=function(t){">"===t&&(this._cbs.ondeclaration(this._getSection()),this._state=c,this._sectionStart=this._index+1)},gt.prototype._stateInProcessingInstruction=function(t){">"===t&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=c,this._sectionStart=this._index+1)},gt.prototype._stateBeforeComment=function(t){"-"===t?(this._state=A,this._sectionStart=this._index+1):this._state=T},gt.prototype._stateInComment=function(t){"-"===t&&(this._state=I)},gt.prototype._stateAfterComment1=function(t){this._state="-"===t?x:A},gt.prototype._stateAfterComment2=function(t){">"===t?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"-"!==t&&(this._state=A)},gt.prototype._stateBeforeCdata1=ft("C",C,T),gt.prototype._stateBeforeCdata2=ft("D",D,T),gt.prototype._stateBeforeCdata3=ft("A",R,T),gt.prototype._stateBeforeCdata4=ft("T",N,T),gt.prototype._stateBeforeCdata5=ft("A",L,T),gt.prototype._stateBeforeCdata6=function(t){"["===t?(this._state=M,this._sectionStart=this._index+1):(this._state=T,this._index--)},gt.prototype._stateInCdata=function(t){"]"===t&&(this._state=P)},gt.prototype._stateAfterCdata1=function(t){this._state="]"===t?B:M},gt.prototype._stateAfterCdata2=function(t){">"===t?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"]"!==t&&(this._state=M)},gt.prototype._stateBeforeSpecial=function(t){"c"===t||"C"===t?this._state=F:"t"===t||"T"===t?this._state=X:(this._state=l,this._index--)},gt.prototype._stateBeforeSpecialEnd=function(t){this._special!==ht||"c"!==t&&"C"!==t?this._special!==dt||"t"!==t&&"T"!==t?this._state=c:this._state=tt:this._state=z},gt.prototype._stateBeforeScript1=mt("R",j),gt.prototype._stateBeforeScript2=mt("I",V),gt.prototype._stateBeforeScript3=mt("P",H),gt.prototype._stateBeforeScript4=mt("T",G),gt.prototype._stateBeforeScript5=function(t){("/"===t||">"===t||pt(t))&&(this._special=ht),this._state=l,this._index--},gt.prototype._stateAfterScript1=ft("R",Y,c),gt.prototype._stateAfterScript2=ft("I",W,c),gt.prototype._stateAfterScript3=ft("P",$,c),gt.prototype._stateAfterScript4=ft("T",K,c),gt.prototype._stateAfterScript5=function(t){">"===t||pt(t)?(this._special=lt,this._state=p,this._sectionStart=this._index-6,this._index--):this._state=c},gt.prototype._stateBeforeStyle1=mt("Y",J),gt.prototype._stateBeforeStyle2=mt("L",Q),gt.prototype._stateBeforeStyle3=mt("E",Z),gt.prototype._stateBeforeStyle4=function(t){("/"===t||">"===t||pt(t))&&(this._special=dt),this._state=l,this._index--},gt.prototype._stateAfterStyle1=ft("Y",et,c),gt.prototype._stateAfterStyle2=ft("L",rt,c),gt.prototype._stateAfterStyle3=ft("E",it,c),gt.prototype._stateAfterStyle4=function(t){">"===t||pt(t)?(this._special=lt,this._state=p,this._sectionStart=this._index-5,this._index--):this._state=c},gt.prototype._stateBeforeEntity=ft("#",st,ot),gt.prototype._stateBeforeNumericEntity=ft("X",ct,at),gt.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var t=this._buffer.substring(this._sectionStart+1,this._index),e=this._xmlMode?o:n;e.hasOwnProperty(t)&&(this._emitPartial(e[t]),this._sectionStart=this._index+1)}},gt.prototype._parseLegacyEntity=function(){var t=this._sectionStart+1,e=this._index-t;for(e>6&&(e=6);e>=2;){var r=this._buffer.substr(t,e);if(s.hasOwnProperty(r))return this._emitPartial(s[r]),void(this._sectionStart+=e+1);e--}},gt.prototype._stateInNamedEntity=function(t){";"===t?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(t<"a"||t>"z")&&(t<"A"||t>"Z")&&(t<"0"||t>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==c?"="!==t&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},gt.prototype._decodeNumericEntity=function(t,e){var r=this._sectionStart+t;if(r!==this._index){var n=this._buffer.substring(r,this._index),s=parseInt(n,e);this._emitPartial(i(s)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},gt.prototype._stateInNumericEntity=function(t){";"===t?(this._decodeNumericEntity(2,10),this._sectionStart++):(t<"0"||t>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},gt.prototype._stateInHexEntity=function(t){";"===t?(this._decodeNumericEntity(3,16),this._sectionStart++):(t<"a"||t>"f")&&(t<"A"||t>"F")&&(t<"0"||t>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},gt.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===c?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},gt.prototype.write=function(t){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=t,this._parse()},gt.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var t=this._buffer.charAt(this._index);this._state===c?this._stateText(t):this._state===u?this._stateBeforeTagName(t):this._state===l?this._stateInTagName(t):this._state===d?this._stateBeforeCloseingTagName(t):this._state===p?this._stateInCloseingTagName(t):this._state===f?this._stateAfterCloseingTagName(t):this._state===h?this._stateInSelfClosingTag(t):this._state===m?this._stateBeforeAttributeName(t):this._state===g?this._stateInAttributeName(t):this._state===_?this._stateAfterAttributeName(t):this._state===b?this._stateBeforeAttributeValue(t):this._state===y?this._stateInAttributeValueDoubleQuotes(t):this._state===v?this._stateInAttributeValueSingleQuotes(t):this._state===S?this._stateInAttributeValueNoQuotes(t):this._state===w?this._stateBeforeDeclaration(t):this._state===T?this._stateInDeclaration(t):this._state===E?this._stateInProcessingInstruction(t):this._state===k?this._stateBeforeComment(t):this._state===A?this._stateInComment(t):this._state===I?this._stateAfterComment1(t):this._state===x?this._stateAfterComment2(t):this._state===O?this._stateBeforeCdata1(t):this._state===C?this._stateBeforeCdata2(t):this._state===D?this._stateBeforeCdata3(t):this._state===R?this._stateBeforeCdata4(t):this._state===N?this._stateBeforeCdata5(t):this._state===L?this._stateBeforeCdata6(t):this._state===M?this._stateInCdata(t):this._state===P?this._stateAfterCdata1(t):this._state===B?this._stateAfterCdata2(t):this._state===q?this._stateBeforeSpecial(t):this._state===U?this._stateBeforeSpecialEnd(t):this._state===F?this._stateBeforeScript1(t):this._state===j?this._stateBeforeScript2(t):this._state===V?this._stateBeforeScript3(t):this._state===H?this._stateBeforeScript4(t):this._state===G?this._stateBeforeScript5(t):this._state===z?this._stateAfterScript1(t):this._state===Y?this._stateAfterScript2(t):this._state===W?this._stateAfterScript3(t):this._state===$?this._stateAfterScript4(t):this._state===K?this._stateAfterScript5(t):this._state===X?this._stateBeforeStyle1(t):this._state===J?this._stateBeforeStyle2(t):this._state===Q?this._stateBeforeStyle3(t):this._state===Z?this._stateBeforeStyle4(t):this._state===tt?this._stateAfterStyle1(t):this._state===et?this._stateAfterStyle2(t):this._state===rt?this._stateAfterStyle3(t):this._state===it?this._stateAfterStyle4(t):this._state===nt?this._stateBeforeEntity(t):this._state===st?this._stateBeforeNumericEntity(t):this._state===ot?this._stateInNamedEntity(t):this._state===at?this._stateInNumericEntity(t):this._state===ct?this._stateInHexEntity(t):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},gt.prototype.pause=function(){this._running=!1},gt.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},gt.prototype.end=function(t){this._ended&&this._cbs.onerror(Error(".end() after done!")),t&&this.write(t),this._ended=!0,this._running&&this._finish()},gt.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},gt.prototype._handleTrailingData=function(){var t=this._buffer.substr(this._sectionStart);this._state===M||this._state===P||this._state===B?this._cbs.oncdata(t):this._state===A||this._state===I||this._state===x?this._cbs.oncomment(t):this._state!==ot||this._xmlMode?this._state!==at||this._xmlMode?this._state!==ct||this._xmlMode?this._state!==l&&this._state!==m&&this._state!==b&&this._state!==_&&this._state!==g&&this._state!==v&&this._state!==y&&this._state!==S&&this._state!==p&&this._cbs.ontext(t):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},gt.prototype.reset=function(){gt.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},gt.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},gt.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},gt.prototype._emitToken=function(t){this._cbs[t](this._getSection()),this._sectionStart=-1},gt.prototype._emitPartial=function(t){this._baseState!==c?this._cbs.onattribdata(t):this._cbs.ontext(t)}},5205:(t,e,r)=>{t.exports=r(2203)},5262:t=>{class e{static get BACKGROUND_LAYER(){return"background"}static get VIDEO_LAYER(){return"video"}static get PEN_LAYER(){return"pen"}static get SPRITE_LAYER(){return"sprite"}static get LAYER_GROUPS(){return[e.BACKGROUND_LAYER,e.VIDEO_LAYER,e.PEN_LAYER,e.SPRITE_LAYER]}}t.exports=e},5406:(t,e)=>{var r={bold:["[1m","[22m"],italic:["[3m","[23m"],underline:["[4m","[24m"],inverse:["[7m","[27m"],white:["[37m","[39m"],grey:["[90m","[39m"],black:["[30m","[39m"],blue:["[34m","[39m"],cyan:["[36m","[39m"],green:["[32m","[39m"],magenta:["[35m","[39m"],red:["[31m","[39m"],yellow:["[33m","[39m"]};e.R={debug:1,info:2,warn:3,error:4},e.i=function(t,e){return r[e][0]+t+r[e][1]}},5758:(t,e,r)=>{const i=r(2181);t.exports=class{constructor(t){this._maxTokens=t,this._refillInterval=1e3/t,this._count=this._maxTokens,this._timer=new i,this._timer.start(),this._lastUpdateTime=this._timer.timeElapsed()}okayToSend(){const t=this._timer.timeElapsed(),e=t-this._lastUpdateTime,r=Math.floor(e/this._refillInterval);return r>0&&(this._lastUpdateTime=t),this._count=Math.min(this._maxTokens,this._count+r),this._count>0&&(this._count--,!0)}}},5774:t=>{"use strict";t.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},6013:t=>{t.exports={ANGLE:"angle",BOOLEAN:"Boolean",COLOR:"color",NUMBER:"number",STRING:"string",MATRIX:"matrix",NOTE:"note",IMAGE:"image"}},6374:(t,e,r)=>{const i=r(4434),{OrderedMap:n}=r(9063),s=r(8474),o=r(6013),a=r(4766),c=r(764),u=r(4223),l=r(2397),h=r(8895),d=r(8193),p=r(4495),f=r(2615),m=r(9224),g=r(4586),_=r(3656),b=r(5262),y=r(4196),v=r(2301),S=r(2385),w=r(7179),T=r(9654),E=r(1761),k=r(2787),A=r(5075),I=r(9280),x=r(7877),O=r(875),C=r(6560),D=r(1398),R={scratch3_control:r(7769),scratch3_event:r(1628),scratch3_looks:r(9932),scratch3_motion:r(2044),scratch3_operators:r(4277),scratch3_sound:r(2531),scratch3_sensing:r(2261),scratch3_data:r(5094),scratch3_procedures:r(1740)},N=["#0FBD8C","#0DA57A","#0B8E69"],L=(()=>{const t={};return t[o.ANGLE]={shadow:{type:"math_angle",fieldName:"NUM"}},t[o.COLOR]={shadow:{type:"colour_picker",fieldName:"COLOUR"}},t[o.NUMBER]={shadow:{type:"math_number",fieldName:"NUM"}},t[o.STRING]={shadow:{type:"text",fieldName:"TEXT"}},t[o.BOOLEAN]={check:"Boolean"},t[o.MATRIX]={shadow:{type:"matrix",fieldName:"MATRIX"}},t[o.NOTE]={shadow:{type:"note",fieldName:"NOTE"}},t[o.IMAGE]={fieldType:"field_image"},t})(),M=()=>{let t=0;return{canAddCloudVariable:()=>t<10,addCloudVariable:()=>{t++},removeCloudVariable:()=>{t--},hasCloudVariables:()=>t>0}};let P=-1,B=-1,q=-1;class U extends i{constructor(){super(),this.targets=[],this.executableTargets=[],this.threads=[],this.sequencer=new h(this),this.flyoutBlocks=new a(this,!0),this.monitorBlocks=new a(this,!0),this._editingTarget=null,this._primitives={},this._blockInfo=[],this._hats={},this._scriptGlowsPreviousFrame=[],this._nonMonitorThreadCount=0,this._lastStepDoneThreads=null,this._cloneCounter=0,this._refreshTargets=!1,this.monitorBlockInfo={},this._monitorState=n({}),this._prevMonitorState=n({}),this.turboMode=!1,this.compatibilityMode=!1,this._steppingInterval=null,this.currentStepTime=null,this.updateCurrentMSecs(),this.redrawRequested=!1,this._registerBlockPackages(),this.ioDevices={clock:new T(this),cloud:new E(this),keyboard:new k(this),mouse:new A(this),mouseWheel:new I(this),userData:new x,video:new O(this)},this.peripheralExtensions={},this.profiler=null;const t=M();this.hasCloudData=t.hasCloudVariables,this.canAddCloudVariable=t.canAddCloudVariable,this.addCloudVariable=this._initializeAddCloudVariable(t),this.removeCloudVariable=this._initializeRemoveCloudVariable(t),this.origin=null,this._initScratchLink(),this.resetRunId()}static get STAGE_WIDTH(){return 480}static get STAGE_HEIGHT(){return 360}static get SCRIPT_GLOW_ON(){return"SCRIPT_GLOW_ON"}static get SCRIPT_GLOW_OFF(){return"SCRIPT_GLOW_OFF"}static get BLOCK_GLOW_ON(){return"BLOCK_GLOW_ON"}static get BLOCK_GLOW_OFF(){return"BLOCK_GLOW_OFF"}static get HAS_CLOUD_DATA_UPDATE(){return"HAS_CLOUD_DATA_UPDATE"}static get TURBO_MODE_ON(){return"TURBO_MODE_ON"}static get TURBO_MODE_OFF(){return"TURBO_MODE_OFF"}static get PROJECT_START(){return"PROJECT_START"}static get PROJECT_RUN_START(){return"PROJECT_RUN_START"}static get PROJECT_RUN_STOP(){return"PROJECT_RUN_STOP"}static get PROJECT_STOP_ALL(){return"PROJECT_STOP_ALL"}static get STOP_FOR_TARGET(){return"STOP_FOR_TARGET"}static get VISUAL_REPORT(){return"VISUAL_REPORT"}static get PROJECT_LOADED(){return"PROJECT_LOADED"}static get PROJECT_CHANGED(){return"PROJECT_CHANGED"}static get TOOLBOX_EXTENSIONS_NEED_UPDATE(){return"TOOLBOX_EXTENSIONS_NEED_UPDATE"}static get TARGETS_UPDATE(){return"TARGETS_UPDATE"}static get MONITORS_UPDATE(){return"MONITORS_UPDATE"}static get BLOCK_DRAG_UPDATE(){return"BLOCK_DRAG_UPDATE"}static get BLOCK_DRAG_END(){return"BLOCK_DRAG_END"}static get EXTENSION_ADDED(){return"EXTENSION_ADDED"}static get EXTENSION_FIELD_ADDED(){return"EXTENSION_FIELD_ADDED"}static get PERIPHERAL_LIST_UPDATE(){return"PERIPHERAL_LIST_UPDATE"}static get USER_PICKED_PERIPHERAL(){return"USER_PICKED_PERIPHERAL"}static get PERIPHERAL_CONNECTED(){return"PERIPHERAL_CONNECTED"}static get PERIPHERAL_DISCONNECTED(){return"PERIPHERAL_DISCONNECTED"}static get PERIPHERAL_REQUEST_ERROR(){return"PERIPHERAL_REQUEST_ERROR"}static get PERIPHERAL_CONNECTION_LOST_ERROR(){return"PERIPHERAL_CONNECTION_LOST_ERROR"}static get PERIPHERAL_SCAN_TIMEOUT(){return"PERIPHERAL_SCAN_TIMEOUT"}static get MIC_LISTENING(){return"MIC_LISTENING"}static get BLOCKSINFO_UPDATE(){return"BLOCKSINFO_UPDATE"}static get RUNTIME_STARTED(){return"RUNTIME_STARTED"}static get RUNTIME_DISPOSED(){return"RUNTIME_DISPOSED"}static get BLOCKS_NEED_UPDATE(){return"BLOCKS_NEED_UPDATE"}static get THREAD_STEP_INTERVAL(){return 1e3/60}static get THREAD_STEP_INTERVAL_COMPATIBILITY(){return 1e3/30}static get MAX_CLONES(){return 300}_initializeAddCloudVariable(t){return()=>{const e=this.hasCloudData();t.addCloudVariable(),!e&&this.hasCloudData()&&this.emit(U.HAS_CLOUD_DATA_UPDATE,!0)}}_initializeRemoveCloudVariable(t){return()=>{const e=this.hasCloudData();t.removeCloudVariable(),e&&!this.hasCloudData()&&this.emit(U.HAS_CLOUD_DATA_UPDATE,!1)}}_registerBlockPackages(){for(const t in R)if(Object.prototype.hasOwnProperty.call(R,t)){const e=new R[t](this);if(e.getPrimitives){const t=e.getPrimitives();for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this._primitives[r]=t[r].bind(e))}if(e.getHats){const t=e.getHats();for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this._hats[e]=t[e])}e.getMonitored&&(this.monitorBlockInfo=Object.assign({},this.monitorBlockInfo,e.getMonitored()))}}getMonitorState(){return this._monitorState}_makeExtensionMenuId(t,e){return`${e}_menu_${v(t)}`}makeMessageContextForTarget(t){(t=t||this.getEditingTarget()||this.getTargetForStage())&&(t.isStage?f.STAGE:f.SPRITE)}_registerExtensionPrimitives(t){const e={id:t.id,name:_(t.name),showStatusButton:t.showStatusButton,blockIconURI:t.blockIconURI,menuIconURI:t.menuIconURI};t.color1?(e.color1=t.color1,e.color2=t.color2,e.color3=t.color3):(e.color1=N[0],e.color2=N[1],e.color3=N[2]),this._blockInfo.push(e),this._fillExtensionCategory(e,t);for(const r in e.customFieldTypes)if(Object.prototype.hasOwnProperty.call(t.customFieldTypes,r)){const t=e.customFieldTypes[r];this.emit(U.EXTENSION_FIELD_ADDED,{name:`field_${t.extendedName}`,implementation:t.fieldImplementation})}this.emit(U.EXTENSION_ADDED,e)}_refreshExtensionPrimitives(t){const e=this._blockInfo.find((e=>e.id===t.id));e&&(e.name=_(t.name),this._fillExtensionCategory(e,t),this.emit(U.BLOCKSINFO_UPDATE,e))}_fillExtensionCategory(t,e){t.blocks=[],t.customFieldTypes={},t.menus=[],t.menuInfo={};for(const r in e.menus)if(Object.prototype.hasOwnProperty.call(e.menus,r)){const i=e.menus[r],n=this._buildMenuForScratchBlocks(r,i,t);t.menus.push(n),t.menuInfo[r]=i}for(const r in e.customFieldTypes)if(Object.prototype.hasOwnProperty.call(e.customFieldTypes,r)){const i=e.customFieldTypes[r],n=this._buildCustomFieldInfo(r,i,e.id,t);t.customFieldTypes[r]=n}for(const r of e.blocks)try{const e=this._convertForScratchBlocks(r,t);if(t.blocks.push(e),e.json){const t=e.json.type;r.blockType!==u.EVENT&&(this._primitives[t]=e.info.func),r.blockType!==u.EVENT&&r.blockType!==u.HAT||(this._hats[t]={edgeActivated:r.isEdgeActivated,restartExistingThreads:r.shouldRestartExistingThreads})}}catch(t){g.error("Error parsing block: ",{block:r,error:t})}}_convertMenuItems(t){if("function"!=typeof t){const e=this.makeMessageContextForTarget();return t.map((t=>{const r=_(t,e);switch(typeof r){case"string":return[r,r];case"object":return[_(t.text,e),t.value];default:throw new Error(`Can't interpret menu item: ${JSON.stringify(t)}`)}}))}return t}_buildMenuForScratchBlocks(t,e,r){const i=this._makeExtensionMenuId(t,r.id),n=this._convertMenuItems(e.items);return{json:{message0:"%1",type:i,inputsInline:!0,output:"String",colour:r.color1,colourSecondary:r.color2,colourTertiary:r.color3,outputShape:e.acceptReporters?p.OUTPUT_SHAPE_ROUND:p.OUTPUT_SHAPE_SQUARE,args0:[{type:"field_dropdown",name:t,options:n}]}}}_buildCustomFieldInfo(t,e,r,i){const n=`${r}_${t}`;return{fieldName:t,extendedName:n,argumentTypeInfo:{shadow:{type:n,fieldName:`field_${n}`}},scratchBlocksDefinition:this._buildCustomFieldTypeForScratchBlocks(n,e.output,e.outputShape,i),fieldImplementation:e.implementation}}_buildCustomFieldTypeForScratchBlocks(t,e,r,i){return{json:{type:t,message0:"%1",inputsInline:!0,output:e,colour:i.color1,colourSecondary:i.color2,colourTertiary:i.color3,outputShape:r,args0:[{name:`field_${t}`,type:`field_${t}`}]}}}_convertForScratchBlocks(t,e){return"---"===t?this._convertSeparatorForScratchBlocks(t):t.blockType===u.BUTTON?this._convertButtonForScratchBlocks(t):this._convertBlockForScratchBlocks(t,e)}_convertBlockForScratchBlocks(t,e){const r=`${e.id}_${t.opcode}`,i={type:r,inputsInline:!0,category:e.name,colour:e.color1,colourSecondary:e.color2,colourTertiary:e.color3},n={argsMap:{},blockJSON:i,categoryInfo:e,blockInfo:t,inputList:[]},s=t.blockIconURI||e.blockIconURI;if(s){i.extensions=["scratch_extension"],i.message0="%1 %2";const t={type:"field_image",src:s,width:40,height:40},e={type:"field_vertical_separator"};i.args0=[t,e]}switch(t.blockType){case u.COMMAND:i.outputShape=p.OUTPUT_SHAPE_SQUARE,i.previousStatement=null,t.isTerminal||(i.nextStatement=null);break;case u.REPORTER:i.output="String",i.outputShape=p.OUTPUT_SHAPE_ROUND;break;case u.BOOLEAN:i.output="Boolean",i.outputShape=p.OUTPUT_SHAPE_HEXAGONAL;break;case u.HAT:case u.EVENT:Object.prototype.hasOwnProperty.call(t,"isEdgeActivated")||(t.isEdgeActivated=!0),i.outputShape=p.OUTPUT_SHAPE_SQUARE,i.nextStatement=null;break;case u.CONDITIONAL:case u.LOOP:t.branchCount=t.branchCount||1,i.outputShape=p.OUTPUT_SHAPE_SQUARE,i.previousStatement=null,t.isTerminal||(i.nextStatement=null)}const o=Array.isArray(t.text)?t.text:[t.text];let a=0,c=0,l=0;const h=this._convertPlaceholders.bind(this,n),d=this.makeMessageContextForTarget();for(;a<o.length||c<t.branchCount;){if(a<o.length){n.outLineNum=l;const t=_(o[a],d).replace(/\[(.+?)]/g,h);i[`message${l}`]?i[`message${l}`]+=t:i[`message${l}`]=t,++a,++l}c<t.branchCount&&(i[`message${l}`]="%1",i[`args${l}`]=[{type:"input_statement",name:`SUBSTACK${c>0?c+1:""}`}],++c,++l)}t.blockType===u.REPORTER?t.disableMonitor||0!==n.inputList.length||(i.checkboxInFlyout=!0):t.blockType===u.LOOP&&(i[`lastDummyAlign${l}`]="RIGHT",i[`message${l}`]="%1",i[`args${l}`]=[{type:"field_image",src:"./static/blocks-media/repeat.svg",width:24,height:24,alt:"*",flip_rtl:!0}],++l);const f=`<block type="${r}">${t.isDynamic?`<mutation blockInfo="${v(JSON.stringify(t))}"/>`:""}${n.inputList.join("")}</block>`;return{info:n.blockInfo,json:n.blockJSON,xml:f}}_convertSeparatorForScratchBlocks(t){return{info:t,xml:'<sep gap="36"/>'}}_convertButtonForScratchBlocks(t){["MAKE_A_LIST","MAKE_A_PROCEDURE","MAKE_A_VARIABLE"].indexOf(t.func)<0&&g.error(`Custom button callbacks not supported yet: ${t.func}`);const e=this.makeMessageContextForTarget();return{info:t,xml:`<button text="${_(t.text,e)}" callbackKey="${t.func}"></button>`}}_constructInlineImageJson(t){return t.dataURI||g.warn("Missing data URI in extension block with argument type IMAGE"),{type:"field_image",src:t.dataURI||"",width:24,height:24,flip_rtl:t.flipRTL||!1}}_convertPlaceholders(t,e,r){r=r.replace(/[<"&]/,"_");const i=t.blockInfo.arguments[r]||{};let n,s=L[i.type]||{};if(!L[i.type]&&t.categoryInfo.customFieldTypes[i.type]&&(s=t.categoryInfo.customFieldTypes[i.type].argumentTypeInfo),"field_image"===s.fieldType)n=this._constructInlineImageJson(i);else{n={type:"input_value",name:r};const e=void 0===i.defaultValue?"":v(_(i.defaultValue,this.makeMessageContextForTarget()).toString());let o,a,c;if(s.check&&(n.check=s.check),i.menu){const e=t.categoryInfo.menuInfo[i.menu];e.acceptReporters?(o=r,a=this._makeExtensionMenuId(i.menu,t.categoryInfo.id),c=i.menu):(n.type="field_dropdown",n.options=this._convertMenuItems(e.items),o=null,a=null,c=r)}else o=r,a=s.shadow&&s.shadow.type||null,c=s.shadow&&s.shadow.fieldName||null;o&&t.inputList.push(`<value name="${r}">`),a&&t.inputList.push(`<shadow type="${a}">`),e&&c&&t.inputList.push(`<field name="${c}">${e}</field>`),a&&t.inputList.push("</shadow>"),o&&t.inputList.push("</value>")}const o=`args${t.outLineNum}`,a=t.blockJSON[o]=t.blockJSON[o]||[];n&&a.push(n);const c=a.length;return t.argsMap[r]=c,`%${c}`}getBlocksXML(t){return this._blockInfo.map((e=>{const{name:r,color1:i,color2:n}=e,s=e.blocks.filter((e=>{let r=!0;return t&&e.info.filter&&(r=e.info.filter.includes(t.isStage?f.STAGE:f.SPRITE)),r&&!e.info.hideFromPalette})),o=`colour="${i}" secondaryColour="${n}"`;let a="";e.menuIconURI?a=e.menuIconURI:e.blockIconURI&&(a=e.blockIconURI);const c=a?`iconURI="${a}"`:"";let u="";return e.showStatusButton&&(u='showStatusButton="true"'),{id:e.id,xml:`<category name="${r}" id="${e.id}" ${u} ${o} ${c}>${s.map((t=>t.xml)).join("")}</category>`}}))}getBlocksJSON(){return this._blockInfo.reduce(((t,e)=>t.concat(e.blocks.map((t=>t.json)))),[])}_initScratchLink(){if("undefined"!=typeof self&&"undefined"!=typeof document&&document.getElementById&&self.origin&&"null"!==self.origin&&self.navigator&&self.navigator.userAgent&&!self.navigator.userAgent.includes("Node.js")&&!self.navigator.userAgent.includes("jsdom")&&!document.getElementById("scratch-link-extension-script")){const t=document.createElement("script");t.id="scratch-link-extension-script",document.body.appendChild(t),self.postMessage("inject-scratch-link-script",self.origin)}}getScratchLinkSocket(t){return(this._linkSocketFactory||this._defaultScratchLinkSocketFactory)(t)}configureScratchLinkSocketFactory(t){this._linkSocketFactory=t}_defaultScratchLinkSocketFactory(t){const e=self.Scratch,r=e&&e.ScratchLinkSafariSocket;return r&&r.isSafariHelperCompatible()?new r(t):new S(t)}registerPeripheralExtension(t,e){this.peripheralExtensions[t]=e}scanForPeripheral(t){this.peripheralExtensions[t]&&this.peripheralExtensions[t].scan()}connectPeripheral(t,e){this.peripheralExtensions[t]&&this.peripheralExtensions[t].connect(e)}disconnectPeripheral(t){this.peripheralExtensions[t]&&this.peripheralExtensions[t].disconnect()}getPeripheralIsConnected(t){let e=!1;return this.peripheralExtensions[t]&&(e=this.peripheralExtensions[t].isConnected()),e}emitMicListening(t){this.emit(U.MIC_LISTENING,t)}getOpcodeFunction(t){return this._primitives[t]}getIsHat(t){return Object.prototype.hasOwnProperty.call(this._hats,t)}getIsEdgeActivatedHat(t){return Object.prototype.hasOwnProperty.call(this._hats,t)&&this._hats[t].edgeActivated}attachAudioEngine(t){this.audioEngine=t}attachRenderer(t){this.renderer=t,this.renderer.setLayerGroupOrdering(b.LAYER_GROUPS)}attachV2BitmapAdapter(t){this.v2BitmapAdapter=t}attachStorage(t){this.storage=t,w.setFetch(t.scratchFetch.scratchFetch),this.resetRunId()}_pushThread(t,e,r){const i=new m(t);return i.target=e,i.stackClick=Boolean(r&&r.stackClick),i.updateMonitor=Boolean(r&&r.updateMonitor),i.blockContainer=i.updateMonitor?this.monitorBlocks:e.blocks,i.pushStack(t),this.threads.push(i),i}_stopThread(t){t.isKilled=!0,this.sequencer.retireThread(t)}_restartThread(t){const e=new m(t.topBlock);e.target=t.target,e.stackClick=t.stackClick,e.updateMonitor=t.updateMonitor,e.blockContainer=t.blockContainer,e.pushStack(t.topBlock);const r=this.threads.indexOf(t);return r>-1?(this.threads[r]=e,e):(this.threads.push(t),t)}isActiveThread(t){return t.stack.length>0&&t.status!==m.STATUS_DONE&&this.threads.indexOf(t)>-1}isWaitingThread(t){return t.status===m.STATUS_PROMISE_WAIT||t.status===m.STATUS_YIELD_TICK||!this.isActiveThread(t)}toggleScript(t,e){e=Object.assign({target:this._editingTarget,stackClick:!1},e);for(let r=0;r<this.threads.length;r++)if(this.threads[r].topBlock===t&&this.threads[r].status!==m.STATUS_DONE){const i=e.target.blocks,n=i.getOpcode(i.getBlock(t));if(this.getIsEdgeActivatedHat(n)&&this.threads[r].stackClick!==e.stackClick)continue;return void this._stopThread(this.threads[r])}this._pushThread(t,e.target,e)}addMonitorScript(t,e){e||(e=this._editingTarget);for(let e=0;e<this.threads.length;e++)if(this.threads[e].topBlock===t&&this.threads[e].status!==m.STATUS_DONE&&this.threads[e].updateMonitor)return;this._pushThread(t,e,{updateMonitor:!0})}allScriptsDo(t,e){let r=this.executableTargets;e&&(r=[e]);for(let e=r.length-1;e>=0;e--){const i=r[e],n=i.blocks.getScripts();for(let e=0;e<n.length;e++)t(n[e],i)}}allScriptsByOpcodeDo(t,e,r){let i=this.executableTargets;r&&(i=[r]);for(let r=i.length-1;r>=0;r--){const n=i[r],s=c.getScripts(n.blocks,t);for(let t=0;t<s.length;t++)e(s[t],n)}}startHats(t,e,r){if(!Object.prototype.hasOwnProperty.call(this._hats,t))return;const i=[],n=this._hats[t];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=e[t].toUpperCase());return this.allScriptsByOpcodeDo(t,((t,r)=>{const{blockId:s,fieldsOfInputs:o}=t;for(const t in e)if(o[t].value!==e[t])return;if(n.restartExistingThreads){for(let t=0;t<this.threads.length;t++)if(this.threads[t].target===r&&this.threads[t].topBlock===s&&!this.threads[t].stackClick)return void i.push(this._restartThread(this.threads[t]))}else for(let t=0;t<this.threads.length;t++)if(this.threads[t].target===r&&this.threads[t].topBlock===s&&!this.threads[t].stackClick&&this.threads[t].status!==m.STATUS_DONE)return;i.push(this._pushThread(s,r))}),r),i.forEach((t=>{d(this.sequencer,t),t.goToNextBlock()})),i}dispose(){this.stopAll(),this.targets.forEach((t=>{t.isOriginal&&t.deleteMonitors()})),this.targets.map(this.disposeTarget,this),this._monitorState=n({}),this.emit(U.RUNTIME_DISPOSED),this.ioDevices.clock.resetProjectTimer(),this.hasCloudData()&&this.emit(U.HAS_CLOUD_DATA_UPDATE,!1),this.ioDevices.cloud.clear();const t=M();this.hasCloudData=t.hasCloudVariables,this.canAddCloudVariable=t.canAddCloudVariable,this.addCloudVariable=this._initializeAddCloudVariable(t),this.removeCloudVariable=this._initializeRemoveCloudVariable(t)}addTarget(t){this.targets.push(t),this.executableTargets.push(t)}moveExecutable(t,e){const r=this.executableTargets.indexOf(t);this.executableTargets.splice(r,1);let i=r+e;return i>this.executableTargets.length&&(i=this.executableTargets.length),i<=0&&(i=this.executableTargets.length>0&&this.executableTargets[0].isStage?1:0),this.executableTargets.splice(i,0,t),i}setExecutablePosition(t,e){const r=this.executableTargets.indexOf(t);return this.moveExecutable(t,e-r)}removeExecutable(t){const e=this.executableTargets.indexOf(t);e>-1&&this.executableTargets.splice(e,1)}disposeTarget(t){this.targets=this.targets.filter((e=>t!==e||(e.dispose(),!1)))}stopForTarget(t,e){this.emit(U.STOP_FOR_TARGET,t,e);for(let r=0;r<this.threads.length;r++)this.threads[r]!==e&&this.threads[r].target===t&&this._stopThread(this.threads[r])}resetRunId(){if(!this.storage)return;const t=s.v1();this.storage.scratchFetch.setMetadata(this.storage.scratchFetch.RequestMetadata.RunId,t)}greenFlag(){this.stopAll(),this.emit(U.PROJECT_START),this.ioDevices.clock.resetProjectTimer(),this.targets.forEach((t=>t.clearEdgeActivatedValues()));for(let t=0;t<this.targets.length;t++)this.targets[t].onGreenFlag();this.startHats("event_whenflagclicked")}stopAll(){this.emit(U.PROJECT_STOP_ALL);const t=[];for(let e=0;e<this.targets.length;e++)this.targets[e].onStopAll(),Object.prototype.hasOwnProperty.call(this.targets[e],"isOriginal")&&!this.targets[e].isOriginal?this.targets[e].dispose():t.push(this.targets[e]);this.targets=t,null!==this.sequencer.activeThread&&this._stopThread(this.sequencer.activeThread),this.threads=[],this.resetRunId()}_step(){null!==this.profiler&&(-1===P&&(P=this.profiler.idByName("Runtime._step")),this.profiler.start(P)),this.threads=this.threads.filter((t=>!t.isKilled));for(const t in this._hats)Object.prototype.hasOwnProperty.call(this._hats,t)&&this._hats[t].edgeActivated&&this.startHats(t);this.redrawRequested=!1,this._pushMonitors(),null!==this.profiler&&(-1===B&&(B=this.profiler.idByName("Sequencer.stepThreads")),this.profiler.start(B));const t=this.sequencer.stepThreads();null!==this.profiler&&this.profiler.stop(),this._updateGlows(t),this._emitProjectRunStatus(this.threads.length+t.length-this._getMonitorThreadCount([...this.threads,...t])),this._lastStepDoneThreads=t,this.renderer&&(null!==this.profiler&&(-1===q&&(q=this.profiler.idByName("RenderWebGL.draw")),this.profiler.start(q)),this.renderer.draw(),null!==this.profiler&&this.profiler.stop()),this._refreshTargets&&(this.emit(U.TARGETS_UPDATE,!1),this._refreshTargets=!1),this._prevMonitorState.equals(this._monitorState)||(this.emit(U.MONITORS_UPDATE,this._monitorState),this._prevMonitorState=this._monitorState),null!==this.profiler&&(this.profiler.stop(),this.profiler.reportFrames())}_getMonitorThreadCount(t){let e=0;return t.forEach((t=>{t.updateMonitor&&e++})),e}_pushMonitors(){this.monitorBlocks.runAllMonitored(this)}setEditingTarget(t){const e=this._editingTarget;this._editingTarget=t,this._scriptGlowsPreviousFrame=[],this._updateGlows(),e!==this._editingTarget&&this.requestToolboxExtensionsUpdate()}setCompatibilityMode(t){this.compatibilityMode=t,this._steppingInterval&&(clearInterval(this._steppingInterval),this._steppingInterval=null,this.start())}_updateGlows(t){const e=[];e.push(...this.threads),t&&e.push(...t);const r=[],i=[];for(let t=0;t<e.length;t++){const i=e[t],n=i.target;if(n===this._editingTarget){const t=i.blockGlowInFrame;if(i.requestScriptGlowInFrame||i.stackClick){let e=n.blocks.getTopLevelScript(t);e||(e=this.flyoutBlocks.getTopLevelScript(t)),e&&r.push(e)}}}for(let t=0;t<this._scriptGlowsPreviousFrame.length;t++){const e=this._scriptGlowsPreviousFrame[t];r.indexOf(e)<0?this.glowScript(e,!1):i.push(e)}for(let t=0;t<r.length;t++){const e=r[t];this._scriptGlowsPreviousFrame.indexOf(e)<0&&(this.glowScript(e,!0),i.push(e))}this._scriptGlowsPreviousFrame=i}_emitProjectRunStatus(t){0===this._nonMonitorThreadCount&&t>0&&this.emit(U.PROJECT_RUN_START),this._nonMonitorThreadCount>0&&0===t&&this.emit(U.PROJECT_RUN_STOP),this._nonMonitorThreadCount=t}quietGlow(t){const e=this._scriptGlowsPreviousFrame.indexOf(t);e>-1&&this._scriptGlowsPreviousFrame.splice(e,1)}glowBlock(t,e){e?this.emit(U.BLOCK_GLOW_ON,{id:t}):this.emit(U.BLOCK_GLOW_OFF,{id:t})}glowScript(t,e){e?this.emit(U.SCRIPT_GLOW_ON,{id:t}):this.emit(U.SCRIPT_GLOW_OFF,{id:t})}emitBlockDragUpdate(t){this.emit(U.BLOCK_DRAG_UPDATE,t)}emitBlockEndDrag(t,e){this.emit(U.BLOCK_DRAG_END,t,e)}visualReport(t,e){this.emit(U.VISUAL_REPORT,{id:t,value:String(e)})}requestAddMonitor(t){const e=t.get("id");this.requestUpdateMonitor(t)||(this._monitorState=this._monitorState.set(e,t))}requestUpdateMonitor(t){const e=t.get("id");return!!this._monitorState.has(e)&&(this._monitorState=this._monitorState.set(e,this._monitorState.get(e).mergeWith(((t,e)=>null==e?t:e),t)),!0)}requestRemoveMonitor(t){this._monitorState=this._monitorState.delete(t)}requestHideMonitor(t){return this.requestUpdateMonitor(new Map([["id",t],["visible",!1]]))}requestShowMonitor(t){return this.requestUpdateMonitor(new Map([["id",t],["visible",!0]]))}requestRemoveMonitorByTargetId(t){this._monitorState=this._monitorState.filterNot((e=>e.targetId===t))}getTargetById(t){for(let e=0;e<this.targets.length;e++){const r=this.targets[e];if(r.id===t)return r}}getSpriteTargetByName(t){for(let e=0;e<this.targets.length;e++){const r=this.targets[e];if(!r.isStage&&r.sprite&&r.sprite.name===t)return r}}getTargetByDrawableId(t){for(let e=0;e<this.targets.length;e++){const r=this.targets[e];if(r.drawableID===t)return r}}changeCloneCounter(t){this._cloneCounter+=t}clonesAvailable(){return this._cloneCounter<U.MAX_CLONES}handleProjectLoaded(){this.emit(U.PROJECT_LOADED),this.resetRunId()}emitProjectChanged(){this.emit(U.PROJECT_CHANGED)}fireTargetWasCreated(t,e){this.emit("targetWasCreated",t,e)}fireTargetWasRemoved(t){this.emit("targetWasRemoved",t)}getTargetForStage(){for(let t=0;t<this.targets.length;t++){const e=this.targets[t];if(e.isStage)return e}}getEditingTarget(){return this._editingTarget}getAllVarNamesOfType(t){let e=[];for(const r of this.targets){const i=r.getAllVariableNamesInScopeByType(t,!0);e=e.concat(i)}return e}getLabelForOpcode(t){const[e,r]=C.splitFirst(t,"_");if(!e||!r)return;const i=this._blockInfo.find((t=>t.id===e));if(!i)return;const n=i.blocks.find((t=>t.info.opcode===r));return n?{category:"extension",label:`${i.name}: ${n.info.text}`}:void 0}createNewGlobalVariable(t,e,r){const i="string"==typeof r?r:y.SCALAR_TYPE,n=this.getAllVarNamesOfType(i),s=C.unusedName(t,n),o=new y(e||D(),s,i);return this.getTargetForStage().variables[o.id]=o,o}requestRedraw(){this.redrawRequested=!0}requestTargetsUpdate(t){t.isOriginal&&(this._refreshTargets=!0)}requestBlocksUpdate(){this.emit(U.BLOCKS_NEED_UPDATE)}requestToolboxExtensionsUpdate(){this.emit(U.TOOLBOX_EXTENSIONS_NEED_UPDATE)}start(){if(this._steppingInterval)return;let t=U.THREAD_STEP_INTERVAL;this.compatibilityMode&&(t=U.THREAD_STEP_INTERVAL_COMPATIBILITY),this.currentStepTime=t,this._steppingInterval=setInterval((()=>{this._step()}),t),this.emit(U.RUNTIME_STARTED)}quit(){clearInterval(this._steppingInterval),this._steppingInterval=null}enableProfiling(t){l.available()&&(this.profiler=new l(t))}disableProfiling(){this.profiler=null}updateCurrentMSecs(){this.currentMSecs=Date.now()}}t.exports=U},6550:(t,e,r)=>{var i=r(9431),n=r(2490);function s(e,r){return delete t.exports[e],t.exports[e]=r,r}t.exports={Parser:i,Tokenizer:r(5139),ElementType:r(3562),DomHandler:n,get FeedHandler(){return s("FeedHandler",r(9094))},get Stream(){return s("Stream",r(8212))},get WritableStream(){return s("WritableStream",r(20))},get ProxyHandler(){return s("ProxyHandler",r(4788))},get DomUtils(){return s("DomUtils",r(6551))},get CollectingHandler(){return s("CollectingHandler",r(3584))},DefaultHandler:n,get RssHandler(){return s("RssHandler",this.FeedHandler)},parseDOM:function(t,e){var r=new n(e);return new i(r,e).end(t),r.dom},parseFeed:function(e,r){var n=new t.exports.FeedHandler(r);return new i(n,r).end(e),n.dom},createDomStream:function(t,e,r){var s=new n(t,e,r);return new i(s,e)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},6551:(t,e,r)=>{var i=t.exports;[r(510),r(4105),r(7694),r(2847),r(9328),r(1190)].forEach((function(t){Object.keys(t).forEach((function(e){i[e]=t[e].bind(i)}))}))},6560:(t,e,r)=>{const i=r(4586);class n{static withoutTrailingDigits(t){let e=t.length-1;for(;e>=0&&"0123456789".indexOf(t.charAt(e))>-1;)e--;return t.slice(0,e+1)}static unusedName(t,e){if(e.indexOf(t)<0)return t;t=n.withoutTrailingDigits(t);let r=2;for(;e.indexOf(t+r)>=0;)r++;return t+r}static splitFirst(t,e){const r=t.indexOf(e);return r>=0?[t.substring(0,r),t.substring(r+1)]:[t,null]}static stringify(t){return JSON.stringify(t,((t,e)=>"number"!=typeof e||e!==1/0&&e!==-1/0&&!isNaN(e)?e:0))}static replaceUnsafeChars(t){if("string"!=typeof t){if(!Array.isArray(t))return i.error("Unexpected input recieved in replaceUnsafeChars"),t;t=String(t)}return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"lt";case">":return"gt";case"&":return"amp";case"'":return"apos";case'"':return"quot"}}))}}t.exports=n},6680:(t,e,r)=>{var i=r(181),n=i.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=o),o.prototype=Object.create(n.prototype),s(n,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},6791:(t,e,r)=>{var i=r(887),n=r(5406).i,s=r(9023);function o(){}i.mixin(o),o.prototype.write=function(t,e,r){var i;this.emit("item",n(("0"+(i=new Date).getDate()).slice(-2)+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+i.getFullYear()+" "+("0"+i.getHours()).slice(-2)+":"+("0"+i.getMinutes()).slice(-2)+":"+("0"+i.getSeconds()).slice(-2)+"."+("00"+i.getMilliseconds()).slice(-3)+" ","grey")+(t?n(t+" ","grey"):"")+(e?n(e,{debug:"blue",info:"cyan",warn:"yellow",error:"red"}[e])+" ":"")+r.map((function(t){return"string"==typeof t?t:s.inspect(t,null,3,!0)})).join(" "))},t.exports=o},6913:(t,e,r)=>{"use strict";t.exports=n;var i=r(1771);function n(t){if(!(this instanceof n))return new n(t);i.call(this,t)}r(728)(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},6941:(t,e,r)=>{const i=r(889),n=r(6550),s=r(1398),o=function(t,e,r,n){t.attribs.id||(t.attribs.id=s());const a={id:t.attribs.id,opcode:t.attribs.type,inputs:{},fields:{},next:null,topLevel:r,parent:n,shadow:"shadow"===t.name,x:t.attribs.x,y:t.attribs.y};e[a.id]=a;for(let r=0;r<t.children.length;r++){const n=t.children[r];let s=null,c=null;for(let t=0;t<n.children.length;t++){const e=n.children[t];if(!e.name)continue;const r=e.name.toLowerCase();"block"===r?s=e:"shadow"===r&&(c=e)}switch(!s&&c&&(s=c),n.name.toLowerCase()){case"field":{const t=n.attribs.name,e=n.attribs.id;let r="";r=n.children.length>0&&n.children[0].data?n.children[0].data:"",a.fields[t]={name:t,id:e,value:r};const i=n.attribs.variabletype;"string"==typeof i&&(a.fields[t].variableType=i);break}case"comment":a.comment=n.attribs.id;break;case"value":case"statement":{o(s,e,!1,a.id),c&&s!==c&&o(c,e,!1,a.id);const t=n.attribs.name;a.inputs[t]={name:t,block:s.attribs.id,shadow:c?c.attribs.id:null};break}case"next":if(!s||!s.attribs)continue;o(s,e,!1,a.id),a.next=s.attribs.id;break;case"mutation":a.mutation=i(n)}}};t.exports=function(t){if("object"==typeof t&&"object"==typeof t.xml)return function(t){const e={};for(let r=0;r<t.length;r++){const i=t[r];if(!i.name||!i.attribs)continue;const n=i.name.toLowerCase();"block"!==n&&"shadow"!==n||o(i,e,!0,null)}const r=[];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(e[t]);return r}(n.parseDOM(t.xml.outerHTML,{decodeEntities:!0}))}},7023:(t,e,r)=>{"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(undefined),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var n;t.exports=E,E.WritableState=T;var s,o={deprecate:r(1226)},a=r(5205),c=r(181).Buffer,u=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},l=r(3659),h=r(1108).getHighWaterMark,d=r(2758).F,p=d.ERR_INVALID_ARG_TYPE,f=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,_=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,y=d.ERR_STREAM_WRITE_AFTER_END,v=d.ERR_UNKNOWN_ENCODING,S=l.errorOrDestroy;function w(){}function T(t,e,s){n=n||r(1221),t=t||{},"boolean"!=typeof s&&(s=e instanceof n),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=h(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new m;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(C,t,e),t._writableState.errorEmitted=!0,S(t,i)):(n(i),t._writableState.errorEmitted=!0,S(t,i),C(t,e))}(t,r,i,e,n);else{var s=x(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||I(t,r),i?process.nextTick(A,t,r,s,n):A(t,r,s,n)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function E(t){var e=this instanceof(n=n||r(1221));if(!e&&!s.call(E,this))return new E(t);this._writableState=new T(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function k(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function A(t,e,r,i){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),C(t,e)}function I(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,k(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,h=r.callback;if(k(t,e,!1,e.objectMode?1:u.length,u,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(r){e.pendingcb--,r&&S(t,r),e.prefinished=!0,t.emit("prefinish"),C(t,e)}))}function C(t,e){var r=x(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(O,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(728)(E,a),T.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(T.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!s.call(this,t)||this===E&&t&&t._writableState instanceof T}})):s=function(t){return t instanceof this},E.prototype.pipe=function(){S(this,new g)},E.prototype.write=function(t,e,r){var i,n=this._writableState,s=!1,o=!n.objectMode&&(i=t,c.isBuffer(i)||i instanceof u);return o&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=w),n.ending?function(t,e){var r=new y;S(t,r),process.nextTick(e,r)}(this,r):(o||function(t,e,r,i){var n;return null===r?n=new b:"string"==typeof r||e.objectMode||(n=new p("chunk",["string","Buffer"],r)),!n||(S(t,n),process.nextTick(i,n),!1)}(this,n,t,r))&&(n.pendingcb++,s=function(t,e,r,i,n,s){if(!r){var o=function(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,r)),e}(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else k(t,e,!1,a,i,n,s);return u}(this,n,o,t,e,r)),s},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||I(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new v(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,r){r(new f("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,r){var i=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,C(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=l.destroy,E.prototype._undestroy=l.undestroy,E.prototype._destroy=function(t,e){e(t)}},7179:t=>{let e=global.fetch;t.exports={fetchWithTimeout:(t,r,i)=>{let n=null;const s=window.AbortController?new window.AbortController:null,o=s?s.signal:null;return Promise.race([e(t,Object.assign({signal:o},r)).then((t=>(clearTimeout(n),t))),new Promise(((t,e)=>{n=setTimeout((()=>{s&&s.abort(),e(new Error(`Fetch timed out after ${i} ms`))}),i)}))])},setFetch:t=>{e=t}}},7205:(t,e,r)=>{var i=r(887),n=r(204),s={debug:["cyan"],info:["purple"],warn:["yellow",!0],error:["red",!0]},o=new i;o.write=function(t,e,r){console.log,console[e]&&console[e].apply&&console[e].apply(console,["%c"+t+" %c"+e,n("gray"),n.apply(n,s[e])].concat(r))},o.pipe=function(){},t.exports=o},7221:(t,e,r)=>{const i=r(7553);t.exports=class extends i{constructor(t,e,r,i,n=null){super(),this._socket=t.getScratchLinkSocket("BLE"),this._socket.setOnOpen(this.requestPeripheral.bind(this)),this._socket.setOnClose(this.handleDisconnectError.bind(this)),this._socket.setOnError(this._handleRequestError.bind(this)),this._socket.setHandleMessage(this._handleMessage.bind(this)),this._sendMessage=this._socket.sendMessage.bind(this._socket),this._availablePeripherals={},this._connectCallback=i,this._connected=!1,this._characteristicDidChangeCallback=null,this._resetCallback=n,this._discoverTimeoutID=null,this._extensionId=e,this._peripheralOptions=r,this._runtime=t,this._socket.open()}requestPeripheral(){this._availablePeripherals={},this._discoverTimeoutID&&window.clearTimeout(this._discoverTimeoutID),this._discoverTimeoutID=window.setTimeout(this._handleDiscoverTimeout.bind(this),15e3),this.sendRemoteRequest("discover",this._peripheralOptions).catch((t=>{this._handleRequestError(t)}))}connectPeripheral(t){this.sendRemoteRequest("connect",{peripheralId:t}).then((()=>{this._connected=!0,this._runtime.emit(this._runtime.constructor.PERIPHERAL_CONNECTED),this._connectCallback()})).catch((t=>{this._handleRequestError(t)}))}disconnect(){this._connected&&(this._connected=!1),this._socket.isOpen()&&this._socket.close(),this._discoverTimeoutID&&window.clearTimeout(this._discoverTimeoutID),this._runtime.emit(this._runtime.constructor.PERIPHERAL_DISCONNECTED)}isConnected(){return this._connected}startNotifications(t,e,r=null){const i={serviceId:t,characteristicId:e};return this._characteristicDidChangeCallback=r,this.sendRemoteRequest("startNotifications",i).catch((t=>{this.handleDisconnectError(t)}))}read(t,e,r=!1,i=null){const n={serviceId:t,characteristicId:e};return r&&(n.startNotifications=!0),i&&(this._characteristicDidChangeCallback=i),this.sendRemoteRequest("read",n).catch((t=>{this.handleDisconnectError(t)}))}write(t,e,r,i=null,n=null){const s={serviceId:t,characteristicId:e,message:r};return i&&(s.encoding=i),null!==n&&(s.withResponse=n),this.sendRemoteRequest("write",s).catch((t=>{this.handleDisconnectError(t)}))}didReceiveCall(t,e){switch(t){case"didDiscoverPeripheral":this._availablePeripherals[e.peripheralId]=e,this._runtime.emit(this._runtime.constructor.PERIPHERAL_LIST_UPDATE,this._availablePeripherals),this._discoverTimeoutID&&window.clearTimeout(this._discoverTimeoutID);break;case"userDidPickPeripheral":this._availablePeripherals[e.peripheralId]=e,this._runtime.emit(this._runtime.constructor.USER_PICKED_PERIPHERAL,this._availablePeripherals),this._discoverTimeoutID&&window.clearTimeout(this._discoverTimeoutID);break;case"userDidNotPickPeripheral":this._runtime.emit(this._runtime.constructor.PERIPHERAL_SCAN_TIMEOUT),this._discoverTimeoutID&&window.clearTimeout(this._discoverTimeoutID);break;case"characteristicDidChange":this._characteristicDidChangeCallback&&this._characteristicDidChangeCallback(e.message);break;case"ping":return 42}}handleDisconnectError(){this._connected&&(this.disconnect(),this._resetCallback&&this._resetCallback(),this._runtime.emit(this._runtime.constructor.PERIPHERAL_CONNECTION_LOST_ERROR,{message:"Scratch lost connection to",extensionId:this._extensionId}))}_handleRequestError(){this._runtime.emit(this._runtime.constructor.PERIPHERAL_REQUEST_ERROR,{message:"Scratch lost connection to",extensionId:this._extensionId})}_handleDiscoverTimeout(){this._discoverTimeoutID&&window.clearTimeout(this._discoverTimeoutID),this._runtime.emit(this._runtime.constructor.PERIPHERAL_SCAN_TIMEOUT)}}},7538:function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=void 0;var n=l(i(r(1330)).default),s=h(n);e.encodeXML=g(n);var o,a,c=l(i(r(5774)).default),u=h(c);function l(t){return Object.keys(t).sort().reduce((function(e,r){return e[t[r]]="&"+r+";",e}),{})}function h(t){for(var e=[],r=[],i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];1===s.length?e.push("\\"+s):r.push(s)}e.sort();for(var o=0;o<e.length-1;o++){for(var a=o;a<e.length-1&&e[a].charCodeAt(1)+1===e[a+1].charCodeAt(1);)a+=1;var c=1+a-o;c<3||e.splice(o,c,e[o]+"-"+e[a])}return r.unshift("["+e.join("")+"]"),new RegExp(r.join("|"),"g")}e.encodeHTML=(o=c,a=u,function(t){return t.replace(a,(function(t){return o[t]})).replace(d,f)}),e.encodeNonAsciiHTML=g(c);var d=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,p=null!=String.prototype.codePointAt?function(t){return t.codePointAt(0)}:function(t){return 1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536};function f(t){return"&#x"+(t.length>1?p(t):t.charCodeAt(0)).toString(16).toUpperCase()+";"}var m=new RegExp(s.source+"|"+d.source,"g");function g(t){return function(e){return e.replace(m,(function(e){return t[e]||f(e)}))}}e.escape=function(t){return t.replace(m,f)},e.escapeUTF8=function(t){return t.replace(s,f)}},7553:t=>{t.exports=class{constructor(){this._requestID=0,this._openRequests={}}sendRemoteRequest(t,e){const r=this._requestID++,i=new Promise(((t,e)=>{this._openRequests[r]={resolve:t,reject:e}}));return this._sendRequest(t,e,r),i}sendRemoteNotification(t,e){this._sendRequest(t,e)}didReceiveCall(){throw new Error("Must override didReceiveCall")}_sendMessage(){throw new Error("Must override _sendMessage")}_sendRequest(t,e,r){const i={jsonrpc:"2.0",method:t,params:e};null!==r&&(i.id=r),this._sendMessage(i)}_handleMessage(t){if("2.0"!==t.jsonrpc)throw new Error(`Bad or missing JSON-RPC version in message: ${t}`);Object.prototype.hasOwnProperty.call(t,"method")?this._handleRequest(t):this._handleResponse(t)}_sendResponse(t,e,r){const i={jsonrpc:"2.0",id:t};r?i.error=r:i.result=e||null,this._sendMessage(i)}_handleResponse(t){const{result:e,error:r,id:i}=t,n=this._openRequests[i];delete this._openRequests[i],n&&(r?n.reject(r):n.resolve(e))}_handleRequest(t){const{method:e,params:r,id:i}=t,n=this.didReceiveCall(e,r);null!=i&&Promise.resolve(n).then((t=>{this._sendResponse(i,t)}),(t=>{this._sendResponse(i,null,t)}))}}},7694:(t,e)=>{e.removeElement=function(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){var e=t.parent.children;e.splice(e.lastIndexOf(t),1)}},e.replaceElement=function(t,e){var r=e.prev=t.prev;r&&(r.next=e);var i=e.next=t.next;i&&(i.prev=e);var n=e.parent=t.parent;if(n){var s=n.children;s[s.lastIndexOf(t)]=e}},e.appendChild=function(t,e){if(e.parent=t,1!==t.children.push(e)){var r=t.children[t.children.length-2];r.next=e,e.prev=r,e.next=null}},e.append=function(t,e){var r=t.parent,i=t.next;if(e.next=i,e.prev=t,t.next=e,e.parent=r,i){if(i.prev=e,r){var n=r.children;n.splice(n.lastIndexOf(i),0,e)}}else r&&r.children.push(e)},e.prepend=function(t,e){var r=t.parent;if(r){var i=r.children;i.splice(i.lastIndexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=r,e.prev=t.prev,e.next=t,t.prev=e}},7747:(t,e,r)=>{"use strict";var i,n=r(2758).F,s=n.ERR_MISSING_ARGS,o=n.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function c(t){t()}function u(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var l,h=function(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new s("streams");var d=e.map((function(t,n){var s=n<e.length-1;return function(t,e,n,s){s=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),void 0===i&&(i=r(9249)),i(t,{readable:e,writable:n},(function(t){if(t)return s(t);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}(t,s,n>0,(function(t){l||(l=t),t&&d.forEach(c),s||(d.forEach(c),h(l))}))}));return e.reduce(u)}},7769:(t,e,r)=>{const i=r(8833);t.exports=class{constructor(t){this.runtime=t,this._counter=0,this.runtime.on("RUNTIME_DISPOSED",this.clearCounter.bind(this))}getPrimitives(){return{control_repeat:this.repeat,control_repeat_until:this.repeatUntil,control_while:this.repeatWhile,control_for_each:this.forEach,control_forever:this.forever,control_wait:this.wait,control_wait_until:this.waitUntil,control_if:this.if,control_if_else:this.ifElse,control_stop:this.stop,control_create_clone_of:this.createClone,control_delete_this_clone:this.deleteClone,control_get_counter:this.getCounter,control_incr_counter:this.incrCounter,control_clear_counter:this.clearCounter,control_all_at_once:this.allAtOnce}}getHats(){return{control_start_as_clone:{restartExistingThreads:!1}}}repeat(t,e){const r=Math.round(i.toNumber(t.TIMES));void 0===e.stackFrame.loopCounter&&(e.stackFrame.loopCounter=r),e.stackFrame.loopCounter--,e.stackFrame.loopCounter>=0&&e.startBranch(1,!0)}repeatUntil(t,e){i.toBoolean(t.CONDITION)||e.startBranch(1,!0)}repeatWhile(t,e){i.toBoolean(t.CONDITION)&&e.startBranch(1,!0)}forEach(t,e){const r=e.target.lookupOrCreateVariable(t.VARIABLE.id,t.VARIABLE.name);void 0===e.stackFrame.index&&(e.stackFrame.index=0),e.stackFrame.index<Number(t.VALUE)&&(e.stackFrame.index++,r.value=e.stackFrame.index,e.startBranch(1,!0))}waitUntil(t,e){i.toBoolean(t.CONDITION)||e.yield()}forever(t,e){e.startBranch(1,!0)}wait(t,e){if(e.stackTimerNeedsInit()){const r=Math.max(0,1e3*i.toNumber(t.DURATION));e.startStackTimer(r),this.runtime.requestRedraw(),e.yield()}else e.stackTimerFinished()||e.yield()}if(t,e){i.toBoolean(t.CONDITION)&&e.startBranch(1,!1)}ifElse(t,e){i.toBoolean(t.CONDITION)?e.startBranch(1,!1):e.startBranch(2,!1)}stop(t,e){const r=t.STOP_OPTION;"all"===r?e.stopAll():"other scripts in sprite"===r||"other scripts in stage"===r?e.stopOtherTargetThreads():"this script"===r&&e.stopThisScript()}createClone(t,e){let r;if(t.CLONE_OPTION=i.toString(t.CLONE_OPTION),r="_myself_"===t.CLONE_OPTION?e.target:this.runtime.getSpriteTargetByName(t.CLONE_OPTION),!r)return;const n=r.makeClone();n&&(this.runtime.addTarget(n),n.goBehindOther(r))}deleteClone(t,e){e.target.isOriginal||(this.runtime.disposeTarget(e.target),this.runtime.stopForTarget(e.target))}getCounter(){return this._counter}clearCounter(){this._counter=0}incrCounter(){this._counter++}allAtOnce(t,e){e.startBranch(1,!1)}}},7822:t=>{"use strict";t.exports=JSON.parse('{"elementNames":{"altglyph":"altGlyph","altglyphdef":"altGlyphDef","altglyphitem":"altGlyphItem","animatecolor":"animateColor","animatemotion":"animateMotion","animatetransform":"animateTransform","clippath":"clipPath","feblend":"feBlend","fecolormatrix":"feColorMatrix","fecomponenttransfer":"feComponentTransfer","fecomposite":"feComposite","feconvolvematrix":"feConvolveMatrix","fediffuselighting":"feDiffuseLighting","fedisplacementmap":"feDisplacementMap","fedistantlight":"feDistantLight","fedropshadow":"feDropShadow","feflood":"feFlood","fefunca":"feFuncA","fefuncb":"feFuncB","fefuncg":"feFuncG","fefuncr":"feFuncR","fegaussianblur":"feGaussianBlur","feimage":"feImage","femerge":"feMerge","femergenode":"feMergeNode","femorphology":"feMorphology","feoffset":"feOffset","fepointlight":"fePointLight","fespecularlighting":"feSpecularLighting","fespotlight":"feSpotLight","fetile":"feTile","feturbulence":"feTurbulence","foreignobject":"foreignObject","glyphref":"glyphRef","lineargradient":"linearGradient","radialgradient":"radialGradient","textpath":"textPath"},"attributeNames":{"definitionurl":"definitionURL","attributename":"attributeName","attributetype":"attributeType","basefrequency":"baseFrequency","baseprofile":"baseProfile","calcmode":"calcMode","clippathunits":"clipPathUnits","diffuseconstant":"diffuseConstant","edgemode":"edgeMode","filterunits":"filterUnits","glyphref":"glyphRef","gradienttransform":"gradientTransform","gradientunits":"gradientUnits","kernelmatrix":"kernelMatrix","kernelunitlength":"kernelUnitLength","keypoints":"keyPoints","keysplines":"keySplines","keytimes":"keyTimes","lengthadjust":"lengthAdjust","limitingconeangle":"limitingConeAngle","markerheight":"markerHeight","markerunits":"markerUnits","markerwidth":"markerWidth","maskcontentunits":"maskContentUnits","maskunits":"maskUnits","numoctaves":"numOctaves","pathlength":"pathLength","patterncontentunits":"patternContentUnits","patterntransform":"patternTransform","patternunits":"patternUnits","pointsatx":"pointsAtX","pointsaty":"pointsAtY","pointsatz":"pointsAtZ","preservealpha":"preserveAlpha","preserveaspectratio":"preserveAspectRatio","primitiveunits":"primitiveUnits","refx":"refX","refy":"refY","repeatcount":"repeatCount","repeatdur":"repeatDur","requiredextensions":"requiredExtensions","requiredfeatures":"requiredFeatures","specularconstant":"specularConstant","specularexponent":"specularExponent","spreadmethod":"spreadMethod","startoffset":"startOffset","stddeviation":"stdDeviation","stitchtiles":"stitchTiles","surfacescale":"surfaceScale","systemlanguage":"systemLanguage","tablevalues":"tableValues","targetx":"targetX","targety":"targetY","textlength":"textLength","viewbox":"viewBox","viewtarget":"viewTarget","xchannelselector":"xChannelSelector","ychannelselector":"yChannelSelector","zoomandpan":"zoomAndPan"}}')},7877:t=>{t.exports=class{constructor(){this._username=""}postData(t){this._username=t.username}getUsername(){return this._username}}},7905:t=>{"use strict";function e(t){return Buffer.from(t,"base64").toString("binary")}t.exports=e.atob=e},7909:(t,e)=>{"use strict";var r="{",i="}",n=",",s="#",o="<",a=">",c="</",u="'",l=["number","date","time","ordinal","duration","spellout"],h=["plural","select","selectordinal"];function d(t,e){var r=t.pattern,n=r.length,s=[],o=t.index,a=p(t,e);for(a&&s.push(a),a&&t.tokens&&t.tokens.push(["text",r.slice(o,t.index)]);t.index<n;){if(r[t.index]===i){if(!e)throw S(t);break}if(e&&t.tagsType&&r.slice(t.index,t.index+2)===c)break;s.push(g(t)),o=t.index,(a=p(t,e))&&s.push(a),a&&t.tokens&&t.tokens.push(["text",r.slice(o,t.index)])}return s}function p(t,e){for(var n=t.pattern,a=n.length,c="plural"===e||"selectordinal"===e,l=!!t.tagsType,h="{style}"===e,d="";t.index<a;){var p=n[t.index];if(p===r||p===i||c&&p===s||l&&p===o||h&&f(p.charCodeAt(0)))break;if(p===u)if((p=n[++t.index])===u)d+=p,++t.index;else if(p===r||p===i||c&&p===s||l&&p===o||h)for(d+=p;++t.index<a;)if((p=n[t.index])===u&&n[t.index+1]===u)d+=u,++t.index;else{if(p===u){++t.index;break}d+=p}else d+=u;else d+=p,++t.index}return d}function f(t){return t>=9&&t<=13||32===t||133===t||160===t||6158===t||t>=8192&&t<=8205||8232===t||8233===t||8239===t||8287===t||8288===t||12288===t||65279===t}function m(t){for(var e=t.pattern,r=e.length,i=t.index;t.index<r&&f(e.charCodeAt(t.index));)++t.index;i<t.index&&t.tokens&&t.tokens.push(["space",t.pattern.slice(i,t.index)])}function g(t){var e=t.pattern;if(e[t.index]===s)return t.tokens&&t.tokens.push(["syntax",s]),++t.index,[s];var u=function(t){var e=t.tagsType;if(e&&t.pattern[t.index]===o){if(t.pattern.slice(t.index,t.index+2)===c)throw S(t,null,"closing tag without matching opening tag");t.tokens&&t.tokens.push(["syntax",o]),++t.index;var r=_(t,!0);if(!r)throw S(t,"placeholder id");if(t.tokens&&t.tokens.push(["id",r]),m(t),"/>"===t.pattern.slice(t.index,t.index+2))return t.tokens&&t.tokens.push(["syntax","/>"]),t.index+=2,[r,e];if(t.pattern[t.index]!==a)throw S(t,a);t.tokens&&t.tokens.push(["syntax",a]),++t.index;var i=d(t,e),n=t.index;if(t.pattern.slice(t.index,t.index+2)!==c)throw S(t,c+r+a);t.tokens&&t.tokens.push(["syntax",c]),t.index+=2;var s=_(t,!0);if(s&&t.tokens&&t.tokens.push(["id",s]),r!==s)throw t.index=n,S(t,c+r+a,c+s+a);if(m(t),t.pattern[t.index]!==a)throw S(t,a);return t.tokens&&t.tokens.push(["syntax",a]),++t.index,[r,e,{children:i}]}}(t);if(u)return u;if(e[t.index]!==r)throw S(t,r);t.tokens&&t.tokens.push(["syntax",r]),++t.index,m(t);var h=_(t);if(!h)throw S(t,"placeholder id");t.tokens&&t.tokens.push(["id",h]),m(t);var p=e[t.index];if(p===i)return t.tokens&&t.tokens.push(["syntax",i]),++t.index,[h];if(p!==n)throw S(t,", or }");t.tokens&&t.tokens.push(["syntax",n]),++t.index,m(t);var f,g=_(t);if(!g)throw S(t,"placeholder type");if(t.tokens&&t.tokens.push(["type",g]),m(t),(p=e[t.index])===i){if(t.tokens&&t.tokens.push(["syntax",i]),"plural"===g||"selectordinal"===g||"select"===g)throw S(t,g+" sub-messages");return++t.index,[h,g]}if(p!==n)throw S(t,", or }");if(t.tokens&&t.tokens.push(["syntax",n]),++t.index,m(t),"plural"===g||"selectordinal"===g){var v=function(t){var e,r=t.pattern,i=r.length,n=0;if("offset:"===r.slice(t.index,t.index+7)){t.tokens&&t.tokens.push(["offset","offset"],["syntax",":"]),t.index+=7,m(t);for(var s=t.index;t.index<i&&((e=r.charCodeAt(t.index))>=48&&e<=57);)++t.index;if(s===t.index)throw S(t,"offset number");t.tokens&&t.tokens.push(["number",r.slice(s,t.index)]),n=+r.slice(s,t.index)}return n}(t);m(t),f=[h,g,v,y(t,g)]}else if("select"===g)f=[h,g,y(t,g)];else if(l.indexOf(g)>=0)f=[h,g,b(t)];else{var w=t.index,T=b(t);m(t),e[t.index]===r&&(t.index=w,T=y(t,g)),f=[h,g,T]}if(m(t),e[t.index]!==i)throw S(t,i);return t.tokens&&t.tokens.push(["syntax",i]),++t.index,f}function _(t,e){for(var c=t.pattern,l=c.length,h="";t.index<l;){var d=c[t.index];if(d===r||d===i||d===n||d===s||d===u||f(d.charCodeAt(0))||e&&(d===o||d===a||"/"===d))break;h+=d,++t.index}return h}function b(t){var e=t.index,r=p(t,"{style}");if(!r)throw S(t,"placeholder style name");return t.tokens&&t.tokens.push(["style",t.pattern.slice(e,t.index)]),r}function y(t,e){for(var r=t.pattern,n=r.length,s={};t.index<n&&r[t.index]!==i;){var o=_(t);if(!o)throw S(t,"sub-message selector");t.tokens&&t.tokens.push(["selector",o]),m(t),s[o]=v(t,e),m(t)}if(!s.other&&h.indexOf(e)>=0)throw S(t,null,null,'"other" sub-message must be specified in '+e);return s}function v(t,e){if(t.pattern[t.index]!==r)throw S(t,"{ to start sub-message");t.tokens&&t.tokens.push(["syntax",r]),++t.index;var n=d(t,e);if(t.pattern[t.index]!==i)throw S(t,"} to end sub-message");return t.tokens&&t.tokens.push(["syntax",i]),++t.index,n}function S(t,e,r,i){var n=t.pattern,s=n.slice(0,t.index).split(/\r?\n/),o=t.index,a=s.length,c=s.slice(-1)[0].length;return r=r||(t.index>=n.length?"end of message pattern":_(t)||n[t.index]),i||(i=function(t,e){return t?"Expected "+t+" but found "+e:"Unexpected "+e+" found"}(e,r)),new w(i+=" in "+n.replace(/\r?\n/g,"\n"),e,r,o,a,c)}function w(t,e,r,i,n,s){Error.call(this,t),this.name="SyntaxError",this.message=t,this.expected=e,this.found=r,this.offset=i,this.line=n,this.column=s}e=t.exports=function(t,e){return d({pattern:String(t),index:0,tagsType:e&&e.tagsType||null,tokens:e&&e.tokens||null},"")},w.prototype=Object.create(Error.prototype),e.SyntaxError=w},7985:(t,e,r)=>{var i=r(887),n=r(204),s={debug:["gray"],info:["purple"],warn:["yellow",!0],error:["red",!0]},o=new i;o.write=function(t,e,r){var i=console.log;"debug"!=e&&console[e]&&(i=console[e]);var o=0;if("info"!=e){for(;o<r.length&&"string"==typeof r[o];o++);i.apply(console,["%c"+t+" "+r.slice(0,o).join(" "),n.apply(n,s[e])].concat(r.slice(o)))}else i.apply(console,["%c"+t,n.apply(n,s[e])].concat(r))},o.pipe=function(){},t.exports=o},8193:(t,e,r)=>{const i=r(3698),n=r(8971),s=r(4586),o=r(9224),{Map:a}=r(9063),c=r(8833),u=new i;let l=-1;const h=function(t,e,r,i,n){const s=i.id,c=i.opcode,u=i._isHat;if(r.pushReportedValue(t),u)if(e.runtime.getIsEdgeActivatedHat(c)){if(!r.stackClick){const i=r.target.hasEdgeActivatedValue(s),n=r.target.updateEdgeActivatedValue(s,t);(i?!n&&t:t)||e.retireThread(r)}}else t||e.retireThread(r);else{if(n&&void 0!==t&&r.atStackTop()&&(r.stackClick&&e.runtime.visualReport(s,t),r.updateMonitor)){const r=e.runtime.monitorBlocks.getBlock(s).targetId;if(r&&!e.runtime.getTargetById(r))return;e.runtime.requestUpdateMonitor(a({id:s,spriteName:r?e.runtime.getTargetById(r).getName():null,value:t}))}r.status=o.STATUS_RUNNING}},d=(t,e,r,i,n)=>{r.status===o.STATUS_RUNNING&&(r.status=o.STATUS_PROMISE_WAIT),t.then((t=>{if(h(t,e,r,i,n),n){let t,e;do{const i=r.popStack();if(null===i)return;if(e=r.target.blocks.getNextBlock(i),null!==e)break;t=r.peekStackFrame()}while(null!==t&&!t.isLoop);r.pushStack(e)}}),(t=>{s.warn("Primitive rejected promise: ",t),r.status=o.STATUS_RUNNING,r.popStack()}))};class p{constructor(t,e){this.id=e.id,this.opcode=e.opcode,this.fields=e.fields,this.inputs=e.inputs,this.mutation=e.mutation,this._profiler=null,this._profilerFrame=null,this._isHat=!1,this._blockFunction=null,this._definedBlockFunction=!1,this._isShadowBlock=!1,this._shadowValue=null,this._fields=Object.assign({},this.fields),this._inputs=Object.assign({},this.inputs),this._argValues={mutation:this.mutation},this._parentKey=null,this._parentValues=null,this._ops=[];const{runtime:r}=u.sequencer,{opcode:i,fields:s,inputs:o}=this;this._isHat=r.getIsHat(i),this._blockFunction=r.getOpcodeFunction(i),this._definedBlockFunction=void 0!==this._blockFunction;const a=Object.keys(s);this._isShadowBlock=!this._definedBlockFunction&&1===a.length&&0===Object.keys(o).length,this._shadowValue=this._isShadowBlock&&s[a[0]].value;for(const t in s)this._argValues[t]="VARIABLE"===t||"LIST"===t||"BROADCAST_OPTION"===t?{id:s[t].id,name:s[t].value}:s[t].value;if(delete this._inputs.custom_block,"BROADCAST_INPUT"in this._inputs){this._argValues.BROADCAST_OPTION={id:null,name:null};const e=this._inputs.BROADCAST_INPUT;if(e.block===e.shadow){const r=t.getBlock(e.shadow).fields.BROADCAST_OPTION;this._argValues.BROADCAST_OPTION.id=r.id,this._argValues.BROADCAST_OPTION.name=r.value,delete this._inputs.BROADCAST_INPUT}}for(const e in this._inputs){const r=this._inputs[e];if(r.block){const i=n.getCached(t,r.block,p);if(i._isHat)continue;this._ops.push(...i._ops),i._parentKey=e,i._parentValues=this._argValues,i._isShadowBlock&&(this._argValues[e]=i._shadowValue)}}this._definedBlockFunction&&this._ops.push(this)}}t.exports=function(t,e){const r=t.runtime;u.sequencer=t,u.thread=e;const i=e.peekStack(),s=e.peekStackFrame();let a=e.blockContainer,f=n.getCached(a,i,p);if(null===f&&(a=r.flyoutBlocks,f=n.getCached(a,i,p),null===f))return void t.retireThread(e);const m=f._ops,g=m.length;let _=0;if(null!==s.reported){const t=s.reported;for(;_<t.length;_++){const{opCached:e,inputValue:r}=t[_],i=m.find((t=>t.id===e));if(i){const t=i._parentKey,e=i._parentValues;"BROADCAST_INPUT"===t?(e.BROADCAST_OPTION.id=null,e.BROADCAST_OPTION.name=c.toString(r)):e[t]=r}}if(t.length>0){const e=t.reverse().find((t=>m.find((e=>e.id===t.opCached))));_=e?m.findIndex((t=>t.id===e.opCached))+1:0}if(null!==e.justReported&&m[_]&&m[_].id===s.reporting){const t=m[_],r=e.justReported;e.justReported=null;const i=t._parentKey,n=t._parentValues;"BROADCAST_INPUT"===i?(n.BROADCAST_OPTION.id=null,n.BROADCAST_OPTION.name=c.toString(r)):n[i]=r,_+=1}s.reporting=null,s.reported=null}const b=_;for(;_<g;_++){const r=_===g-1,i=m[_],n=i._blockFunction,l=i._argValues;a.forceNoGlow||(e.requestScriptGlowInFrame=!0);const p=n(l,u);if(null!==(y=p)&&"object"==typeof y&&"function"==typeof y.then){d(p,t,e,i,r),e.justReported=null,s.reporting=m[_].id,s.reported=m.slice(0,_).map((t=>{const e=t._parentKey,r=t._parentValues;return"BROADCAST_INPUT"===e?{opCached:t.id,inputValue:r[e].BROADCAST_OPTION.name}:{opCached:t.id,inputValue:r[e]}}));break}if(e.status===o.STATUS_RUNNING)if(r)h(p,t,e,i,r);else{const t=i._parentKey,e=i._parentValues;"BROADCAST_INPUT"===t?(e.BROADCAST_OPTION.id=null,e.BROADCAST_OPTION.name=c.toString(p)):e[t]=p}}var y;if(null!==r.profiler){f._profiler!==r.profiler&&function(t,e){e._profiler=t,-1===l&&(l=t.idByName("blockFunction"));const r=e._ops;for(let e=0;e<r.length;e++)r[e]._profilerFrame=t.frame(l,r[e].opcode)}(r.profiler,f);const t=Math.min(_+1,g);for(let e=b;e<t;e++)m[e]._profilerFrame.count+=1}}},8212:(t,e,r)=>{t.exports=n;var i=r(20);function n(t){i.call(this,new s(this),t)}function s(t){this.scope=t}r(728)(n,i),n.prototype.readable=!0;var o=r(6550).EVENTS;Object.keys(o).forEach((function(t){if(0===o[t])s.prototype["on"+t]=function(){this.scope.emit(t)};else if(1===o[t])s.prototype["on"+t]=function(e){this.scope.emit(t,e)};else{if(2!==o[t])throw Error("wrong number of arguments!");s.prototype["on"+t]=function(e,r){this.scope.emit(t,e,r)}}}))},8251:t=>{class e{static _mergeVarRefObjects(t,e){for(const r in e)t[r]?t[r]=t[r].concat(e[r]):t[r]=e[r];return t}static getAllVarRefsForTargets(t,r){return t.map((t=>t.blocks.getAllVariableAndListReferences(null,r))).reduce(e._mergeVarRefObjects,{})}static updateVariableIdentifiers(t,e,r){t.map((t=>(t.referencingField.id=e,r&&(t.referencingField.value=r),t)))}}t.exports=e},8271:(t,e,r)=>{var i=r(887),n=r(5406).i;function s(){}i.mixin(s),s.prototype.write=function(t,e,r){this.emit("item",(t?n(t+" ","grey"):"")+(e?n(e,{debug:"grey",info:"cyan",warn:"yellow",error:"red"}[e])+" ":"")+r.join(" "))},t.exports=s},8272:(t,e,r)=>{var i=r(887),n=r(9449),s=new i,o=Array.prototype.slice;(e=t.exports=function(t){var r=function(){return s.write(t,void 0,o.call(arguments)),r};return r.debug=function(){return s.write(t,"debug",o.call(arguments)),r},r.info=function(){return s.write(t,"info",o.call(arguments)),r},r.warn=function(){return s.write(t,"warn",o.call(arguments)),r},r.error=function(){return s.write(t,"error",o.call(arguments)),r},r.log=r.debug,r.suggest=e.suggest,r.format=s.format,r}).defaultBackend=e.defaultFormatter=null,e.pipe=function(t){return s.pipe(t)},e.end=e.unpipe=e.disable=function(t){return s.unpipe(t)},e.Transform=i,e.Filter=n,e.suggest=new n,e.enable=function(){return e.defaultFormatter?s.pipe(e.suggest).pipe(e.defaultFormatter).pipe(e.defaultBackend):s.pipe(e.suggest).pipe(e.defaultBackend)}},8287:(t,e,r)=>{function i(){}r(887).mixin(i),i.prototype.write=function(){console.log.apply(console,arguments)};var n=new i;r(5406).R,n.filterEnv=function(){return console.error("Minilog.backends.console.filterEnv is deprecated in Minilog v2."),r(8272)},n.formatters=["formatClean","formatColor","formatNpm","formatLearnboost","formatMinilog","formatWithStack","formatTime"],n.formatClean=new(r(789)),n.formatColor=new(r(9747)),n.formatNpm=new(r(2121)),n.formatLearnboost=new(r(8271)),n.formatMinilog=new(r(3483)),n.formatWithStack=new(r(4916)),n.formatTime=new(r(6791)),t.exports=n},8290:(t,e,r)=>{var i=r(5076),n=t.exports=Object.create(i),s={tagName:"name"};Object.keys(s).forEach((function(t){var e=s[t];Object.defineProperty(n,t,{get:function(){return this[e]||null},set:function(t){return this[e]=t,t}})}))},8298:t=>{"use strict";t.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},8313:(t,e,r)=>{var i=r(2203);"disable"===process.env.READABLE_STREAM&&i?(t.exports=i.Readable,Object.assign(t.exports,i),t.exports.Stream=i):((e=t.exports=r(4715)).Stream=i||e,e.Readable=e,e.Writable=r(7023),e.Duplex=r(1221),e.Transform=r(1771),e.PassThrough=r(6913),e.finished=r(9249),e.pipeline=r(7747))},8341:(t,e,r)=>{var i=r(4204);t.exports=function(t){if(t>=55296&&t<=57343||t>1114111)return"�";t in i&&(t=i[t]);var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+String.fromCharCode(t)}},8467:(t,e,r)=>{"use strict";var i=r(802),n=r(9127),s=r(500);function o(t,e,r,i,n){var s=t.map((function(t){return function(t,e,r,i,n){if("string"==typeof t){var s=t;return function(){return s}}var c,u=t[0],l=t[1];if(e&&"#"===t[0]){u=e[0];var h=e[2],p=(i.number||d.number)([u,"number"],r);return function(t){return p(a(u,t)-h,t)}}"plural"===l||"selectordinal"===l?(c={},Object.keys(t[3]).forEach((function(e){c[e]=o(t[3][e],t,r,i,n)})),t=[t[0],t[1],t[2],c]):t[2]&&"object"==typeof t[2]&&(c={},Object.keys(t[2]).forEach((function(e){c[e]=o(t[2][e],t,r,i,n)})),t=[t[0],t[1],c]);var f=l&&(i[l]||d[l]);if(f){var m=f(t,r);return function(t){return m(a(u,t),t)}}return n?function(t){return String(a(u,t))}:function(t){return a(u,t)}}(t,e,r,i,n)}));return n?1===s.length?s[0]:function(t){for(var e="",r=0;r<s.length;++r)e+=s[r](t);return e}:function(t){return s.reduce((function(e,r){return e.concat(r(t))}),[])}}function a(t,e){if(e&&t in e)return e[t];for(var r=t.split("."),i=e,n=0,s=r.length;i&&n<s;++n)i=i[r[n]];return i}function c(t,e){var r=t[2],n=i.number[r]||i.parseNumberPattern(r)||i.number.default;return new Intl.NumberFormat(e,n).format}function u(t,e){var r=t[1],n=t[2],s=i[r][n]||i.parseDatePattern(n)||i[r].default;return new Intl.DateTimeFormat(e,s).format}function l(t,e){var r,i="selectordinal"===t[1]?"ordinal":"cardinal",o=t[2],a=t[3];if(Intl.PluralRules&&Intl.PluralRules.supportedLocalesOf(e).length>0)r=new Intl.PluralRules(e,{type:i});else{var c=n(e,s),u=c&&s[c][i]||h;r={select:u}}return function(t,e){return(a["="+ +t]||a[r.select(t-o)]||a.other)(e)}}function h(){return"other"}(e=t.exports=function(t,e,r){return o(t,null,e||"en",r||{},!0)}).toParts=function(t,e,r){return o(t,null,e||"en",r||{},!1)};var d={number:c,ordinal:c,spellout:c,duration:function(t,e){var r=t[2],n=i.duration[r]||i.duration.default,s=new Intl.NumberFormat(e,n.seconds).format,o=new Intl.NumberFormat(e,n.minutes).format,a=new Intl.NumberFormat(e,n.hours).format,c=/^fi$|^fi-|^da/.test(String(e))?".":":";return function(t,e){if(t=+t,!isFinite(t))return s(t);var r=~~(t/60/60),i=~~(t/60%60),n=(r?a(Math.abs(r))+c:"")+o(Math.abs(i))+c+s(Math.abs(t%60));return t<0?a(-1).replace(a(1),n):n}},date:u,time:u,plural:l,selectordinal:l,select:function(t,e){var r=t[2];return function(t,e){return(r[t]||r.other)(e)}}};e.types=d},8474:(t,e,r)=>{"use strict";r.r(e),r.d(e,{NIL:()=>w,parse:()=>_,stringify:()=>h,v1:()=>g,v3:()=>y,v4:()=>v,v5:()=>S,validate:()=>u,version:()=>T});const i=require("crypto");var n=r.n(i);const s=new Uint8Array(256);let o=s.length;function a(){return o>s.length-16&&(n().randomFillSync(s),o=0),s.slice(o,o+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(t){return"string"==typeof t&&c.test(t)},l=[];for(let t=0;t<256;++t)l.push((t+256).toString(16).substr(1));const h=function(t,e=0){const r=(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let d,p,f=0,m=0;const g=function(t,e,r){let i=e&&r||0;const n=e||new Array(16);let s=(t=t||{}).node||d,o=void 0!==t.clockseq?t.clockseq:p;if(null==s||null==o){const e=t.random||(t.rng||a)();null==s&&(s=d=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==o&&(o=p=16383&(e[6]<<8|e[7]))}let c=void 0!==t.msecs?t.msecs:Date.now(),u=void 0!==t.nsecs?t.nsecs:m+1;const l=c-f+(u-m)/1e4;if(l<0&&void 0===t.clockseq&&(o=o+1&16383),(l<0||c>f)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,m=u,p=o,c+=122192928e5;const g=(1e4*(268435455&c)+u)%4294967296;n[i++]=g>>>24&255,n[i++]=g>>>16&255,n[i++]=g>>>8&255,n[i++]=255&g;const _=c/4294967296*1e4&268435455;n[i++]=_>>>8&255,n[i++]=255&_,n[i++]=_>>>24&15|16,n[i++]=_>>>16&255,n[i++]=o>>>8|128,n[i++]=255&o;for(let t=0;t<6;++t)n[i+t]=s[t];return e||h(n)},_=function(t){if(!u(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r};function b(t,e,r){function i(t,i,n,s){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof i&&(i=_(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+t.length);if(o.set(i),o.set(t,i.length),o=r(o),o[6]=15&o[6]|e,o[8]=63&o[8]|128,n){s=s||0;for(let t=0;t<16;++t)n[s+t]=o[t];return n}return h(o)}try{i.name=t}catch(t){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}const y=b("v3",48,(function(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),n().createHash("md5").update(t).digest()})),v=function(t,e,r){const i=(t=t||{}).random||(t.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=i[t];return e}return h(i)},S=b("v5",80,(function(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),n().createHash("sha1").update(t).digest()})),w="00000000-0000-0000-0000-000000000000",T=function(t){if(!u(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},8833:(t,e,r)=>{const i=r(231);class n{static toNumber(t){if("number"==typeof t)return Number.isNaN(t)?0:t;const e=Number(t);return Number.isNaN(e)?0:e}static toBoolean(t){return"boolean"==typeof t?t:"string"==typeof t?""!==t&&"0"!==t&&"false"!==t.toLowerCase():Boolean(t)}static toString(t){return String(t)}static toRgbColorList(t){const e=n.toRgbColorObject(t);return[e.r,e.g,e.b]}static toRgbColorObject(t){let e;return"string"==typeof t&&"#"===t.substring(0,1)?(e=i.hexToRgb(t),e||(e={r:0,g:0,b:0,a:255})):e=i.decimalToRgb(n.toNumber(t)),e}static isWhiteSpace(t){return null===t||"string"==typeof t&&0===t.trim().length}static compare(t,e){let r=Number(t),i=Number(e);if(0===r&&n.isWhiteSpace(t)?r=NaN:0===i&&n.isWhiteSpace(e)&&(i=NaN),isNaN(r)||isNaN(i)){const r=String(t).toLowerCase(),i=String(e).toLowerCase();return r<i?-1:r>i?1:0}return r===1/0&&i===1/0||r===-1/0&&i===-1/0?0:r-i}static isInt(t){return"number"==typeof t?!!isNaN(t)||t===parseInt(t,10):"boolean"==typeof t||"string"==typeof t&&t.indexOf(".")<0}static get LIST_INVALID(){return"INVALID"}static get LIST_ALL(){return"ALL"}static toListIndex(t,e,r){if("number"!=typeof t){if("all"===t)return r?n.LIST_ALL:n.LIST_INVALID;if("last"===t)return e>0?e:n.LIST_INVALID;if("random"===t||"any"===t)return e>0?1+Math.floor(Math.random()*e):n.LIST_INVALID}return(t=Math.floor(n.toNumber(t)))<1||t>e?n.LIST_INVALID:t}}t.exports=n},8895:(t,e,r)=>{const i=r(2181),n=r(9224),s=r(8193);let o=-1,a=-1,c=-1;class u{constructor(t){this.timer=new i,this.runtime=t,this.activeThread=null}static get WARP_TIME(){return 500}stepThreads(){const t=.75*this.runtime.currentStepTime;this.runtime.updateCurrentMSecs(),this.timer.start();let e=1/0,r=!1;const i=[];for(;this.runtime.threads.length>0&&e>0&&this.timer.timeElapsed()<t&&(this.runtime.turboMode||!this.runtime.redrawRequested);){null!==this.runtime.profiler&&(-1===a&&(a=this.runtime.profiler.idByName("Sequencer.stepThreads#inner")),this.runtime.profiler.start(a)),e=0;let t=!1;const s=this.runtime.threads;for(let i=0;i<s.length;i++){const a=this.activeThread=s[i];0!==a.stack.length&&a.status!==n.STATUS_DONE?(a.status!==n.STATUS_YIELD_TICK||r||(a.status=n.STATUS_RUNNING),a.status!==n.STATUS_RUNNING&&a.status!==n.STATUS_YIELD||(null!==this.runtime.profiler&&(-1===o&&(o=this.runtime.profiler.idByName("Sequencer.stepThread")),this.runtime.profiler.increment(o)),this.stepThread(a),a.warpTimer=null,a.isKilled&&i--),a.status===n.STATUS_RUNNING&&e++,0!==a.stack.length&&a.status!==n.STATUS_DONE||(t=!0)):t=!0}if(r=!0,null!==this.runtime.profiler&&this.runtime.profiler.stop(),t){let t=0;for(let e=0;e<this.runtime.threads.length;e++){const r=this.runtime.threads[e];0!==r.stack.length&&r.status!==n.STATUS_DONE?(this.runtime.threads[t]=r,t++):i.push(r)}this.runtime.threads.length=t}}return this.activeThread=null,i}stepThread(t){let e=t.peekStack();if(e||(t.popStack(),0!==t.stack.length))for(;e=t.peekStack();){let r=t.peekStackFrame().warpMode;if(r&&!t.warpTimer&&(t.warpTimer=new i,t.warpTimer.start()),null!==this.runtime.profiler&&(-1===c&&(c=this.runtime.profiler.idByName("execute")),this.runtime.profiler.increment(c)),null===t.target?this.retireThread(t):s(this,t),t.blockGlowInFrame=e,t.status===n.STATUS_YIELD){if(t.status=n.STATUS_RUNNING,r&&t.warpTimer.timeElapsed()<=u.WARP_TIME)continue;return}if(t.status===n.STATUS_PROMISE_WAIT)return;if(t.status===n.STATUS_YIELD_TICK)return;for(t.peekStack()===e&&t.goToNextBlock();!t.peekStack();){if(t.popStack(),0===t.stack.length)return void(t.status=n.STATUS_DONE);const e=t.peekStackFrame();if(r=e.warpMode,e.isLoop){if(!r||t.warpTimer.timeElapsed()>u.WARP_TIME)return}else{if(e.waitingReporter)return;t.goToNextBlock()}}}else t.status=n.STATUS_DONE}stepToBranch(t,e,r){e||(e=1);const i=t.peekStack(),n=t.target.blocks.getBranch(i,e);t.peekStackFrame().isLoop=r,n?t.pushStack(n):t.pushStack(null)}stepToProcedure(t,e){const r=t.target.blocks.getProcedureDefinition(e);if(!r)return;const i=t.isRecursiveCall(e);if(t.pushStack(r),t.peekStackFrame().warpMode&&t.warpTimer.timeElapsed()>u.WARP_TIME)t.status=n.STATUS_YIELD;else{const e=t.target.blocks.getBlock(r),s=t.target.blocks.getBlock(e.inputs.custom_block.block);let o=!1;if(s&&s.mutation){const t=s.mutation.warp;"boolean"==typeof t?o=t:"string"==typeof t&&(o=JSON.parse(t))}o?t.peekStackFrame().warpMode=!0:i&&(t.status=n.STATUS_YIELD)}}retireThread(t){t.stack=[],t.stackFrame=[],t.requestScriptGlowInFrame=!1,t.status=n.STATUS_DONE}}t.exports=u},8971:(t,e,r)=>{e.getCached=function(){throw new Error("blocks.js has not initialized BlocksExecuteCache")},r(4766)},9023:t=>{"use strict";t.exports=require("util")},9063:function(t){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function r(t){return o(t)?t:H(t)}function i(t){return a(t)?t:G(t)}function n(t){return c(t)?t:z(t)}function s(t){return o(t)&&!u(t)?t:Y(t)}function o(t){return!(!t||!t[h])}function a(t){return!(!t||!t[d])}function c(t){return!(!t||!t[p])}function u(t){return a(t)||c(t)}function l(t){return!(!t||!t[f])}e(i,r),e(n,r),e(s,r),r.isIterable=o,r.isKeyed=a,r.isIndexed=c,r.isAssociative=u,r.isOrdered=l,r.Keyed=i,r.Indexed=n,r.Set=s;var h="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",f="@@__IMMUTABLE_ORDERED__@@",m="delete",g=32,_=31,b={},y={value:!1},v={value:!1};function S(t){return t.value=!1,t}function w(t){t&&(t.value=!0)}function T(){}function E(t,e){e=e||0;for(var r=Math.max(0,t.length-e),i=new Array(r),n=0;n<r;n++)i[n]=t[n+e];return i}function k(t){return void 0===t.size&&(t.size=t.__iterate(I)),t.size}function A(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?k(t)+e:e}function I(){return!0}function x(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function O(t,e){return D(t,e,0)}function C(t,e){return D(t,e,e)}function D(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var R="function"==typeof Symbol&&Symbol.iterator,N="@@iterator",L=R||N;function M(t){this.next=t}function P(t,e,r,i){var n=0===t?e:1===t?r:[e,r];return i?i.value=n:i={value:n,done:!1},i}function B(){return{value:void 0,done:!0}}function q(t){return!!j(t)}function U(t){return t&&"function"==typeof t.next}function F(t){var e=j(t);return e&&e.call(t)}function j(t){var e=t&&(R&&t[R]||t[N]);if("function"==typeof e)return e}function V(t){return t&&"number"==typeof t.length}function H(t){return null==t?rt():o(t)?t.toSeq():function(t){var e=st(t)||"object"==typeof t&&new Q(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function G(t){return null==t?rt().toKeyedSeq():o(t)?a(t)?t.toSeq():t.fromEntrySeq():it(t)}function z(t){return null==t?rt():o(t)?a(t)?t.entrySeq():t.toIndexedSeq():nt(t)}function Y(t){return(null==t?rt():o(t)?a(t)?t.entrySeq():t:nt(t)).toSetSeq()}M.prototype.toString=function(){return"[Iterator]"},M.KEYS=0,M.VALUES=1,M.ENTRIES=2,M.prototype.inspect=M.prototype.toSource=function(){return this.toString()},M.prototype[L]=function(){return this},e(H,r),H.of=function(){return H(arguments)},H.prototype.toSeq=function(){return this},H.prototype.toString=function(){return this.__toString("Seq {","}")},H.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},H.prototype.__iterate=function(t,e){return ot(this,t,e,!0)},H.prototype.__iterator=function(t,e){return at(this,t,e,!0)},e(G,H),G.prototype.toKeyedSeq=function(){return this},e(z,H),z.of=function(){return z(arguments)},z.prototype.toIndexedSeq=function(){return this},z.prototype.toString=function(){return this.__toString("Seq [","]")},z.prototype.__iterate=function(t,e){return ot(this,t,e,!1)},z.prototype.__iterator=function(t,e){return at(this,t,e,!1)},e(Y,H),Y.of=function(){return Y(arguments)},Y.prototype.toSetSeq=function(){return this},H.isSeq=et,H.Keyed=G,H.Set=Y,H.Indexed=z;var W,$,K,X="@@__IMMUTABLE_SEQ__@@";function J(t){this._array=t,this.size=t.length}function Q(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function Z(t){this._iterable=t,this.size=t.length||t.size}function tt(t){this._iterator=t,this._iteratorCache=[]}function et(t){return!(!t||!t[X])}function rt(){return W||(W=new J([]))}function it(t){var e=Array.isArray(t)?new J(t).fromEntrySeq():U(t)?new tt(t).fromEntrySeq():q(t)?new Z(t).fromEntrySeq():"object"==typeof t?new Q(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function nt(t){var e=st(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function st(t){return V(t)?new J(t):U(t)?new tt(t):q(t)?new Z(t):void 0}function ot(t,e,r,i){var n=t._cache;if(n){for(var s=n.length-1,o=0;o<=s;o++){var a=n[r?s-o:o];if(!1===e(a[1],i?a[0]:o,t))return o+1}return o}return t.__iterateUncached(e,r)}function at(t,e,r,i){var n=t._cache;if(n){var s=n.length-1,o=0;return new M((function(){var t=n[r?s-o:o];return o++>s?{value:void 0,done:!0}:P(e,i?t[0]:o-1,t[1])}))}return t.__iteratorUncached(e,r)}function ct(t,e){return e?ut(e,t,"",{"":t}):lt(t)}function ut(t,e,r,i){return Array.isArray(e)?t.call(i,r,z(e).map((function(r,i){return ut(t,r,i,e)}))):ht(e)?t.call(i,r,G(e).map((function(r,i){return ut(t,r,i,e)}))):e}function lt(t){return Array.isArray(t)?z(t).map(lt).toList():ht(t)?G(t).map(lt).toMap():t}function ht(t){return t&&(t.constructor===Object||void 0===t.constructor)}function dt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function pt(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||c(t)!==c(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!u(t);if(l(t)){var i=t.entries();return e.every((function(t,e){var n=i.next().value;return n&&dt(n[1],t)&&(r||dt(n[0],e))}))&&i.next().done}var n=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{n=!0;var s=t;t=e,e=s}var h=!0,d=e.__iterate((function(e,i){if(r?!t.has(e):n?!dt(e,t.get(i,b)):!dt(t.get(i,b),e))return h=!1,!1}));return h&&t.size===d}function ft(t,e){if(!(this instanceof ft))return new ft(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if($)return $;$=this}}function mt(t,e){if(!t)throw new Error(e)}function gt(t,e,r){if(!(this instanceof gt))return new gt(t,e,r);if(mt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(K)return K;K=this}}function _t(){throw TypeError("Abstract")}function bt(){}function yt(){}function vt(){}H.prototype[X]=!0,e(J,z),J.prototype.get=function(t,e){return this.has(t)?this._array[A(this,t)]:e},J.prototype.__iterate=function(t,e){for(var r=this._array,i=r.length-1,n=0;n<=i;n++)if(!1===t(r[e?i-n:n],n,this))return n+1;return n},J.prototype.__iterator=function(t,e){var r=this._array,i=r.length-1,n=0;return new M((function(){return n>i?{value:void 0,done:!0}:P(t,n,r[e?i-n++:n++])}))},e(Q,G),Q.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},Q.prototype.has=function(t){return this._object.hasOwnProperty(t)},Q.prototype.__iterate=function(t,e){for(var r=this._object,i=this._keys,n=i.length-1,s=0;s<=n;s++){var o=i[e?n-s:s];if(!1===t(r[o],o,this))return s+1}return s},Q.prototype.__iterator=function(t,e){var r=this._object,i=this._keys,n=i.length-1,s=0;return new M((function(){var o=i[e?n-s:s];return s++>n?{value:void 0,done:!0}:P(t,o,r[o])}))},Q.prototype[f]=!0,e(Z,z),Z.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=F(this._iterable),i=0;if(U(r))for(var n;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},Z.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=F(this._iterable);if(!U(r))return new M(B);var i=0;return new M((function(){var e=r.next();return e.done?e:P(t,i++,e.value)}))},e(tt,z),tt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r,i=this._iterator,n=this._iteratorCache,s=0;s<n.length;)if(!1===t(n[s],s++,this))return s;for(;!(r=i.next()).done;){var o=r.value;if(n[s]=o,!1===t(o,s++,this))break}return s},tt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,i=this._iteratorCache,n=0;return new M((function(){if(n>=i.length){var e=r.next();if(e.done)return e;i[n]=e.value}return P(t,n,i[n++])}))},e(ft,z),ft.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ft.prototype.get=function(t,e){return this.has(t)?this._value:e},ft.prototype.includes=function(t){return dt(this._value,t)},ft.prototype.slice=function(t,e){var r=this.size;return x(t,e,r)?this:new ft(this._value,C(e,r)-O(t,r))},ft.prototype.reverse=function(){return this},ft.prototype.indexOf=function(t){return dt(this._value,t)?0:-1},ft.prototype.lastIndexOf=function(t){return dt(this._value,t)?this.size:-1},ft.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},ft.prototype.__iterator=function(t,e){var r=this,i=0;return new M((function(){return i<r.size?P(t,i++,r._value):{value:void 0,done:!0}}))},ft.prototype.equals=function(t){return t instanceof ft?dt(this._value,t._value):pt(t)},e(gt,z),gt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},gt.prototype.get=function(t,e){return this.has(t)?this._start+A(this,t)*this._step:e},gt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},gt.prototype.slice=function(t,e){return x(t,e,this.size)?this:(t=O(t,this.size),(e=C(e,this.size))<=t?new gt(0,0):new gt(this.get(t,this._end),this.get(e,this._end),this._step))},gt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},gt.prototype.lastIndexOf=function(t){return this.indexOf(t)},gt.prototype.__iterate=function(t,e){for(var r=this.size-1,i=this._step,n=e?this._start+r*i:this._start,s=0;s<=r;s++){if(!1===t(n,s,this))return s+1;n+=e?-i:i}return s},gt.prototype.__iterator=function(t,e){var r=this.size-1,i=this._step,n=e?this._start+r*i:this._start,s=0;return new M((function(){var o=n;return n+=e?-i:i,s>r?{value:void 0,done:!0}:P(t,s++,o)}))},gt.prototype.equals=function(t){return t instanceof gt?this._start===t._start&&this._end===t._end&&this._step===t._step:pt(this,t)},e(_t,r),e(bt,_t),e(yt,_t),e(vt,_t),_t.Keyed=bt,_t.Indexed=yt,_t.Set=vt;var St="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),i=65535&(e|=0);return r*i+((t>>>16)*i+r*(e>>>16)<<16>>>0)|0};function wt(t){return t>>>1&1073741824|3221225471&t}function Tt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)r^=t/=4294967295;return wt(r)}if("string"===e)return t.length>Dt?function(t){var e=Lt[t];return void 0===e&&(e=Et(t),Nt===Rt&&(Nt=0,Lt={}),Nt++,Lt[t]=e),e}(t):Et(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(xt&&void 0!==(e=It.get(t)))return e;if(void 0!==(e=t[Ct]))return e;if(!At){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Ct]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Ot,1073741824&Ot&&(Ot=0),xt)It.set(t,e);else{if(void 0!==kt&&!1===kt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(At)Object.defineProperty(t,Ct,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Ct]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Ct]=e}}return e}(t);if("function"==typeof t.toString)return Et(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function Et(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return wt(e)}var kt=Object.isExtensible,At=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var It,xt="function"==typeof WeakMap;xt&&(It=new WeakMap);var Ot=0,Ct="__immutablehash__";"function"==typeof Symbol&&(Ct=Symbol(Ct));var Dt=16,Rt=255,Nt=0,Lt={};function Mt(t){mt(t!==1/0,"Cannot perform this action with an infinite size.")}function Pt(t){return null==t?Xt():Bt(t)&&!l(t)?t:Xt().withMutations((function(e){var r=i(t);Mt(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}function Bt(t){return!(!t||!t[Ut])}e(Pt,bt),Pt.of=function(){var e=t.call(arguments,0);return Xt().withMutations((function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}}))},Pt.prototype.toString=function(){return this.__toString("Map {","}")},Pt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Pt.prototype.set=function(t,e){return Jt(this,t,e)},Pt.prototype.setIn=function(t,e){return this.updateIn(t,b,(function(){return e}))},Pt.prototype.remove=function(t){return Jt(this,t,b)},Pt.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return b}))},Pt.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},Pt.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var i=se(this,er(t),e,r);return i===b?void 0:i},Pt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Xt()},Pt.prototype.merge=function(){return ee(this,void 0,arguments)},Pt.prototype.mergeWith=function(e){return ee(this,e,t.call(arguments,1))},Pt.prototype.mergeIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,Xt(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,r):r[r.length-1]}))},Pt.prototype.mergeDeep=function(){return ee(this,re,arguments)},Pt.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return ee(this,ie(e),r)},Pt.prototype.mergeDeepIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,Xt(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,r):r[r.length-1]}))},Pt.prototype.sort=function(t){return xe(Ge(this,t))},Pt.prototype.sortBy=function(t,e){return xe(Ge(this,e,t))},Pt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Pt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new T)},Pt.prototype.asImmutable=function(){return this.__ensureOwner()},Pt.prototype.wasAltered=function(){return this.__altered},Pt.prototype.__iterator=function(t,e){return new Yt(this,t,e)},Pt.prototype.__iterate=function(t,e){var r=this,i=0;return this._root&&this._root.iterate((function(e){return i++,t(e[1],e[0],r)}),e),i},Pt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Kt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Pt.isMap=Bt;var qt,Ut="@@__IMMUTABLE_MAP__@@",Ft=Pt.prototype;function jt(t,e){this.ownerID=t,this.entries=e}function Vt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function Ht(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function Gt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function zt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function Yt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&$t(t._root)}function Wt(t,e){return P(t,e[0],e[1])}function $t(t,e){return{node:t,index:0,__prev:e}}function Kt(t,e,r,i){var n=Object.create(Ft);return n.size=t,n._root=e,n.__ownerID=r,n.__hash=i,n.__altered=!1,n}function Xt(){return qt||(qt=Kt(0))}function Jt(t,e,r){var i,n;if(t._root){var s=S(y),o=S(v);if(i=Qt(t._root,t.__ownerID,0,void 0,e,r,s,o),!o.value)return t;n=t.size+(s.value?r===b?-1:1:0)}else{if(r===b)return t;n=1,i=new jt(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=n,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?Kt(n,i):Xt()}function Qt(t,e,r,i,n,s,o,a){return t?t.update(e,r,i,n,s,o,a):s===b?t:(w(a),w(o),new zt(e,i,[n,s]))}function Zt(t){return t.constructor===zt||t.constructor===Gt}function te(t,e,r,i,n){if(t.keyHash===i)return new Gt(e,i,[t.entry,n]);var s,o=(0===r?t.keyHash:t.keyHash>>>r)&_,a=(0===r?i:i>>>r)&_;return new Vt(e,1<<o|1<<a,o===a?[te(t,e,r+5,i,n)]:(s=new zt(e,i,n),o<a?[t,s]:[s,t]))}function ee(t,e,r){for(var n=[],s=0;s<r.length;s++){var a=r[s],c=i(a);o(a)||(c=c.map((function(t){return ct(t)}))),n.push(c)}return ne(t,e,n)}function re(t,e,r){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):dt(t,e)?t:e}function ie(t){return function(e,r,i){if(e&&e.mergeDeepWith&&o(r))return e.mergeDeepWith(t,r);var n=t(e,r,i);return dt(e,n)?e:n}}function ne(t,e,r){return 0===(r=r.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations((function(t){for(var i=e?function(r,i){t.update(i,b,(function(t){return t===b?r:e(t,r,i)}))}:function(e,r){t.set(r,e)},n=0;n<r.length;n++)r[n].forEach(i)})):t.constructor(r[0])}function se(t,e,r,i){var n=t===b,s=e.next();if(s.done){var o=n?r:t,a=i(o);return a===o?t:a}mt(n||t&&t.set,"invalid keyPath");var c=s.value,u=n?b:t.get(c,b),l=se(u,e,r,i);return l===u?t:l===b?t.remove(c):(n?Xt():t).set(c,l)}function oe(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function ae(t,e,r,i){var n=i?t:E(t);return n[e]=r,n}Ft[Ut]=!0,Ft[m]=Ft.remove,Ft.removeIn=Ft.deleteIn,jt.prototype.get=function(t,e,r,i){for(var n=this.entries,s=0,o=n.length;s<o;s++)if(dt(r,n[s][0]))return n[s][1];return i},jt.prototype.update=function(t,e,r,i,n,s,o){for(var a=n===b,c=this.entries,u=0,l=c.length;u<l&&!dt(i,c[u][0]);u++);var h=u<l;if(h?c[u][1]===n:a)return this;if(w(o),(a||!h)&&w(s),!a||1!==c.length){if(!h&&!a&&c.length>=ce)return function(t,e,r,i){t||(t=new T);for(var n=new zt(t,Tt(r),[r,i]),s=0;s<e.length;s++){var o=e[s];n=n.update(t,0,void 0,o[0],o[1])}return n}(t,c,i,n);var d=t&&t===this.ownerID,p=d?c:E(c);return h?a?u===l-1?p.pop():p[u]=p.pop():p[u]=[i,n]:p.push([i,n]),d?(this.entries=p,this):new jt(t,p)}},Vt.prototype.get=function(t,e,r,i){void 0===e&&(e=Tt(r));var n=1<<((0===t?e:e>>>t)&_),s=this.bitmap;return s&n?this.nodes[oe(s&n-1)].get(t+5,e,r,i):i},Vt.prototype.update=function(t,e,r,i,n,s,o){void 0===r&&(r=Tt(i));var a=(0===e?r:r>>>e)&_,c=1<<a,u=this.bitmap,l=!!(u&c);if(!l&&n===b)return this;var h=oe(u&c-1),d=this.nodes,p=l?d[h]:void 0,f=Qt(p,t,e+5,r,i,n,s,o);if(f===p)return this;if(!l&&f&&d.length>=ue)return function(t,e,r,i,n){for(var s=0,o=new Array(g),a=0;0!==r;a++,r>>>=1)o[a]=1&r?e[s++]:void 0;return o[i]=n,new Ht(t,s+1,o)}(t,d,u,a,f);if(l&&!f&&2===d.length&&Zt(d[1^h]))return d[1^h];if(l&&f&&1===d.length&&Zt(f))return f;var m=t&&t===this.ownerID,y=l?f?u:u^c:u|c,v=l?f?ae(d,h,f,m):function(t,e,r){var i=t.length-1;if(r&&e===i)return t.pop(),t;for(var n=new Array(i),s=0,o=0;o<i;o++)o===e&&(s=1),n[o]=t[o+s];return n}(d,h,m):function(t,e,r,i){var n=t.length+1;if(i&&e+1===n)return t[e]=r,t;for(var s=new Array(n),o=0,a=0;a<n;a++)a===e?(s[a]=r,o=-1):s[a]=t[a+o];return s}(d,h,f,m);return m?(this.bitmap=y,this.nodes=v,this):new Vt(t,y,v)},Ht.prototype.get=function(t,e,r,i){void 0===e&&(e=Tt(r));var n=(0===t?e:e>>>t)&_,s=this.nodes[n];return s?s.get(t+5,e,r,i):i},Ht.prototype.update=function(t,e,r,i,n,s,o){void 0===r&&(r=Tt(i));var a=(0===e?r:r>>>e)&_,c=n===b,u=this.nodes,l=u[a];if(c&&!l)return this;var h=Qt(l,t,e+5,r,i,n,s,o);if(h===l)return this;var d=this.count;if(l){if(!h&&--d<le)return function(t,e,r,i){for(var n=0,s=0,o=new Array(r),a=0,c=1,u=e.length;a<u;a++,c<<=1){var l=e[a];void 0!==l&&a!==i&&(n|=c,o[s++]=l)}return new Vt(t,n,o)}(t,u,d,a)}else d++;var p=t&&t===this.ownerID,f=ae(u,a,h,p);return p?(this.count=d,this.nodes=f,this):new Ht(t,d,f)},Gt.prototype.get=function(t,e,r,i){for(var n=this.entries,s=0,o=n.length;s<o;s++)if(dt(r,n[s][0]))return n[s][1];return i},Gt.prototype.update=function(t,e,r,i,n,s,o){void 0===r&&(r=Tt(i));var a=n===b;if(r!==this.keyHash)return a?this:(w(o),w(s),te(this,t,e,r,[i,n]));for(var c=this.entries,u=0,l=c.length;u<l&&!dt(i,c[u][0]);u++);var h=u<l;if(h?c[u][1]===n:a)return this;if(w(o),(a||!h)&&w(s),a&&2===l)return new zt(t,this.keyHash,c[1^u]);var d=t&&t===this.ownerID,p=d?c:E(c);return h?a?u===l-1?p.pop():p[u]=p.pop():p[u]=[i,n]:p.push([i,n]),d?(this.entries=p,this):new Gt(t,this.keyHash,p)},zt.prototype.get=function(t,e,r,i){return dt(r,this.entry[0])?this.entry[1]:i},zt.prototype.update=function(t,e,r,i,n,s,o){var a=n===b,c=dt(i,this.entry[0]);return(c?n===this.entry[1]:a)?this:(w(o),a?void w(s):c?t&&t===this.ownerID?(this.entry[1]=n,this):new zt(t,this.keyHash,[i,n]):(w(s),te(this,t,e,Tt(i),[i,n])))},jt.prototype.iterate=Gt.prototype.iterate=function(t,e){for(var r=this.entries,i=0,n=r.length-1;i<=n;i++)if(!1===t(r[e?n-i:i]))return!1},Vt.prototype.iterate=Ht.prototype.iterate=function(t,e){for(var r=this.nodes,i=0,n=r.length-1;i<=n;i++){var s=r[e?n-i:i];if(s&&!1===s.iterate(t,e))return!1}},zt.prototype.iterate=function(t,e){return t(this.entry)},e(Yt,M),Yt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,i=e.node,n=e.index++;if(i.entry){if(0===n)return Wt(t,i.entry)}else if(i.entries){if(n<=(r=i.entries.length-1))return Wt(t,i.entries[this._reverse?r-n:n])}else if(n<=(r=i.nodes.length-1)){var s=i.nodes[this._reverse?r-n:n];if(s){if(s.entry)return Wt(t,s.entry);e=this._stack=$t(s,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ce=8,ue=16,le=8;function he(t){var e=Se();if(null==t)return e;if(de(t))return t;var r=n(t),i=r.size;return 0===i?e:(Mt(i),i>0&&i<g?ve(0,i,5,null,new me(r.toArray())):e.withMutations((function(t){t.setSize(i),r.forEach((function(e,r){return t.set(r,e)}))})))}function de(t){return!(!t||!t[pe])}e(he,yt),he.of=function(){return this(arguments)},he.prototype.toString=function(){return this.__toString("List [","]")},he.prototype.get=function(t,e){if((t=A(this,t))>=0&&t<this.size){var r=Ee(this,t+=this._origin);return r&&r.array[t&_]}return e},he.prototype.set=function(t,e){return function(t,e,r){if((e=A(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?ke(t,e).set(0,r):ke(t,0,e+1).set(e,r)}));e+=t._origin;var i=t._tail,n=t._root,s=S(v);return e>=Ie(t._capacity)?i=we(i,t.__ownerID,0,e,r,s):n=we(n,t.__ownerID,t._level,e,r,s),s.value?t.__ownerID?(t._root=n,t._tail=i,t.__hash=void 0,t.__altered=!0,t):ve(t._origin,t._capacity,t._level,n,i):t}(this,t,e)},he.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},he.prototype.insert=function(t,e){return this.splice(t,0,e)},he.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Se()},he.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){ke(r,0,e+t.length);for(var i=0;i<t.length;i++)r.set(e+i,t[i])}))},he.prototype.pop=function(){return ke(this,0,-1)},he.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){ke(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},he.prototype.shift=function(){return ke(this,1)},he.prototype.merge=function(){return Ae(this,void 0,arguments)},he.prototype.mergeWith=function(e){return Ae(this,e,t.call(arguments,1))},he.prototype.mergeDeep=function(){return Ae(this,re,arguments)},he.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return Ae(this,ie(e),r)},he.prototype.setSize=function(t){return ke(this,0,t)},he.prototype.slice=function(t,e){var r=this.size;return x(t,e,r)?this:ke(this,O(t,r),C(e,r))},he.prototype.__iterator=function(t,e){var r=0,i=ye(this,e);return new M((function(){var e=i();return e===be?{value:void 0,done:!0}:P(t,r++,e)}))},he.prototype.__iterate=function(t,e){for(var r,i=0,n=ye(this,e);(r=n())!==be&&!1!==t(r,i++,this););return i},he.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ve(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},he.isList=de;var pe="@@__IMMUTABLE_LIST__@@",fe=he.prototype;function me(t,e){this.array=t,this.ownerID=e}fe[pe]=!0,fe[m]=fe.remove,fe.setIn=Ft.setIn,fe.deleteIn=fe.removeIn=Ft.removeIn,fe.update=Ft.update,fe.updateIn=Ft.updateIn,fe.mergeIn=Ft.mergeIn,fe.mergeDeepIn=Ft.mergeDeepIn,fe.withMutations=Ft.withMutations,fe.asMutable=Ft.asMutable,fe.asImmutable=Ft.asImmutable,fe.wasAltered=Ft.wasAltered,me.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var i=r>>>e&_;if(i>=this.array.length)return new me([],t);var n,s=0===i;if(e>0){var o=this.array[i];if((n=o&&o.removeBefore(t,e-5,r))===o&&s)return this}if(s&&!n)return this;var a=Te(this,t);if(!s)for(var c=0;c<i;c++)a.array[c]=void 0;return n&&(a.array[i]=n),a},me.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var i,n=r-1>>>e&_;if(n>=this.array.length)return this;if(e>0){var s=this.array[n];if((i=s&&s.removeAfter(t,e-5,r))===s&&n===this.array.length-1)return this}var o=Te(this,t);return o.array.splice(n+1),i&&(o.array[n]=i),o};var ge,_e,be={};function ye(t,e){var r=t._origin,i=t._capacity,n=Ie(i),s=t._tail;return o(t._root,t._level,0);function o(t,a,c){return 0===a?function(t,o){var a=o===n?s&&s.array:t&&t.array,c=o>r?0:r-o,u=i-o;return u>g&&(u=g),function(){if(c===u)return be;var t=e?--u:c++;return a&&a[t]}}(t,c):function(t,n,s){var a,c=t&&t.array,u=s>r?0:r-s>>n,l=1+(i-s>>n);return l>g&&(l=g),function(){for(;;){if(a){var t=a();if(t!==be)return t;a=null}if(u===l)return be;var r=e?--l:u++;a=o(c&&c[r],n-5,s+(r<<n))}}}(t,a,c)}}function ve(t,e,r,i,n,s,o){var a=Object.create(fe);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=i,a._tail=n,a.__ownerID=s,a.__hash=o,a.__altered=!1,a}function Se(){return ge||(ge=ve(0,0,5))}function we(t,e,r,i,n,s){var o,a=i>>>r&_,c=t&&a<t.array.length;if(!c&&void 0===n)return t;if(r>0){var u=t&&t.array[a],l=we(u,e,r-5,i,n,s);return l===u?t:((o=Te(t,e)).array[a]=l,o)}return c&&t.array[a]===n?t:(w(s),o=Te(t,e),void 0===n&&a===o.array.length-1?o.array.pop():o.array[a]=n,o)}function Te(t,e){return e&&t&&e===t.ownerID?t:new me(t?t.array.slice():[],e)}function Ee(t,e){if(e>=Ie(t._capacity))return t._tail;if(e<1<<t._level+5){for(var r=t._root,i=t._level;r&&i>0;)r=r.array[e>>>i&_],i-=5;return r}}function ke(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var i=t.__ownerID||new T,n=t._origin,s=t._capacity,o=n+e,a=void 0===r?s:r<0?s+r:n+r;if(o===n&&a===s)return t;if(o>=a)return t.clear();for(var c=t._level,u=t._root,l=0;o+l<0;)u=new me(u&&u.array.length?[void 0,u]:[],i),l+=1<<(c+=5);l&&(o+=l,n+=l,a+=l,s+=l);for(var h=Ie(s),d=Ie(a);d>=1<<c+5;)u=new me(u&&u.array.length?[u]:[],i),c+=5;var p=t._tail,f=d<h?Ee(t,a-1):d>h?new me([],i):p;if(p&&d>h&&o<s&&p.array.length){for(var m=u=Te(u,i),g=c;g>5;g-=5){var b=h>>>g&_;m=m.array[b]=Te(m.array[b],i)}m.array[h>>>5&_]=p}if(a<s&&(f=f&&f.removeAfter(i,0,a)),o>=d)o-=d,a-=d,c=5,u=null,f=f&&f.removeBefore(i,0,o);else if(o>n||d<h){for(l=0;u;){var y=o>>>c&_;if(y!==d>>>c&_)break;y&&(l+=(1<<c)*y),c-=5,u=u.array[y]}u&&o>n&&(u=u.removeBefore(i,c,o-l)),u&&d<h&&(u=u.removeAfter(i,c,d-l)),l&&(o-=l,a-=l)}return t.__ownerID?(t.size=a-o,t._origin=o,t._capacity=a,t._level=c,t._root=u,t._tail=f,t.__hash=void 0,t.__altered=!0,t):ve(o,a,c,u,f)}function Ae(t,e,r){for(var i=[],s=0,a=0;a<r.length;a++){var c=r[a],u=n(c);u.size>s&&(s=u.size),o(c)||(u=u.map((function(t){return ct(t)}))),i.push(u)}return s>t.size&&(t=t.setSize(s)),ne(t,e,i)}function Ie(t){return t<g?0:t-1>>>5<<5}function xe(t){return null==t?De():Oe(t)?t:De().withMutations((function(e){var r=i(t);Mt(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}function Oe(t){return Bt(t)&&l(t)}function Ce(t,e,r,i){var n=Object.create(xe.prototype);return n.size=t?t.size:0,n._map=t,n._list=e,n.__ownerID=r,n.__hash=i,n}function De(){return _e||(_e=Ce(Xt(),Se()))}function Re(t,e,r){var i,n,s=t._map,o=t._list,a=s.get(e),c=void 0!==a;if(r===b){if(!c)return t;o.size>=g&&o.size>=2*s.size?(i=(n=o.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(i.__ownerID=n.__ownerID=t.__ownerID)):(i=s.remove(e),n=a===o.size-1?o.pop():o.set(a,void 0))}else if(c){if(r===o.get(a)[1])return t;i=s,n=o.set(a,[e,r])}else i=s.set(e,o.size),n=o.set(o.size,[e,r]);return t.__ownerID?(t.size=i.size,t._map=i,t._list=n,t.__hash=void 0,t):Ce(i,n)}function Ne(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Le(t){this._iter=t,this.size=t.size}function Me(t){this._iter=t,this.size=t.size}function Pe(t){this._iter=t,this.size=t.size}function Be(t){var e=Qe(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ze,e.__iterateUncached=function(e,r){var i=this;return t.__iterate((function(t,r){return!1!==e(r,t,i)}),r)},e.__iteratorUncached=function(e,r){if(2===e){var i=t.__iterator(e,r);return new M((function(){var t=i.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,r)},e}function qe(t,e,r){var i=Qe(t);return i.size=t.size,i.has=function(e){return t.has(e)},i.get=function(i,n){var s=t.get(i,b);return s===b?n:e.call(r,s,i,t)},i.__iterateUncached=function(i,n){var s=this;return t.__iterate((function(t,n,o){return!1!==i(e.call(r,t,n,o),n,s)}),n)},i.__iteratorUncached=function(i,n){var s=t.__iterator(2,n);return new M((function(){var n=s.next();if(n.done)return n;var o=n.value,a=o[0];return P(i,a,e.call(r,o[1],a,t),n)}))},i}function Ue(t,e){var r=Qe(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Be(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,i){return t.get(e?r:-1-r,i)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=Ze,r.__iterate=function(e,r){var i=this;return t.__iterate((function(t,r){return e(t,r,i)}),!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function Fe(t,e,r,i){var n=Qe(t);return i&&(n.has=function(i){var n=t.get(i,b);return n!==b&&!!e.call(r,n,i,t)},n.get=function(i,n){var s=t.get(i,b);return s!==b&&e.call(r,s,i,t)?s:n}),n.__iterateUncached=function(n,s){var o=this,a=0;return t.__iterate((function(t,s,c){if(e.call(r,t,s,c))return a++,n(t,i?s:a-1,o)}),s),a},n.__iteratorUncached=function(n,s){var o=t.__iterator(2,s),a=0;return new M((function(){for(;;){var s=o.next();if(s.done)return s;var c=s.value,u=c[0],l=c[1];if(e.call(r,l,u,t))return P(n,i?u:a++,l,s)}}))},n}function je(t,e,r,i){var n=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=n:r|=0),x(e,r,n))return t;var s=O(e,n),o=C(r,n);if(s!=s||o!=o)return je(t.toSeq().cacheResult(),e,r,i);var a,c=o-s;c==c&&(a=c<0?0:c);var u=Qe(t);return u.size=0===a?a:t.size&&a||void 0,!i&&et(t)&&a>=0&&(u.get=function(e,r){return(e=A(this,e))>=0&&e<a?t.get(e+s,r):r}),u.__iterateUncached=function(e,r){var n=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(e,r);var o=0,c=!0,u=0;return t.__iterate((function(t,r){if(!c||!(c=o++<s))return u++,!1!==e(t,i?r:u-1,n)&&u!==a})),u},u.__iteratorUncached=function(e,r){if(0!==a&&r)return this.cacheResult().__iterator(e,r);var n=0!==a&&t.__iterator(e,r),o=0,c=0;return new M((function(){for(;o++<s;)n.next();if(++c>a)return{value:void 0,done:!0};var t=n.next();return i||1===e?t:P(e,c-1,0===e?void 0:t.value[1],t)}))},u}function Ve(t,e,r,i){var n=Qe(t);return n.__iterateUncached=function(n,s){var o=this;if(s)return this.cacheResult().__iterate(n,s);var a=!0,c=0;return t.__iterate((function(t,s,u){if(!a||!(a=e.call(r,t,s,u)))return c++,n(t,i?s:c-1,o)})),c},n.__iteratorUncached=function(n,s){var o=this;if(s)return this.cacheResult().__iterator(n,s);var a=t.__iterator(2,s),c=!0,u=0;return new M((function(){var t,s,l;do{if((t=a.next()).done)return i||1===n?t:P(n,u++,0===n?void 0:t.value[1],t);var h=t.value;s=h[0],l=h[1],c&&(c=e.call(r,l,s,o))}while(c);return 2===n?t:P(n,s,l,t)}))},n}function He(t,e,r){var i=Qe(t);return i.__iterateUncached=function(i,n){var s=0,a=!1;return function t(c,u){var l=this;c.__iterate((function(n,c){return(!e||u<e)&&o(n)?t(n,u+1):!1===i(n,r?c:s++,l)&&(a=!0),!a}),n)}(t,0),s},i.__iteratorUncached=function(i,n){var s=t.__iterator(i,n),a=[],c=0;return new M((function(){for(;s;){var t=s.next();if(!1===t.done){var u=t.value;if(2===i&&(u=u[1]),e&&!(a.length<e)||!o(u))return r?t:P(i,c++,u,t);a.push(s),s=u.__iterator(i,n)}else s=a.pop()}return{value:void 0,done:!0}}))},i}function Ge(t,e,r){e||(e=tr);var i=a(t),n=0,s=t.toSeq().map((function(e,i){return[i,e,n++,r?r(e,i,t):e]})).toArray();return s.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(i?function(t,e){s[e].length=2}:function(t,e){s[e]=t[1]}),i?G(s):c(t)?z(s):Y(s)}function ze(t,e,r){if(e||(e=tr),r){var i=t.toSeq().map((function(e,i){return[e,r(e,i,t)]})).reduce((function(t,r){return Ye(e,t[1],r[1])?r:t}));return i&&i[0]}return t.reduce((function(t,r){return Ye(e,t,r)?r:t}))}function Ye(t,e,r){var i=t(r,e);return 0===i&&r!==e&&(null==r||r!=r)||i>0}function We(t,e,i){var n=Qe(t);return n.size=new J(i).map((function(t){return t.size})).min(),n.__iterate=function(t,e){for(var r,i=this.__iterator(1,e),n=0;!(r=i.next()).done&&!1!==t(r.value,n++,this););return n},n.__iteratorUncached=function(t,n){var s=i.map((function(t){return t=r(t),F(n?t.reverse():t)})),o=0,a=!1;return new M((function(){var r;return a||(r=s.map((function(t){return t.next()})),a=r.some((function(t){return t.done}))),a?{value:void 0,done:!0}:P(t,o++,e.apply(null,r.map((function(t){return t.value}))))}))},n}function $e(t,e){return et(t)?e:t.constructor(e)}function Ke(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Xe(t){return Mt(t.size),k(t)}function Je(t){return a(t)?i:c(t)?n:s}function Qe(t){return Object.create((a(t)?G:c(t)?z:Y).prototype)}function Ze(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):H.prototype.cacheResult.call(this)}function tr(t,e){return t>e?1:t<e?-1:0}function er(t){var e=F(t);if(!e){if(!V(t))throw new TypeError("Expected iterable or array-like: "+t);e=F(r(t))}return e}function rr(t,e){var r,i=function(s){if(s instanceof i)return s;if(!(this instanceof i))return new i(s);if(!r){r=!0;var o=Object.keys(t);(function(t,e){try{e.forEach(or.bind(void 0,t))}catch(t){}})(n,o),n.size=o.length,n._name=e,n._keys=o,n._defaultValues=t}this._map=Pt(s)},n=i.prototype=Object.create(ir);return n.constructor=i,i}e(xe,Pt),xe.of=function(){return this(arguments)},xe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xe.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},xe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):De()},xe.prototype.set=function(t,e){return Re(this,t,e)},xe.prototype.remove=function(t){return Re(this,t,b)},xe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xe.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},xe.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},xe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Ce(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},xe.isOrderedMap=Oe,xe.prototype[f]=!0,xe.prototype[m]=xe.prototype.remove,e(Ne,G),Ne.prototype.get=function(t,e){return this._iter.get(t,e)},Ne.prototype.has=function(t){return this._iter.has(t)},Ne.prototype.valueSeq=function(){return this._iter.valueSeq()},Ne.prototype.reverse=function(){var t=this,e=Ue(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Ne.prototype.map=function(t,e){var r=this,i=qe(this,t,e);return this._useKeys||(i.valueSeq=function(){return r._iter.toSeq().map(t,e)}),i},Ne.prototype.__iterate=function(t,e){var r,i=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,i)}:(r=e?Xe(this):0,function(n){return t(n,e?--r:r++,i)}),e)},Ne.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(1,e),i=e?Xe(this):0;return new M((function(){var n=r.next();return n.done?n:P(t,e?--i:i++,n.value,n)}))},Ne.prototype[f]=!0,e(Le,z),Le.prototype.includes=function(t){return this._iter.includes(t)},Le.prototype.__iterate=function(t,e){var r=this,i=0;return this._iter.__iterate((function(e){return t(e,i++,r)}),e)},Le.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e),i=0;return new M((function(){var e=r.next();return e.done?e:P(t,i++,e.value,e)}))},e(Me,Y),Me.prototype.has=function(t){return this._iter.includes(t)},Me.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},Me.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new M((function(){var e=r.next();return e.done?e:P(t,e.value,e.value,e)}))},e(Pe,G),Pe.prototype.entrySeq=function(){return this._iter.toSeq()},Pe.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){Ke(e);var i=o(e);return t(i?e.get(1):e[1],i?e.get(0):e[0],r)}}),e)},Pe.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new M((function(){for(;;){var e=r.next();if(e.done)return e;var i=e.value;if(i){Ke(i);var n=o(i);return P(t,n?i.get(0):i[0],n?i.get(1):i[1],e)}}}))},Le.prototype.cacheResult=Ne.prototype.cacheResult=Me.prototype.cacheResult=Pe.prototype.cacheResult=Ze,e(rr,bt),rr.prototype.toString=function(){return this.__toString(sr(this)+" {","}")},rr.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},rr.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},rr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=nr(this,Xt()))},rr.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+sr(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:nr(this,r)},rr.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:nr(this,e)},rr.prototype.wasAltered=function(){return this._map.wasAltered()},rr.prototype.__iterator=function(t,e){var r=this;return i(this._defaultValues).map((function(t,e){return r.get(e)})).__iterator(t,e)},rr.prototype.__iterate=function(t,e){var r=this;return i(this._defaultValues).map((function(t,e){return r.get(e)})).__iterate(t,e)},rr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?nr(this,e,t):(this.__ownerID=t,this._map=e,this)};var ir=rr.prototype;function nr(t,e,r){var i=Object.create(Object.getPrototypeOf(t));return i._map=e,i.__ownerID=r,i}function sr(t){return t._name||t.constructor.name||"Record"}function or(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){mt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function ar(t){return null==t?fr():cr(t)&&!l(t)?t:fr().withMutations((function(e){var r=s(t);Mt(r.size),r.forEach((function(t){return e.add(t)}))}))}function cr(t){return!(!t||!t[lr])}ir[m]=ir.remove,ir.deleteIn=ir.removeIn=Ft.removeIn,ir.merge=Ft.merge,ir.mergeWith=Ft.mergeWith,ir.mergeIn=Ft.mergeIn,ir.mergeDeep=Ft.mergeDeep,ir.mergeDeepWith=Ft.mergeDeepWith,ir.mergeDeepIn=Ft.mergeDeepIn,ir.setIn=Ft.setIn,ir.update=Ft.update,ir.updateIn=Ft.updateIn,ir.withMutations=Ft.withMutations,ir.asMutable=Ft.asMutable,ir.asImmutable=Ft.asImmutable,e(ar,vt),ar.of=function(){return this(arguments)},ar.fromKeys=function(t){return this(i(t).keySeq())},ar.prototype.toString=function(){return this.__toString("Set {","}")},ar.prototype.has=function(t){return this._map.has(t)},ar.prototype.add=function(t){return dr(this,this._map.set(t,!0))},ar.prototype.remove=function(t){return dr(this,this._map.remove(t))},ar.prototype.clear=function(){return dr(this,this._map.clear())},ar.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var r=0;r<e.length;r++)s(e[r]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},ar.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return s(t)}));var r=this;return this.withMutations((function(t){r.forEach((function(r){e.every((function(t){return t.includes(r)}))||t.remove(r)}))}))},ar.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return s(t)}));var r=this;return this.withMutations((function(t){r.forEach((function(r){e.some((function(t){return t.includes(r)}))&&t.remove(r)}))}))},ar.prototype.merge=function(){return this.union.apply(this,arguments)},ar.prototype.mergeWith=function(e){var r=t.call(arguments,1);return this.union.apply(this,r)},ar.prototype.sort=function(t){return mr(Ge(this,t))},ar.prototype.sortBy=function(t,e){return mr(Ge(this,e,t))},ar.prototype.wasAltered=function(){return this._map.wasAltered()},ar.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e,i){return t(i,i,r)}),e)},ar.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},ar.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},ar.isSet=cr;var ur,lr="@@__IMMUTABLE_SET__@@",hr=ar.prototype;function dr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function pr(t,e){var r=Object.create(hr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function fr(){return ur||(ur=pr(Xt()))}function mr(t){return null==t?vr():gr(t)?t:vr().withMutations((function(e){var r=s(t);Mt(r.size),r.forEach((function(t){return e.add(t)}))}))}function gr(t){return cr(t)&&l(t)}hr[lr]=!0,hr[m]=hr.remove,hr.mergeDeep=hr.merge,hr.mergeDeepWith=hr.mergeWith,hr.withMutations=Ft.withMutations,hr.asMutable=Ft.asMutable,hr.asImmutable=Ft.asImmutable,hr.__empty=fr,hr.__make=pr,e(mr,ar),mr.of=function(){return this(arguments)},mr.fromKeys=function(t){return this(i(t).keySeq())},mr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},mr.isOrderedSet=gr;var _r,br=mr.prototype;function yr(t,e){var r=Object.create(br);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function vr(){return _r||(_r=yr(De()))}function Sr(t){return null==t?Ir():wr(t)?t:Ir().unshiftAll(t)}function wr(t){return!(!t||!t[Er])}br[f]=!0,br.__empty=vr,br.__make=yr,e(Sr,yt),Sr.of=function(){return this(arguments)},Sr.prototype.toString=function(){return this.__toString("Stack [","]")},Sr.prototype.get=function(t,e){var r=this._head;for(t=A(this,t);r&&t--;)r=r.next;return r?r.value:e},Sr.prototype.peek=function(){return this._head&&this._head.value},Sr.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ar(t,e)},Sr.prototype.pushAll=function(t){if(0===(t=n(t)).size)return this;Mt(t.size);var e=this.size,r=this._head;return t.reverse().forEach((function(t){e++,r={value:t,next:r}})),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ar(e,r)},Sr.prototype.pop=function(){return this.slice(1)},Sr.prototype.unshift=function(){return this.push.apply(this,arguments)},Sr.prototype.unshiftAll=function(t){return this.pushAll(t)},Sr.prototype.shift=function(){return this.pop.apply(this,arguments)},Sr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ir()},Sr.prototype.slice=function(t,e){if(x(t,e,this.size))return this;var r=O(t,this.size);if(C(e,this.size)!==this.size)return yt.prototype.slice.call(this,t,e);for(var i=this.size-r,n=this._head;r--;)n=n.next;return this.__ownerID?(this.size=i,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ar(i,n)},Sr.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ar(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Sr.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,this);)i=i.next;return r},Sr.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,i=this._head;return new M((function(){if(i){var e=i.value;return i=i.next,P(t,r++,e)}return{value:void 0,done:!0}}))},Sr.isStack=wr;var Tr,Er="@@__IMMUTABLE_STACK__@@",kr=Sr.prototype;function Ar(t,e,r,i){var n=Object.create(kr);return n.size=t,n._head=e,n.__ownerID=r,n.__hash=i,n.__altered=!1,n}function Ir(){return Tr||(Tr=Ar(0))}function xr(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}kr[Er]=!0,kr.withMutations=Ft.withMutations,kr.asMutable=Ft.asMutable,kr.asImmutable=Ft.asImmutable,kr.wasAltered=Ft.wasAltered,r.Iterator=M,xr(r,{toArray:function(){Mt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,r){t[r]=e})),t},toIndexedSeq:function(){return new Le(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Ne(this,!0)},toMap:function(){return Pt(this.toKeyedSeq())},toObject:function(){Mt(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t},toOrderedMap:function(){return xe(this.toKeyedSeq())},toOrderedSet:function(){return mr(a(this)?this.valueSeq():this)},toSet:function(){return ar(a(this)?this.valueSeq():this)},toSetSeq:function(){return new Me(this)},toSeq:function(){return c(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Sr(a(this)?this.valueSeq():this)},toList:function(){return he(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return $e(this,function(t,e){var r=a(t),n=[t].concat(e).map((function(t){return o(t)?r&&(t=i(t)):t=r?it(t):nt(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===n.length)return t;if(1===n.length){var s=n[0];if(s===t||r&&a(s)||c(t)&&c(s))return s}var u=new J(n);return r?u=u.toKeyedSeq():c(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=n.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),u}(this,t.call(arguments,0)))},includes:function(t){return this.some((function(e){return dt(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){Mt(this.size);var r=!0;return this.__iterate((function(i,n,s){if(!t.call(e,i,n,s))return r=!1,!1})),r},filter:function(t,e){return $e(this,Fe(this,t,e,!0))},find:function(t,e,r){var i=this.findEntry(t,e);return i?i[1]:r},forEach:function(t,e){return Mt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Mt(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(i){r?r=!1:e+=t,e+=null!=i?i.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return $e(this,qe(this,t,e))},reduce:function(t,e,r){var i,n;return Mt(this.size),arguments.length<2?n=!0:i=e,this.__iterate((function(e,s,o){n?(n=!1,i=e):i=t.call(r,i,e,s,o)})),i},reduceRight:function(t,e,r){var i=this.toKeyedSeq().reverse();return i.reduce.apply(i,arguments)},reverse:function(){return $e(this,Ue(this,!0))},slice:function(t,e){return $e(this,je(this,t,e,!0))},some:function(t,e){return!this.every(Nr(t),e)},sort:function(t){return $e(this,Ge(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return k(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var i=Pt().asMutable();return t.__iterate((function(n,s){i.update(e.call(r,n,s,t),0,(function(t){return t+1}))})),i.asImmutable()}(this,t,e)},equals:function(t){return pt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new J(t._cache);var e=t.toSeq().map(Rr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Nr(t),e)},findEntry:function(t,e,r){var i=r;return this.__iterate((function(r,n,s){if(t.call(e,r,n,s))return i=[n,r],!1})),i},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(I)},flatMap:function(t,e){return $e(this,function(t,e,r){var i=Je(t);return t.toSeq().map((function(n,s){return i(e.call(r,n,s,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return $e(this,He(this,t,!0))},fromEntrySeq:function(){return new Pe(this)},get:function(t,e){return this.find((function(e,r){return dt(r,t)}),void 0,e)},getIn:function(t,e){for(var r,i=this,n=er(t);!(r=n.next()).done;){var s=r.value;if((i=i&&i.get?i.get(s,b):b)===b)return e}return i},groupBy:function(t,e){return function(t,e,r){var i=a(t),n=(l(t)?xe():Pt()).asMutable();t.__iterate((function(s,o){n.update(e.call(r,s,o,t),(function(t){return(t=t||[]).push(i?[o,s]:s),t}))}));var s=Je(t);return n.map((function(e){return $e(t,s(e))}))}(this,t,e)},has:function(t){return this.get(t,b)!==b},hasIn:function(t){return this.getIn(t,b)!==b},isSubset:function(t){return t="function"==typeof t.includes?t:r(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:r(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return dt(e,t)}))},keySeq:function(){return this.toSeq().map(Dr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ze(this,t)},maxBy:function(t,e){return ze(this,e,t)},min:function(t){return ze(this,t?Lr(t):Br)},minBy:function(t,e){return ze(this,e?Lr(e):Br,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return $e(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return $e(this,Ve(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Nr(t),e)},sortBy:function(t,e){return $e(this,Ge(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return $e(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return $e(this,function(t,e,r){var i=Qe(t);return i.__iterateUncached=function(i,n){var s=this;if(n)return this.cacheResult().__iterate(i,n);var o=0;return t.__iterate((function(t,n,a){return e.call(r,t,n,a)&&++o&&i(t,n,s)})),o},i.__iteratorUncached=function(i,n){var s=this;if(n)return this.cacheResult().__iterator(i,n);var o=t.__iterator(2,n),a=!0;return new M((function(){if(!a)return{value:void 0,done:!0};var t=o.next();if(t.done)return t;var n=t.value,c=n[0],u=n[1];return e.call(r,u,c,s)?2===i?t:P(i,c,u,t):(a=!1,{value:void 0,done:!0})}))},i}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Nr(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=l(t),r=a(t),i=e?1:0;return function(t,e){return e=St(e,3432918353),e=St(e<<15|e>>>-15,461845907),e=St(e<<13|e>>>-13,5),e=St((e=e+3864292196^t)^e>>>16,2246822507),wt((e=St(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){i=31*i+qr(Tt(t),Tt(e))|0}:function(t,e){i=i+qr(Tt(t),Tt(e))|0}:e?function(t){i=31*i+Tt(t)|0}:function(t){i=i+Tt(t)|0}),i)}(this))}});var Or=r.prototype;Or[h]=!0,Or[L]=Or.values,Or.__toJS=Or.toArray,Or.__toStringMapper=Mr,Or.inspect=Or.toSource=function(){return this.toString()},Or.chain=Or.flatMap,Or.contains=Or.includes,xr(i,{flip:function(){return $e(this,Be(this))},mapEntries:function(t,e){var r=this,i=0;return $e(this,this.toSeq().map((function(n,s){return t.call(e,[s,n],i++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return $e(this,this.toSeq().flip().map((function(i,n){return t.call(e,i,n,r)})).flip())}});var Cr=i.prototype;function Dr(t,e){return e}function Rr(t,e){return[e,t]}function Nr(t){return function(){return!t.apply(this,arguments)}}function Lr(t){return function(){return-t.apply(this,arguments)}}function Mr(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Pr(){return E(arguments)}function Br(t,e){return t<e?1:t>e?-1:0}function qr(t,e){return t^e+2654435769+(t<<6)+(t>>2)}return Cr[d]=!0,Cr[L]=Or.entries,Cr.__toJS=Or.toObject,Cr.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Mr(t)},xr(n,{toKeyedSeq:function(){return new Ne(this,!1)},filter:function(t,e){return $e(this,Fe(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return $e(this,Ue(this,!1))},slice:function(t,e){return $e(this,je(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=O(t,t<0?this.count():this.size);var i=this.slice(0,t);return $e(this,1===r?i:i.concat(E(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return $e(this,He(this,t,!1))},get:function(t,e){return(t=A(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=A(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return $e(this,function(t,e){var r=Qe(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,i){var n=this,s=0;return t.__iterate((function(t,i){return(!s||!1!==r(e,s++,n))&&!1!==r(t,s++,n)}),i),s},r.__iteratorUncached=function(r,i){var n,s=t.__iterator(1,i),o=0;return new M((function(){return(!n||o%2)&&(n=s.next()).done?n:o%2?P(r,o++,e):P(r,o++,n.value,n)}))},r}(this,t))},interleave:function(){var t=[this].concat(E(arguments)),e=We(this.toSeq(),z.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),$e(this,r)},keySeq:function(){return gt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return $e(this,Ve(this,t,e,!1))},zip:function(){return $e(this,We(this,Pr,[this].concat(E(arguments))))},zipWith:function(t){var e=E(arguments);return e[0]=this,$e(this,We(this,t,e))}}),n.prototype[p]=!0,n.prototype[f]=!0,xr(s,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),s.prototype.has=Or.includes,s.prototype.contains=s.prototype.includes,xr(G,i.prototype),xr(z,n.prototype),xr(Y,s.prototype),xr(bt,i.prototype),xr(yt,n.prototype),xr(vt,s.prototype),{Iterable:r,Seq:H,Collection:_t,Map:Pt,OrderedMap:xe,List:he,Stack:Sr,Set:ar,OrderedSet:mr,Record:rr,Range:gt,Repeat:ft,is:dt,fromJS:ct}}()},9094:(t,e,r)=>{var i=r(2490),n=r(6551);function s(t,e){this.init(t,e)}function o(t,e){return n.getElementsByTagName(t,e,!0)}function a(t,e){return n.getElementsByTagName(t,e,!0,1)[0]}function c(t,e,r){return n.getText(n.getElementsByTagName(t,e,r,1)).trim()}function u(t,e,r,i,n){var s=c(r,i,n);s&&(t[e]=s)}r(728)(s,i),s.prototype.init=i;var l=function(t){return"rss"===t||"feed"===t||"rdf:RDF"===t};s.prototype.onend=function(){var t,e,r={},n=a(l,this.dom);n&&("feed"===n.name?(e=n.children,r.type="atom",u(r,"id","id",e),u(r,"title","title",e),(t=a("link",e))&&(t=t.attribs)&&(t=t.href)&&(r.link=t),u(r,"description","subtitle",e),(t=c("updated",e))&&(r.updated=new Date(t)),u(r,"author","email",e,!0),r.items=o("entry",e).map((function(t){var e,r={};return u(r,"id","id",t=t.children),u(r,"title","title",t),(e=a("link",t))&&(e=e.attribs)&&(e=e.href)&&(r.link=e),(e=c("summary",t)||c("content",t))&&(r.description=e),(e=c("updated",t))&&(r.pubDate=new Date(e)),r}))):(e=a("channel",n.children).children,r.type=n.name.substr(0,3),r.id="",u(r,"title","title",e),u(r,"link","link",e),u(r,"description","description",e),(t=c("lastBuildDate",e))&&(r.updated=new Date(t)),u(r,"author","managingEditor",e,!0),r.items=o("item",n.children).map((function(t){var e,r={};return u(r,"id","guid",t=t.children),u(r,"title","title",t),u(r,"link","link",t),u(r,"description","description",t),(e=c("pubDate",t))&&(r.pubDate=new Date(e)),r})))),this.dom=r,i.prototype._handleCallback.call(this,n?null:Error("couldn't find root of feed"))},t.exports=s},9127:t=>{t.exports=function(t,e){if("string"==typeof t&&e[t])return t;for(var r=[].concat(t||[]),i=0,n=r.length;i<n;++i)for(var s=r[i].split("-");s.length;){var o=s.join("-");if(e[o])return o;s.pop()}}},9224:t=>{const e=[];class r{constructor(t){this.isLoop=!1,this.warpMode=t,this.justReported=null,this.reporting="",this.reported=null,this.waitingReporter=null,this.params=null,this.executionContext=null}reset(){return this.isLoop=!1,this.warpMode=!1,this.justReported=null,this.reported=null,this.waitingReporter=null,this.params=null,this.executionContext=null,this}reuse(t=this.warpMode){return this.reset(),this.warpMode=Boolean(t),this}static create(t){const i=e.pop();return void 0!==i?(i.warpMode=Boolean(t),i):new r(t)}static release(t){void 0!==t&&e.push(t.reset())}}class i{constructor(t){this.topBlock=t,this.stack=[],this.stackFrames=[],this.status=0,this.isKilled=!1,this.target=null,this.blockContainer=null,this.requestScriptGlowInFrame=!1,this.blockGlowInFrame=null,this.warpTimer=null,this.justReported=null}static get STATUS_RUNNING(){return 0}static get STATUS_PROMISE_WAIT(){return 1}static get STATUS_YIELD(){return 2}static get STATUS_YIELD_TICK(){return 3}static get STATUS_DONE(){return 4}pushStack(t){if(this.stack.push(t),this.stack.length>this.stackFrames.length){const t=this.stackFrames[this.stackFrames.length-1];this.stackFrames.push(r.create(void 0!==t&&t.warpMode))}}reuseStackForNextBlock(t){this.stack[this.stack.length-1]=t,this.stackFrames[this.stackFrames.length-1].reuse()}popStack(){return r.release(this.stackFrames.pop()),this.stack.pop()}stopThisScript(){let t=this.peekStack();for(;null!==t;){const e=this.target.blocks.getBlock(t);if(void 0!==e&&"procedures_call"===e.opcode)break;this.popStack(),t=this.peekStack()}0===this.stack.length&&(this.requestScriptGlowInFrame=!1,this.status=i.STATUS_DONE)}peekStack(){return this.stack.length>0?this.stack[this.stack.length-1]:null}peekStackFrame(){return this.stackFrames.length>0?this.stackFrames[this.stackFrames.length-1]:null}peekParentStackFrame(){return this.stackFrames.length>1?this.stackFrames[this.stackFrames.length-2]:null}pushReportedValue(t){this.justReported=void 0===t?null:t}initParams(){const t=this.peekStackFrame();null===t.params&&(t.params={})}pushParam(t,e){this.peekStackFrame().params[t]=e}getParam(t){for(let e=this.stackFrames.length-1;e>=0;e--){const r=this.stackFrames[e];if(null!==r.params)return Object.prototype.hasOwnProperty.call(r.params,t)?r.params[t]:null}return null}atStackTop(){return this.peekStack()===this.topBlock}goToNextBlock(){const t=this.target.blocks.getNextBlock(this.peekStack());this.reuseStackForNextBlock(t)}isRecursiveCall(t){let e=5;for(let r=this.stack.length-1-1;r>=0;r--){const i=this.target.blocks.getBlock(this.stack[r]);if("procedures_call"===i.opcode&&i.mutation.proccode===t)return!0;if(--e<0)return!1}return!1}}t.exports=i},9249:(t,e,r)=>{"use strict";var i=r(2758).F.ERR_STREAM_PREMATURE_CLOSE;function n(){}t.exports=function t(e,r,s){if("function"==typeof r)return t(e,null,r);r||(r={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}(s||n);var o=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,c=function(){e.writable||l()},u=e._writableState&&e._writableState.finished,l=function(){a=!1,u=!0,o||s.call(e)},h=e._readableState&&e._readableState.endEmitted,d=function(){o=!1,h=!0,a||s.call(e)},p=function(t){s.call(e,t)},f=function(){var t;return o&&!h?(e._readableState&&e._readableState.ended||(t=new i),s.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new i),s.call(e,t)):void 0},m=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",f),e.req?m():e.on("request",m)):a&&!e._writableState&&(e.on("end",c),e.on("close",c)),e.on("end",d),e.on("finish",l),!1!==r.error&&e.on("error",p),e.on("close",f),function(){e.removeListener("complete",l),e.removeListener("abort",f),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("end",d),e.removeListener("error",p),e.removeListener("close",f)}}},9280:t=>{t.exports=class{constructor(t){this.runtime=t}postData(t){const e={};if(t.deltaY<0)e.KEY_OPTION="up arrow";else{if(!(t.deltaY>0))return;e.KEY_OPTION="down arrow"}this.runtime.startHats("event_whenkeypressed",e)}}},9328:(t,e,r)=>{var i=r(3562),n=e.isTag=i.isTag;e.testElement=function(t,e){for(var r in t)if(t.hasOwnProperty(r))if("tag_name"===r){if(!n(e)||!t.tag_name(e.name))return!1}else if("tag_type"===r){if(!t.tag_type(e.type))return!1}else if("tag_contains"===r){if(n(e)||!t.tag_contains(e.data))return!1}else if(!e.attribs||!t[r](e.attribs[r]))return!1;return!0};var s={tag_name:function(t){return"function"==typeof t?function(e){return n(e)&&t(e.name)}:"*"===t?n:function(e){return n(e)&&e.name===t}},tag_type:function(t){return"function"==typeof t?function(e){return t(e.type)}:function(e){return e.type===t}},tag_contains:function(t){return"function"==typeof t?function(e){return!n(e)&&t(e.data)}:function(e){return!n(e)&&e.data===t}}};function o(t,e){return"function"==typeof e?function(r){return r.attribs&&e(r.attribs[t])}:function(r){return r.attribs&&r.attribs[t]===e}}function a(t,e){return function(r){return t(r)||e(r)}}e.getElements=function(t,e,r,i){var n=Object.keys(t).map((function(e){var r=t[e];return e in s?s[e](r):o(e,r)}));return 0===n.length?[]:this.filter(n.reduce(a),e,r,i)},e.getElementById=function(t,e,r){return Array.isArray(e)||(e=[e]),this.findOne(o("id",t),e,!1!==r)},e.getElementsByTagName=function(t,e,r,i){return this.filter(s.tag_name(t),e,r,i)},e.getElementsByTagType=function(t,e,r,i){return this.filter(s.tag_type(t),e,r,i)}},9379:(t,e,r)=>{const i=r(1398),n=r(2301);class s{constructor(t,e,r,n,o,a,c){this.id=t||i(),this.text=e,this.x=r,this.y=n,this.width=Math.max(Number(o),s.MIN_WIDTH),this.height=Math.max(Number(a),s.MIN_HEIGHT),this.minimized=c||!1,this.blockId=null}toXML(){return`<comment id="${this.id}" x="${this.x}" y="${this.y}" w="${this.width}" h="${this.height}" pinned="${null!==this.blockId}" minimized="${this.minimized}">${n(this.text)}</comment>`}static get MIN_WIDTH(){return 20}static get MIN_HEIGHT(){return 20}static get DEFAULT_WIDTH(){return 100}static get DEFAULT_HEIGHT(){return 100}}t.exports=s},9407:(t,e,r)=>{const i=r(4813),n=r(6560),s=r(8833),o=r(3581),a=r(9905),c=r(5262);class u extends a{constructor(t,e){super(e,t.blocks),this.sprite=t,this.renderer=null,this.runtime&&(this.renderer=this.runtime.renderer),this.drawableID=null,this.dragging=!1,this.effects={color:0,fisheye:0,whirl:0,pixelate:0,mosaic:0,brightness:0,ghost:0},this.isOriginal=!0,this.isStage=!1,this.x=0,this.y=0,this.direction=90,this.draggable=!1,this.visible=!0,this.size=100,this.currentCostume=0,this.rotationStyle=u.ROTATION_STYLE_ALL_AROUND,this.volume=100,this.tempo=60,this.videoTransparency=50,this.videoState=u.VIDEO_STATE.ON,this.textToSpeechLanguage=null}initDrawable(t){this.renderer&&(this.drawableID=this.renderer.createDrawable(t)),this.isOriginal||this.runtime.startHats("control_start_as_clone",null,this)}get audioPlayer(){console.warn("get audioPlayer deprecated, please update to use .sprite.soundBank methods"),console.warn(new Error("stack for debug").stack);const t=this.sprite.soundBank,e={playSound:e=>t.play(this,e)};return Object.defineProperty(this,"audioPlayer",{configurable:!1,enumerable:!0,writable:!1,value:e}),e}initAudio(){}static get EVENT_TARGET_MOVED(){return"TARGET_MOVED"}static get EVENT_TARGET_VISUAL_CHANGE(){return"EVENT_TARGET_VISUAL_CHANGE"}static get ROTATION_STYLE_ALL_AROUND(){return"all around"}static get ROTATION_STYLE_LEFT_RIGHT(){return"left-right"}static get ROTATION_STYLE_NONE(){return"don't rotate"}static get VIDEO_STATE(){return{OFF:"off",ON:"on",ON_FLIPPED:"on-flipped"}}setXY(t,e,r){if(this.isStage)return;if(this.dragging&&!r)return;const i=this.x,n=this.y;if(this.renderer){const r=this.renderer.getFencedPositionOfDrawable(this.drawableID,[t,e]);this.x=r[0],this.y=r[1],this.renderer.updateDrawablePosition(this.drawableID,r),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())}else this.x=t,this.y=e;this.emit(u.EVENT_TARGET_MOVED,this,i,n,r),this.runtime.requestTargetsUpdate(this)}_getRenderedDirectionAndScale(){let t=this.direction,e=[this.size,this.size];return this.rotationStyle===u.ROTATION_STYLE_NONE?t=90:this.rotationStyle===u.ROTATION_STYLE_LEFT_RIGHT&&(t=90,e=[(this.direction<0?-1:1)*this.size,this.size]),{direction:t,scale:e}}setDirection(t){if(!this.isStage&&isFinite(t)){if(this.direction=i.wrapClamp(t,-179,180),this.renderer){const{direction:t,scale:e}=this._getRenderedDirectionAndScale();this.renderer.updateDrawableDirectionScale(this.drawableID,t,e),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())}this.runtime.requestTargetsUpdate(this)}}setDraggable(t){this.isStage||(this.draggable=!!t,this.runtime.requestTargetsUpdate(this))}setVisible(t){this.isStage||(this.visible=!!t,this.renderer&&(this.renderer.updateDrawableVisible(this.drawableID,this.visible),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())),this.runtime.requestTargetsUpdate(this))}setSize(t){if(!this.isStage){if(this.renderer){const e=this.renderer.getCurrentSkinSize(this.drawableID),r=e[0],n=e[1],s=Math.min(1,Math.max(5/r,5/n)),o=Math.min(1.5*this.runtime.constructor.STAGE_WIDTH/r,1.5*this.runtime.constructor.STAGE_HEIGHT/n);this.size=100*i.clamp(t/100,s,o);const{direction:a,scale:c}=this._getRenderedDirectionAndScale();this.renderer.updateDrawableDirectionScale(this.drawableID,a,c),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())}this.runtime.requestTargetsUpdate(this)}}setEffect(t,e){Object.prototype.hasOwnProperty.call(this.effects,t)&&(this.effects[t]=e,this.renderer&&(this.renderer.updateDrawableEffect(this.drawableID,t,e),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())))}clearEffects(){for(const t in this.effects)Object.prototype.hasOwnProperty.call(this.effects,t)&&(this.effects[t]=0);if(this.renderer){for(const t in this.effects)Object.prototype.hasOwnProperty.call(this.effects,t)&&this.renderer.updateDrawableEffect(this.drawableID,t,0);this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())}}setCostume(t){if(t=Math.round(t),[1/0,-1/0,NaN].includes(t)&&(t=0),this.currentCostume=i.wrapClamp(t,0,this.sprite.costumes.length-1),this.renderer){const t=this.getCostumes()[this.currentCostume];this.renderer.updateDrawableSkinId(this.drawableID,t.skinId),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())}this.runtime.requestTargetsUpdate(this)}addCostume(t,e){"number"!=typeof e||isNaN(e)?this.sprite.addCostumeAt(t,this.sprite.costumes.length):this.sprite.addCostumeAt(t,e)}renameCostume(t,e){const r=this.sprite.costumes.filter(((e,r)=>t!==r)).map((t=>t.name)),i=this.getCostumes()[t].name,s=n.unusedName(e,r);if(this.getCostumes()[t].name=s,this.isStage){const t=this.runtime.targets;for(let e=0;e<t.length;e++)t[e].blocks.updateAssetName(i,s,"backdrop")}else this.blocks.updateAssetName(i,s,"costume")}deleteCostume(t){const e=this.sprite.costumes.length;if(1===e)return null;if(t<0||t>=e)return null;const r=this.sprite.deleteCostumeAt(t);return t===this.currentCostume&&t===e-1?this.setCostume(t-1):t<this.currentCostume?this.setCostume(this.currentCostume-1):this.setCostume(this.currentCostume),this.runtime.requestTargetsUpdate(this),r}addSound(t,e){const r=this.sprite.sounds.map((t=>t.name));t.name=n.unusedName(t.name,r),"number"!=typeof e||isNaN(e)?this.sprite.sounds.push(t):this.sprite.sounds.splice(e,0,t)}renameSound(t,e){const r=this.sprite.sounds.filter(((e,r)=>t!==r)).map((t=>t.name)),i=this.sprite.sounds[t].name,s=n.unusedName(e,r);this.sprite.sounds[t].name=s,this.blocks.updateAssetName(i,s,"sound")}deleteSound(t){if(t<0||t>=this.sprite.sounds.length)return null;const e=this.sprite.sounds.splice(t,1)[0];return this.runtime.requestTargetsUpdate(this),e}setRotationStyle(t){if(t===u.ROTATION_STYLE_NONE?this.rotationStyle=u.ROTATION_STYLE_NONE:t===u.ROTATION_STYLE_ALL_AROUND?this.rotationStyle=u.ROTATION_STYLE_ALL_AROUND:t===u.ROTATION_STYLE_LEFT_RIGHT&&(this.rotationStyle=u.ROTATION_STYLE_LEFT_RIGHT),this.renderer){const{direction:t,scale:e}=this._getRenderedDirectionAndScale();this.renderer.updateDrawableDirectionScale(this.drawableID,t,e),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())}this.runtime.requestTargetsUpdate(this)}getCostumeIndexByName(t){for(let e=0;e<this.sprite.costumes.length;e++)if(this.getCostumes()[e].name===t)return e;return-1}getCurrentCostume(){return this.getCostumes()[this.currentCostume]}getCostumes(){return this.sprite.costumes}reorderCostume(t,e){if((e=i.clamp(e,0,this.sprite.costumes.length-1))===(t=i.clamp(t,0,this.sprite.costumes.length-1)))return!1;const r=this.getCurrentCostume(),n=this.sprite.costumes[t];return this.sprite.deleteCostumeAt(t),this.addCostume(n,e),this.currentCostume=this.getCostumeIndexByName(r.name),!0}reorderSound(t,e){if((e=i.clamp(e,0,this.sprite.sounds.length-1))===(t=i.clamp(t,0,this.sprite.sounds.length-1)))return!1;const r=this.sprite.sounds[t];return this.deleteSound(t),this.addSound(r,e),!0}getSounds(){return this.sprite.sounds}updateAllDrawableProperties(){if(this.renderer){const{direction:t,scale:e}=this._getRenderedDirectionAndScale();this.renderer.updateDrawablePosition(this.drawableID,[this.x,this.y]),this.renderer.updateDrawableDirectionScale(this.drawableID,t,e),this.renderer.updateDrawableVisible(this.drawableID,this.visible);const r=this.getCostumes()[this.currentCostume];this.renderer.updateDrawableSkinId(this.drawableID,r.skinId);for(const t in this.effects)Object.prototype.hasOwnProperty.call(this.effects,t)&&this.renderer.updateDrawableEffect(this.drawableID,t,this.effects[t]);this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw())}this.runtime.requestTargetsUpdate(this)}getName(){return this.sprite.name}isSprite(){return!this.isStage&&this.isOriginal}getBounds(){return this.renderer?this.runtime.renderer.getBounds(this.drawableID):null}getBoundsForBubble(){return this.renderer?this.runtime.renderer.getBoundsForBubble(this.drawableID):null}isTouchingObject(t){if("_mouse_"===t){if(!this.runtime.ioDevices.mouse)return!1;const t=this.runtime.ioDevices.mouse.getClientX(),e=this.runtime.ioDevices.mouse.getClientY();return this.isTouchingPoint(t,e)}return"_edge_"===t?this.isTouchingEdge():this.isTouchingSprite(t)}isTouchingPoint(t,e){return!!this.renderer&&this.renderer.drawableTouching(this.drawableID,t,e)}isTouchingEdge(){if(this.renderer){const t=this.runtime.constructor.STAGE_WIDTH,e=this.runtime.constructor.STAGE_HEIGHT,r=this.getBounds();if(r.left<-t/2||r.right>t/2||r.top>e/2||r.bottom<-e/2)return!0}return!1}isTouchingSprite(t){t=s.toString(t);const e=this.runtime.getSpriteTargetByName(t);if(!e||!this.renderer)return!1;const r=e.sprite.clones.filter((t=>!t.dragging)).map((t=>t.drawableID));return this.renderer.isTouchingDrawables(this.drawableID,r)}isTouchingColor(t){return!!this.renderer&&this.renderer.isTouchingColor(this.drawableID,t)}colorIsTouchingColor(t,e){return!!this.renderer&&this.renderer.isTouchingColor(this.drawableID,t,e)}getLayerOrder(){return this.renderer?this.renderer.getDrawableOrder(this.drawableID):null}goToFront(){this.renderer&&this.renderer.setDrawableOrder(this.drawableID,1/0,c.SPRITE_LAYER),this.runtime.setExecutablePosition(this,1/0)}goToBack(){this.renderer&&this.renderer.setDrawableOrder(this.drawableID,-1/0,c.SPRITE_LAYER,!1),this.runtime.setExecutablePosition(this,-1/0)}goForwardLayers(t){this.renderer&&this.renderer.setDrawableOrder(this.drawableID,t,c.SPRITE_LAYER,!0),this.runtime.moveExecutable(this,t)}goBackwardLayers(t){this.renderer&&this.renderer.setDrawableOrder(this.drawableID,-t,c.SPRITE_LAYER,!0),this.runtime.moveExecutable(this,-t)}goBehindOther(t){if(this.renderer){const e=this.renderer.setDrawableOrder(t.drawableID,0,c.SPRITE_LAYER,!0);this.renderer.setDrawableOrder(this.drawableID,e,c.SPRITE_LAYER)}const e=this.runtime.executableTargets.indexOf(t);this.runtime.setExecutablePosition(this,e)}keepInFence(t,e,r){let i=r;i||(i={left:-this.runtime.constructor.STAGE_WIDTH/2,right:this.runtime.constructor.STAGE_WIDTH/2,top:this.runtime.constructor.STAGE_HEIGHT/2,bottom:-this.runtime.constructor.STAGE_HEIGHT/2});const n=this.getBounds();if(!n)return;n.left+=t-this.x,n.right+=t-this.x,n.top+=e-this.y,n.bottom+=e-this.y;let s=0,o=0;return n.left<i.left&&(s+=i.left-n.left),n.right>i.right&&(s+=i.right-n.right),n.top>i.top&&(o+=i.top-n.top),n.bottom<i.bottom&&(o+=i.bottom-n.bottom),[t+s,e+o]}makeClone(){if(!this.runtime.clonesAvailable()||this.isStage)return null;this.runtime.changeCloneCounter(1);const t=this.sprite.createClone();return t.x=this.x,t.y=this.y,t.direction=this.direction,t.draggable=this.draggable,t.visible=this.visible,t.size=this.size,t.currentCostume=this.currentCostume,t.rotationStyle=this.rotationStyle,t.effects=o.simple(this.effects),t.variables=this.duplicateVariables(),t._edgeActivatedHatValues=o.simple(this._edgeActivatedHatValues),t.initDrawable(c.SPRITE_LAYER),t.updateAllDrawableProperties(),t}duplicate(){return this.sprite.duplicate().then((t=>{const e=t.createClone();return e.x=400*(Math.random()-.5)/2,e.y=300*(Math.random()-.5)/2,e.direction=this.direction,e.draggable=this.draggable,e.visible=this.visible,e.size=this.size,e.currentCostume=this.currentCostume,e.rotationStyle=this.rotationStyle,e.effects=JSON.parse(JSON.stringify(this.effects)),e.variables=this.duplicateVariables(e.blocks),e.updateAllDrawableProperties(),e}))}onGreenFlag(){this.clearEffects()}onStopAll(){this.clearEffects()}postSpriteInfo(t){const e=Object.prototype.hasOwnProperty.call(t,"force")?t.force:null,r=Object.prototype.hasOwnProperty.call(t,"x"),i=Object.prototype.hasOwnProperty.call(t,"y");(r||i)&&this.setXY(r?t.x:this.x,i?t.y:this.y,e),Object.prototype.hasOwnProperty.call(t,"direction")&&this.setDirection(t.direction),Object.prototype.hasOwnProperty.call(t,"draggable")&&this.setDraggable(t.draggable),Object.prototype.hasOwnProperty.call(t,"rotationStyle")&&this.setRotationStyle(t.rotationStyle),Object.prototype.hasOwnProperty.call(t,"visible")&&this.setVisible(t.visible),Object.prototype.hasOwnProperty.call(t,"size")&&this.setSize(t.size)}startDrag(){this.dragging=!0}stopDrag(){this.dragging=!1}toJSON(){const t=this.getCostumes();return{id:this.id,name:this.getName(),isStage:this.isStage,x:this.x,y:this.y,size:this.size,direction:this.direction,draggable:this.draggable,currentCostume:this.currentCostume,costume:t[this.currentCostume],costumeCount:t.length,visible:this.visible,rotationStyle:this.rotationStyle,comments:this.comments,blocks:this.blocks._blocks,variables:this.variables,costumes:t,sounds:this.getSounds(),textToSpeechLanguage:this.textToSpeechLanguage,tempo:this.tempo,volume:this.volume,videoTransparency:this.videoTransparency,videoState:this.videoState}}dispose(){this.runtime.changeCloneCounter(-1),this.runtime.stopForTarget(this),this.runtime.removeExecutable(this),this.sprite.removeClone(this),this.renderer&&null!==this.drawableID&&(this.renderer.destroyDrawable(this.drawableID,this.isStage?c.BACKGROUND_LAYER:c.SPRITE_LAYER),this.visible&&(this.emit(u.EVENT_TARGET_VISUAL_CHANGE,this),this.runtime.requestRedraw()))}}t.exports=u},9431:(t,e,r)=>{var i=r(5139),n={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},s={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:n,input:n,output:n,button:n,datalist:n,textarea:n,option:{option:!0},optgroup:{optgroup:!0}},o={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},a={__proto__:null,math:!0,svg:!0},c={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0,foreignObject:!0,desc:!0,title:!0},u=/\s|\//;function l(t,e){this._options=e||{},this._cbs=t||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this._foreignContext=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(i=this._options.Tokenizer),this._tokenizer=new i(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}r(728)(l,r(4434).EventEmitter),l.prototype._updatePosition=function(t){null===this.endIndex?this._tokenizer._sectionStart<=t?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-t:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},l.prototype.ontext=function(t){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(t)},l.prototype.onopentagname=function(t){if(this._lowerCaseTagNames&&(t=t.toLowerCase()),this._tagname=t,!this._options.xmlMode&&t in s)for(var e;(e=this._stack[this._stack.length-1])in s[t];this.onclosetag(e));!this._options.xmlMode&&t in o||(this._stack.push(t),t in a?this._foreignContext.push(!0):t in c&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(t),this._cbs.onopentag&&(this._attribs={})},l.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in o&&this._cbs.onclosetag(this._tagname),this._tagname=""},l.prototype.onclosetag=function(t){if(this._updatePosition(1),this._lowerCaseTagNames&&(t=t.toLowerCase()),(t in a||t in c)&&this._foreignContext.pop(),!this._stack.length||t in o&&!this._options.xmlMode)this._options.xmlMode||"br"!==t&&"p"!==t||(this.onopentagname(t),this._closeCurrentTag());else{var e=this._stack.lastIndexOf(t);if(-1!==e)if(this._cbs.onclosetag)for(e=this._stack.length-e;e--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=e;else"p"!==t||this._options.xmlMode||(this.onopentagname(t),this._closeCurrentTag())}},l.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend()},l.prototype._closeCurrentTag=function(){var t=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===t&&(this._cbs.onclosetag&&this._cbs.onclosetag(t),this._stack.pop())},l.prototype.onattribname=function(t){this._lowerCaseAttributeNames&&(t=t.toLowerCase()),this._attribname=t},l.prototype.onattribdata=function(t){this._attribvalue+=t},l.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},l.prototype._getInstructionName=function(t){var e=t.search(u),r=e<0?t:t.substr(0,e);return this._lowerCaseTagNames&&(r=r.toLowerCase()),r},l.prototype.ondeclaration=function(t){if(this._cbs.onprocessinginstruction){var e=this._getInstructionName(t);this._cbs.onprocessinginstruction("!"+e,"!"+t)}},l.prototype.onprocessinginstruction=function(t){if(this._cbs.onprocessinginstruction){var e=this._getInstructionName(t);this._cbs.onprocessinginstruction("?"+e,"?"+t)}},l.prototype.oncomment=function(t){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(t),this._cbs.oncommentend&&this._cbs.oncommentend()},l.prototype.oncdata=function(t){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(t),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+t+"]]")},l.prototype.onerror=function(t){this._cbs.onerror&&this._cbs.onerror(t)},l.prototype.onend=function(){if(this._cbs.onclosetag)for(var t=this._stack.length;t>0;this._cbs.onclosetag(this._stack[--t]));this._cbs.onend&&this._cbs.onend()},l.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},l.prototype.parseComplete=function(t){this.reset(),this.end(t)},l.prototype.write=function(t){this._tokenizer.write(t)},l.prototype.end=function(t){this._tokenizer.end(t)},l.prototype.pause=function(){this._tokenizer.pause()},l.prototype.resume=function(){this._tokenizer.resume()},l.prototype.parseChunk=l.prototype.write,l.prototype.done=l.prototype.end,t.exports=l},9449:(t,e,r)=>{var i=r(887),n={debug:1,info:2,warn:3,error:4};function s(){this.enabled=!0,this.defaultResult=!0,this.clear()}function o(t,e){return t.n.test?t.n.test(e):t.n==e}i.mixin(s),s.prototype.allow=function(t,e){return this._white.push({n:t,l:n[e]}),this},s.prototype.deny=function(t,e){return this._black.push({n:t,l:n[e]}),this},s.prototype.clear=function(){return this._white=[],this._black=[],this},s.prototype.test=function(t,e){var r,i=Math.max(this._white.length,this._black.length);for(r=0;r<i;r++){if(this._white[r]&&o(this._white[r],t)&&n[e]>=this._white[r].l)return!0;if(this._black[r]&&o(this._black[r],t)&&n[e]<=this._black[r].l)return!1}return this.defaultResult},s.prototype.write=function(t,e,r){if(!this.enabled||this.test(t,e))return this.emit("item",t,e,r)},t.exports=s},9552:t=>{!function(){"use strict";t.exports=function(t){return(t instanceof Buffer?t:Buffer.from(t.toString(),"binary")).toString("base64")}}()},9654:(t,e,r)=>{const i=r(2181);t.exports=class{constructor(t){this._projectTimer=new i({now:()=>t.currentMSecs}),this._projectTimer.start(),this._pausedTime=null,this._paused=!1,this.runtime=t}projectTimer(){return this._paused?this._pausedTime/1e3:this._projectTimer.timeElapsed()/1e3}pause(){this._paused=!0,this._pausedTime=this._projectTimer.timeElapsed()}resume(){this._paused=!1;const t=this._projectTimer.timeElapsed()-this._pausedTime;this._projectTimer.startTime+=t}resetProjectTimer(){this._projectTimer.start()}}},9747:(t,e,r)=>{var i=r(887),n=r(5406).i;function s(){}i.mixin(s),s.prototype.write=function(t,e,r){var i;this.emit("item",(t?t+" ":"")+(e?n("- "+(4==(i=e.toUpperCase()).toString().length?" "+i:i)+" -",{debug:"magenta",info:"cyan",warn:"yellow",error:"red"}[e])+" ":"")+r.join(" "))},t.exports=s},9834:t=>{var e={amp:"&",apos:"'",lt:"<",gt:">",quot:'"',nbsp:" "},r=/&([a-z]+);/gi;t.exports=function(t){return t.replace(r,(function(t,r){return r=r.toLowerCase(),e.hasOwnProperty(r)?e[r]:t}))}},9905:(t,e,r)=>{const i=r(4434),n=r(4766),s=r(4196),o=r(9379),a=r(1398),{Map:c}=r(9063),u=r(4586),l=r(6560),h=r(8251);t.exports=class extends i{constructor(t,e){super(),e||(e=new n(t)),this.runtime=t,this.id=a(),this.blocks=e,this.variables={},this.comments={},this._customState={},this._edgeActivatedHatValues={}}onGreenFlag(){}getName(){return this.id}updateEdgeActivatedValue(t,e){const r=this._edgeActivatedHatValues[t];return this._edgeActivatedHatValues[t]=e,r}hasEdgeActivatedValue(t){return Object.prototype.hasOwnProperty.call(this._edgeActivatedHatValues,t)}clearEdgeActivatedValues(){this._edgeActivatedHatValues={}}lookupOrCreateVariable(t,e){let r=this.lookupVariableById(t);if(r)return r;if(r=this.lookupVariableByNameAndType(e,s.SCALAR_TYPE),r)return r;const i=new s(t,e,s.SCALAR_TYPE,!1);return this.variables[t]=i,i}lookupBroadcastMsg(t,e){let r;if(t?r=this.lookupVariableById(t):e?r=this.lookupBroadcastByInputValue(e):u.error("Cannot find broadcast message if neither id nor name are provided."),r)return e&&r.name.toLowerCase()!==e.toLowerCase()&&u.error(`Found broadcast message with id: ${t}, butits name, ${r.name} did not match expected name ${e}.`),r.type!==s.BROADCAST_MESSAGE_TYPE&&u.error(`Found variable with id: ${t}, but its type ${r.type}did not match expected type ${s.BROADCAST_MESSAGE_TYPE}`),r}lookupBroadcastByInputValue(t){const e=this.variables;for(const r in e)if(e[r].type===s.BROADCAST_MESSAGE_TYPE&&e[r].name.toLowerCase()===t.toLowerCase())return e[r]}lookupVariableById(t){if(Object.prototype.hasOwnProperty.call(this.variables,t))return this.variables[t];if(this.runtime&&!this.isStage){const e=this.runtime.getTargetForStage();if(e&&Object.prototype.hasOwnProperty.call(e.variables,t))return e.variables[t]}}lookupVariableByNameAndType(t,e,r){if("string"==typeof t){"string"!=typeof e&&(e=s.SCALAR_TYPE),r=r||!1;for(const r in this.variables){const i=this.variables[r];if(i.name===t&&i.type===e)return i}if(!r&&this.runtime&&!this.isStage){const r=this.runtime.getTargetForStage();if(r)for(const i in r.variables){const n=r.variables[i];if(n.name===t&&n.type===e)return n}}return null}}lookupOrCreateList(t,e){let r=this.lookupVariableById(t);if(r)return r;if(r=this.lookupVariableByNameAndType(e,s.LIST_TYPE),r)return r;const i=new s(t,e,s.LIST_TYPE,!1);return this.variables[t]=i,i}createVariable(t,e,r,i){if(!Object.prototype.hasOwnProperty.call(this.variables,t)){const n=new s(t,e,r,!1);i&&this.isStage&&this.runtime.canAddCloudVariable()&&(n.isCloud=!0,this.runtime.addCloudVariable(),this.runtime.ioDevices.cloud.requestCreateVariable(n)),this.variables[t]=n}}createComment(t,e,r,i,n,s,a,c){if(!Object.prototype.hasOwnProperty.call(this.comments,t)){const l=new o(t,r,i,n,s,a,c);if(e){l.blockId=e;const r=this.blocks.getBlock(e);r?r.comment=t:u.warn(`Could not find block with id ${e} associated with commentId: ${t}`)}this.comments[t]=l}}renameVariable(t,e){if(Object.prototype.hasOwnProperty.call(this.variables,t)){const r=this.variables[t];if(r.id===t){const i=r.name;if(r.name=e,this.runtime){if(r.isCloud&&this.isStage&&this.runtime.ioDevices.cloud.requestRenameVariable(i,e),r.type===s.SCALAR_TYPE){let t=!1;this.runtime.targets.forEach((r=>{t=r.blocks.updateSensingOfReference(i,e,this.isStage?"_stage_":this.getName())||t})),t&&this.runtime.requestBlocksUpdate()}const n=this.runtime.monitorBlocks;n.changeBlock({id:t,element:"field",name:r.type===s.LIST_TYPE?"LIST":"VARIABLE",value:t},this.runtime);const o=n.getBlock(r.id);o&&this.runtime.requestUpdateMonitor(c({id:t,params:n._getBlockParams(o)}))}}}}deleteVariable(t){if(Object.prototype.hasOwnProperty.call(this.variables,t)){const e=this.variables[t].name,r=this.variables[t].isCloud;delete this.variables[t],this.runtime&&(r&&this.isStage&&(this.runtime.ioDevices.cloud.requestDeleteVariable(e),this.runtime.removeCloudVariable()),this.runtime.monitorBlocks.deleteBlock(t),this.runtime.requestRemoveMonitor(t))}}deleteMonitors(){let t;this.runtime.requestRemoveMonitorByTargetId(this.id),t=this.isStage?Object.keys(this.variables):Object.keys(this.runtime.monitorBlocks._blocks).filter((t=>this.runtime.monitorBlocks._blocks[t].targetId===this.id));for(const e of t)this.runtime.monitorBlocks.deleteBlock(e)}duplicateVariable(t,e){if(Object.prototype.hasOwnProperty.call(this.variables,t)){const r=this.variables[t],i=new s(e?t:null,r.name,r.type,r.isCloud);return i.type===s.LIST_TYPE?i.value=r.value.slice(0):i.value=r.value,i}return null}duplicateVariables(t){let e;return t&&(e=t.getAllVariableAndListReferences()),Object.keys(this.variables).reduce(((r,i)=>{const n=this.duplicateVariable(i,!t);if(r[n.id]=n,t&&e){const t=e[i];t&&this.mergeVariables(i,n.id,t)}return r}),{})}postSpriteInfo(){}getCustomState(t){return this._customState[t]}setCustomState(t,e){this._customState[t]=e}dispose(){this._customState={},this.runtime&&this.runtime.removeExecutable(this)}getAllVariableNamesInScopeByType(t,e){"string"!=typeof t&&(t=s.SCALAR_TYPE),e=e||!1;const r=Object.values(this.variables).filter((e=>e.type===t)).map((t=>t.name));if(e||this.isStage||!this.runtime)return r;const i=this.runtime.getTargetForStage().getAllVariableNamesInScopeByType(t);return r.concat(i)}mergeVariables(t,e,r,i){const n=r||this.blocks.getAllVariableAndListReferences()[t];h.updateVariableIdentifiers(n,e,i)}shareLocalVariableToStage(t,e){if(!this.runtime)return;const r=this.variables[t];if(!r)return void u.warn("Cannot share a local variable to the stage if it's not local.");const i=`StageVarFromLocal_${t}`;let n=this.runtime.getTargetForStage().lookupVariableById(i);if(!n){const t=r.name,e=r.type,s=`Stage: ${t}`;n=this.runtime.createNewGlobalVariable(s,i,e)}this.mergeVariables(t,n.id,e,n.name)}shareLocalVariableToSprite(t,e,r){if(!this.runtime)return;if(this.isStage)return;const i=this.variables[t];if(!i)return void u.warn("Tried to call 'shareLocalVariableToSprite' with a non-local variable.");const n=i.name,o=i.type,a=e.lookupVariableByNameAndType(n,o);let c;if(a)c=a.id;else{const t=new s(null,n,o);c=t.id,e.variables[c]=t}this.mergeVariables(t,c,r)}resolveVariableSharingConflictsWithTarget(t,e){if(this.isStage)return;const r=this.blocks.getAllVariableAndListReferences(t);for(const t in r){if(!this.variables[t])continue;const i=r[t];e.isStage?this.shareLocalVariableToStage(t,i):this.shareLocalVariableToSprite(t,e,i)}}fixUpVariableReferences(){if(!this.runtime)return;if(this.isStage)return;const t=this.runtime.getTargetForStage();if(!t||!t.variables)return;const e=(e,r,i)=>{if(t.lookupVariableByNameAndType(r,i)){const t=l.unusedName(`${this.getName()}: ${r}`,this.getAllVariableNamesInScopeByType(i));return this.renameVariable(e,t),t}return null},r=this.blocks.getAllVariableAndListReferences(),i=[];if(Object.keys(this.variables).length>0)for(const t in this.variables)Object.prototype.hasOwnProperty.call(this.variables,t)&&(r[t]||i.push(t));const n=Object.create(null),s=Object.create(null),o={},a=t=>o[t]||(o[t]=this.runtime.getAllVarNamesOfType(t),o[t]);for(const i in r){const o=r[i][0],c=o.referencingField.value,u=o.type;if(this.lookupVariableById(i)){if(Object.prototype.hasOwnProperty.call(this.variables,i)){const t=e(i,c,u);t&&r[i].map((e=>(e.referencingField.value=t,e)))}}else{const e=t.lookupVariableByNameAndType(c,u);if(e)n[i]||(n[i]=e.id);else{const e=a(u),r=l.unusedName(c,e);t.createVariable(i,r,u),s[i]||(s[i]=r)}}}for(const t in i){const r=i[t];e(r,this.variables[r].name,this.variables[r].type)}for(const t in n){const e=n[t],i=r[t];this.mergeVariables(t,e,i)}for(const t in s){const e=s[t];r[t].map((t=>(t.referencingField.value=e,t)))}}}},9932:(t,e,r)=>{const i=r(8833),n=r(3581),s=r(9407),o=r(1398),a=r(5262),c=r(661),u=r(4813);class l{constructor(t){this.runtime=t,this._onTargetChanged=this._onTargetChanged.bind(this),this._onResetBubbles=this._onResetBubbles.bind(this),this._onTargetWillExit=this._onTargetWillExit.bind(this),this._updateBubble=this._updateBubble.bind(this),this.runtime.on("PROJECT_STOP_ALL",this._onResetBubbles),this.runtime.on("targetWasRemoved",this._onTargetWillExit),this.runtime.on(l.SAY_OR_THINK,this._updateBubble)}static get DEFAULT_BUBBLE_STATE(){return{drawableId:null,onSpriteRight:!0,skinId:null,text:"",type:"say",usageId:null}}static get STATE_KEY(){return"Scratch.looks"}static get SAY_OR_THINK(){return"SAY"}static get SAY_BUBBLE_LIMIT(){return 330}static get EFFECT_GHOST_LIMIT(){return{min:0,max:100}}static get EFFECT_BRIGHTNESS_LIMIT(){return{min:-100,max:100}}_getBubbleState(t){let e=t.getCustomState(l.STATE_KEY);return e||(e=n.simple(l.DEFAULT_BUBBLE_STATE),t.setCustomState(l.STATE_KEY,e)),e}_onTargetChanged(t){this._getBubbleState(t).drawableId&&this._positionBubble(t)}_onTargetWillExit(t){const e=this._getBubbleState(t);e.drawableId&&e.skinId&&(this.runtime.renderer.destroyDrawable(e.drawableId,a.SPRITE_LAYER),this.runtime.renderer.destroySkin(e.skinId),e.drawableId=null,e.skinId=null,this.runtime.requestRedraw()),t.removeListener(s.EVENT_TARGET_VISUAL_CHANGE,this._onTargetChanged)}_onResetBubbles(){for(let t=0;t<this.runtime.targets.length;t++)this._getBubbleState(this.runtime.targets[t]).text="",this._onTargetWillExit(this.runtime.targets[t]);clearTimeout(this._bubbleTimeout)}_positionBubble(t){if(!t.visible)return;const e=this._getBubbleState(t),[r,i]=this.runtime.renderer.getCurrentSkinSize(e.drawableId);let n;try{n=t.getBoundsForBubble()}catch(e){n={left:t.x,right:t.x,top:t.y,bottom:t.y}}const s=this.runtime.renderer.getNativeSize(),o={left:-s[0]/2,right:s[0]/2,top:s[1]/2,bottom:-s[1]/2};e.onSpriteRight&&r+n.right>o.right&&n.left-r>o.left?(e.onSpriteRight=!1,this._renderBubble(t)):!e.onSpriteRight&&n.left-r<o.left&&r+n.right<o.right?(e.onSpriteRight=!0,this._renderBubble(t)):(this.runtime.renderer.updateDrawablePosition(e.drawableId,[e.onSpriteRight?Math.max(o.left,Math.min(o.right-r,n.right)):Math.min(o.right-r,Math.max(o.left,n.left-r)),Math.min(o.top,n.bottom+i)]),this.runtime.requestRedraw())}_renderBubble(t){if(!this.runtime.renderer)return;const e=this._getBubbleState(t),{type:r,text:i,onSpriteRight:n}=e;t.visible&&""!==i?(e.skinId?this.runtime.renderer.updateTextSkin(e.skinId,r,i,n,[0,0]):(t.addListener(s.EVENT_TARGET_VISUAL_CHANGE,this._onTargetChanged),e.drawableId=this.runtime.renderer.createDrawable(a.SPRITE_LAYER),e.skinId=this.runtime.renderer.createTextSkin(r,i,e.onSpriteRight,[0,0]),this.runtime.renderer.updateDrawableSkinId(e.drawableId,e.skinId)),this._positionBubble(t)):this._onTargetWillExit(t)}_formatBubbleText(t){return""===t?t:("number"==typeof t&&Math.abs(t)>=.01&&t%1!=0&&(t=t.toFixed(2)),t=String(t).substr(0,l.SAY_BUBBLE_LIMIT))}_updateBubble(t,e,r){const i=this._getBubbleState(t);i.type=e,i.text=this._formatBubbleText(r),i.usageId=o(),this._renderBubble(t)}getPrimitives(){return{looks_say:this.say,looks_sayforsecs:this.sayforsecs,looks_think:this.think,looks_thinkforsecs:this.thinkforsecs,looks_show:this.show,looks_hide:this.hide,looks_hideallsprites:()=>{},looks_switchcostumeto:this.switchCostume,looks_switchbackdropto:this.switchBackdrop,looks_switchbackdroptoandwait:this.switchBackdropAndWait,looks_nextcostume:this.nextCostume,looks_nextbackdrop:this.nextBackdrop,looks_changeeffectby:this.changeEffect,looks_seteffectto:this.setEffect,looks_cleargraphiceffects:this.clearEffects,looks_changesizeby:this.changeSize,looks_setsizeto:this.setSize,looks_changestretchby:()=>{},looks_setstretchto:()=>{},looks_gotofrontback:this.goToFrontBack,looks_goforwardbackwardlayers:this.goForwardBackwardLayers,looks_size:this.getSize,looks_costumenumbername:this.getCostumeNumberName,looks_backdropnumbername:this.getBackdropNumberName}}getMonitored(){return{looks_size:{isSpriteSpecific:!0,getId:t=>`${t}_size`},looks_costumenumbername:{isSpriteSpecific:!0,getId:(t,e)=>c(`${t}_costumenumbername`,e)},looks_backdropnumbername:{getId:(t,e)=>c("backdropnumbername",e)}}}say(t,e){this.runtime.emit(l.SAY_OR_THINK,e.target,"say",t.MESSAGE)}sayforsecs(t,e){this.say(t,e);const r=e.target,i=this._getBubbleState(r).usageId;return new Promise((e=>{this._bubbleTimeout=setTimeout((()=>{this._bubbleTimeout=null,this._getBubbleState(r).usageId===i&&this._updateBubble(r,"say",""),e()}),1e3*t.SECS)}))}think(t,e){this.runtime.emit(l.SAY_OR_THINK,e.target,"think",t.MESSAGE)}thinkforsecs(t,e){this.think(t,e);const r=e.target,i=this._getBubbleState(r).usageId;return new Promise((e=>{this._bubbleTimeout=setTimeout((()=>{this._bubbleTimeout=null,this._getBubbleState(r).usageId===i&&this._updateBubble(r,"think",""),e()}),1e3*t.SECS)}))}show(t,e){e.target.setVisible(!0),this._renderBubble(e.target)}hide(t,e){e.target.setVisible(!1),this._renderBubble(e.target)}_setCostume(t,e,r){if("number"==typeof e)t.setCostume(r?e:e-1);else{const n=t.getCostumeIndexByName(e.toString());-1!==n?t.setCostume(n):"next costume"===e?t.setCostume(t.currentCostume+1):"previous costume"===e?t.setCostume(t.currentCostume-1):isNaN(e)||i.isWhiteSpace(e)||t.setCostume(r?Number(e):Number(e)-1)}return[]}_setBackdrop(t,e,r){if("number"==typeof e)t.setCostume(r?e:e-1);else{const n=t.getCostumeIndexByName(e.toString());if(-1!==n)t.setCostume(n);else if("next backdrop"===e)t.setCostume(t.currentCostume+1);else if("previous backdrop"===e)t.setCostume(t.currentCostume-1);else if("random backdrop"===e){const e=t.getCostumes().length;if(e>1){const r=0,i=e-1,n=t.currentCostume,s=u.inclusiveRandIntWithout(r,i,n);t.setCostume(s)}}else isNaN(e)||i.isWhiteSpace(e)||t.setCostume(r?Number(e):Number(e)-1)}const n=t.getCostumes()[t.currentCostume].name;return this.runtime.startHats("event_whenbackdropswitchesto",{BACKDROP:n})}switchCostume(t,e){this._setCostume(e.target,t.COSTUME)}nextCostume(t,e){this._setCostume(e.target,e.target.currentCostume+1,!0)}switchBackdrop(t){this._setBackdrop(this.runtime.getTargetForStage(),t.BACKDROP)}switchBackdropAndWait(t,e){if(!e.stackFrame.startedThreads&&(e.stackFrame.startedThreads=this._setBackdrop(this.runtime.getTargetForStage(),t.BACKDROP),0===e.stackFrame.startedThreads.length))return;const r=this;e.stackFrame.startedThreads.some((t=>-1!==r.runtime.threads.indexOf(t)))&&(e.stackFrame.startedThreads.every((t=>r.runtime.isWaitingThread(t)))?e.yieldTick():e.yield())}nextBackdrop(){const t=this.runtime.getTargetForStage();this._setBackdrop(t,t.currentCostume+1,!0)}clampEffect(t,e){let r=e;switch(t){case"ghost":r=u.clamp(e,l.EFFECT_GHOST_LIMIT.min,l.EFFECT_GHOST_LIMIT.max);break;case"brightness":r=u.clamp(e,l.EFFECT_BRIGHTNESS_LIMIT.min,l.EFFECT_BRIGHTNESS_LIMIT.max)}return r}changeEffect(t,e){const r=i.toString(t.EFFECT).toLowerCase(),n=i.toNumber(t.CHANGE);if(!Object.prototype.hasOwnProperty.call(e.target.effects,r))return;let s=n+e.target.effects[r];s=this.clampEffect(r,s),e.target.setEffect(r,s)}setEffect(t,e){const r=i.toString(t.EFFECT).toLowerCase();let n=i.toNumber(t.VALUE);n=this.clampEffect(r,n),e.target.setEffect(r,n)}clearEffects(t,e){e.target.clearEffects()}changeSize(t,e){const r=i.toNumber(t.CHANGE);e.target.setSize(e.target.size+r)}setSize(t,e){const r=i.toNumber(t.SIZE);e.target.setSize(r)}goToFrontBack(t,e){e.target.isStage||("front"===t.FRONT_BACK?e.target.goToFront():e.target.goToBack())}goForwardBackwardLayers(t,e){e.target.isStage||("forward"===t.FORWARD_BACKWARD?e.target.goForwardLayers(i.toNumber(t.NUM)):e.target.goBackwardLayers(i.toNumber(t.NUM)))}getSize(t,e){return Math.round(e.target.size)}getBackdropNumberName(t){const e=this.runtime.getTargetForStage();return"number"===t.NUMBER_NAME?e.currentCostume+1:e.getCostumes()[e.currentCostume].name}getCostumeNumberName(t,e){return"number"===t.NUMBER_NAME?e.target.currentCostume+1:e.target.getCostumes()[e.target.currentCostume].name}}t.exports=l}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i=r(1222);module.exports=i})();